!function(){var e={4184:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";n.r(r),n.d(r,{editor:function(){return a}});var e={};n.r(e),n.d(e,{getActiveGoal:function(){return Wn},getActiveGoalIndex:function(){return qn},getActiveSegment:function(){return Hn},getActiveSegmentIndex:function(){return Xn},getAlternative:function(){return Ln},getAlternativeIds:function(){return Vn},getAlternativePreviewerUrl:function(){return $n},getAlternatives:function(){return Bn},getConversionActions:function(){return Un},getDraftStatusRationale:function(){return Yn},getExperimentAttribute:function(){return Qn},getExperimentId:function(){return Jn},getExperimentType:function(){return zn},getGoals:function(){return er},getHeatmapAttribute:function(){return Kn},getScope:function(){return tr},getSegmentationRules:function(){return nr},getSegments:function(){return rr},hasExperimentBeenRecentlySaved:function(){return Fn},isExperimentBeingSaved:function(){return jn},isTestedElementInvalid:function(){return Zn}});var t={};n.r(t),n.d(t,{addAlternatives:function(){return ir},addConversionActionsIntoGoal:function(){return lr},addGoals:function(){return Sr},addScopeRules:function(){return Nr},addSegmentationRulesIntoSegment:function(){return Tr},addSegments:function(){return Cr},closeAlternativePreviewer:function(){return _r},openAlternativePreviewer:function(){return Er},removeAlternatives:function(){return ar},removeConversionActionsFromGoal:function(){return ur},removeGoals:function(){return Ar},removeScopeRules:function(){return Ir},removeSegmentationRulesFromSegment:function(){return Or},removeSegments:function(){return kr},replaceAlternatives:function(){return or},replaceConversionActionsInGoal:function(){return cr},replaceSegmentationRulesInSegment:function(){return Rr},setActiveGoal:function(){return pr},setActiveSegment:function(){return vr},setAlternative:function(){return sr},setDraftStatusRationale:function(){return gr},setExperimentAsBeingSaved:function(){return fr},setExperimentAsRecentlySaved:function(){return br},setExperimentData:function(){return xr},setHeatmapData:function(){return hr},setTestedElementAsInvalid:function(){return yr},setupEditor:function(){return dr},updateConversionAction:function(){return mr},updateGoal:function(){return wr},updateSegment:function(){return Pr},updateSegmentationRule:function(){return Dr}});var i={};n.r(i),n.d(i,{moveToTrash:function(){return Yr},resumeExperiment:function(){return Jr},saveExperiment:function(){return qr},saveExperimentAndEditAlternative:function(){return Hr},saveExperimentAndPreviewAlternative:function(){return Xr},startExperiment:function(){return $r}});var a={};n.r(a),n.d(a,{EditorProvider:function(){return A},ExperimentName:function(){return oe},Header:function(){return K},STORE_NAME:function(){return g},Sidebar:function(){return Ft},initializeExperimentEditor:function(){return ti}});var o=window.wp.element,s=(window.wp.coreData,window.wp.data),l=window.wp.domReady,c=n.n(l),u=window.lodash,m=window.nab.conversionActionLibrary,d=window.nab.data,p=window.nab.experimentLibrary,v=window.nab.segmentationRuleLibrary,f=window.nab.utils,g="nab/editor",b={byId:{},allIds:[]},E={},_={id:0,type:"",status:"draft",name:"",description:"",startDate:"",endDate:"",endMode:"manual",endValue:0,isTestedElementInvalid:!1,links:{edit:"",preview:""}},x={},h={},y={},S={},A=function(e){var t=e.experiment,n=e.children,r=(0,o.useState)(!1),i=r[0],a=r[1],l=(0,s.useDispatch)(g),c=l.setupEditor,u=l.setActiveGoal,m=l.setActiveSegment;return(0,o.useEffect)((function(){if(t){var e=t.goals[0]||(0,f.createGoal)(),n=t.segments[0]||{};c(t),u(e.id),m(n.id),a(!0)}}),[!!t]),i?o.createElement("div",null,n):null},w=window.wp.components,N=window.wp.i18n,I=window.wp.notices,T=window.nab.conversionActions,R=window.nab.date,O=window.nab.segmentationRules,D=window.wp.hooks;function C(e,t){var n=!(e&&!(0,f.isEmpty)(e)&&(0,u.values)(e).reduce((function(e,t){return e&&!!t}),!0))&&(0,N._x)("Test doesn’t specify the tested element","text","nelio-ab-testing");return(0,D.applyFilters)("nab.isTestedElementInvalid",n,e,t)}function k(e,t,n){var r;if(!e.conversionActions.length)return(0,N.sprintf)(
/* translators: goal name */
(0,N._x)("%s doesn’t have any conversion actions","text","nelio-ab-testing"),P(e,t));for(var i=0;i<e.conversionActions.length;++i){var a=e.conversionActions[i],o=n[a.type];if(!o)return(0,N.sprintf)(
/* translators: goal name */
(0,N._x)("%s has one or more invalid conversion actions","text","nelio-ab-testing"),P(e,t));if(!(0,f.isEmpty)(null===(r=o.validate)||void 0===r?void 0:r.call(o,a.attributes)))return(0,N.sprintf)(
/* translators: goal name, as in “Goal 2” or “Default Goal” */
(0,N._x)("One or more conversion actions in %s are invalid","text","nelio-ab-testing"),P(e,t))}return!1}function P(e,t){var n=(0,N.sprintf)(
/* translators: goal id */
(0,N._x)("Goal %d","text","nelio-ab-testing"),t+1);return 0===t&&(n=(0,N._x)("Default Goal","text","nelio-ab-testing")),(0,u.trim)(e.attributes.name)&&(n=(0,N.sprintf)(
/* translators: goal name */
(0,N._x)("Goal “%s”","text","nelio-ab-testing"),(0,u.trim)(e.attributes.name))),n}function M(e,t,n){var r;if(!e.segmentationRules.length)return(0,N.sprintf)(
/* translators: segment name */
(0,N._x)("%s doesn’t have any segmentation rules","text","nelio-ab-testing"),G(e,t));for(var i=0;i<e.segmentationRules.length;++i){var a=e.segmentationRules[i],o=n[a.type];if(!o)return(0,N.sprintf)(
/* translators: segment name */
(0,N._x)("%s has one or more invalid segmentation rules","text","nelio-ab-testing"),G(e,t));if(!(0,f.isEmpty)(null===(r=o.validate)||void 0===r?void 0:r.call(o,a.attributes)))return(0,N.sprintf)(
/* translators: segment name, as in Segment 2” */
(0,N._x)("One or more segmentation rules in %s are invalid","text","nelio-ab-testing"),G(e,t))}return!1}function G(e,t){var n=(0,N.sprintf)(
/* translators: segment id */
(0,N._x)("Segment %d","text","nelio-ab-testing"),t+1);return(0,u.trim)(e.attributes.name)&&(n=(0,N.sprintf)(
/* translators: segment name */
(0,N._x)("Segment “%s”","text","nelio-ab-testing"),(0,u.trim)(e.attributes.name))),n}function L(e){var t=(0,s.useSelect)((function(t){return t(g).getExperimentAttribute(e)})),n=(0,s.useDispatch)(g).setExperimentData;return[t,function(t){var r;return n(((r={})[e]=t,r))}]}function B(e){return(0,s.useSelect)((function(t){return t(d.STORE_NAME).getPluginSetting(e)}))}var V=function(e){return(0,s.useSelect)((function(t){return t(d.STORE_NAME).isSubscribedTo(e)}))},U=function(){return U=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},U.apply(this,arguments)},j=function(){return F(),W(),null},F=function(){var e=q(),t=L("startDate")[0]||"",n=L("status"),r=n[0],i=n[1],a=(0,s.useDispatch)(g).setDraftStatusRationale,l=function(e,t){r.includes("paused")&&(e="draft"===e?"paused_draft":"paused"),i(e),a(null!=t?t:"")};(0,o.useEffect)((function(){"running"!==r&&(e?l("draft",e):"ready"!==r&&("scheduled"!==r||(0,R.isInTheFuture)(t)||l("ready"),"scheduled"!==r&&l("ready")))}),[e,t,r])},W=function(){var e=H(),t=L("type")[0],n=(0,u.find)(e,{id:"control"}),r=(0,s.useDispatch)(g).setTestedElementAsInvalid;(0,o.useEffect)((function(){var e;"running"!==status&&r(!!n&&(e=t,!!C(n.attributes,e)))}),[n,t])},q=function(){var e=(0,o.useState)(""),t=e[0],n=e[1],r=L("name")[0]||"",i=L("type")[0],a=H(),s=X(),l=Y(),c=$(),m=J();return(0,o.useEffect)((function(){var e=(0,u.find)(a,{id:"control"}),t=function(e,t,n){var r=e.control,i=e.alternatives,a=e.goals,o=e.segments,s=e.name,l=e.type;if(!s)return(0,N._x)("Test is unnamed","text","nelio-ab-testing");if(i.length<2)return(0,N._x)("Test doesn’t have any variants","text","nelio-ab-testing");var c=C(r.attributes,l);if(c)return c;var u=i.slice(1).reduce((function(e,t,n){return e||function(e,t,n){return(0,D.applyFilters)("nab.isAlternativeInvalid",!1,e,function(e){return String.fromCharCode("B".charCodeAt(0)+e)}(t),n)}(t.attributes,n,l)}),!1);if(u)return u;var m=function(e,t){if(!e.length)return(0,N._x)("Test doesn’t have any goals","text","nelio-ab-testing");for(var n=0;n<e.length;++n){var r=k(e[n],n,t);if(r)return r}return!1}(a,t);if(m)return m;var d=function(e,t){for(var n=0;n<e.length;++n){var r=M(e[n],n,t);if(r)return r}return!1}(o,n);return d||!1}({name:r,control:e,alternatives:a,goals:s,segments:l,type:i},c,m);n(t||"")}),[r,i,JSON.stringify(a),JSON.stringify(s),JSON.stringify(l)]),t},H=function(){return(0,s.useSelect)((function(e){return e(g).getAlternatives()}))},X=function(){return(0,s.useSelect)((function(e){var t=e(g),n=t.getGoals,r=t.getConversionActions;return(0,u.map)(n(),(function(e){return U(U({},e),{conversionActions:r(e.id)})}))}))},Y=function(){return(0,s.useSelect)((function(e){var t=e(g),n=t.getSegments,r=t.getSegmentationRules;return(0,u.map)(n(),(function(e){return U(U({},e),{segmentationRules:r(e.id)})}))}))},$=function(){return(0,s.useSelect)((function(e){return(0,u.keyBy)(e(T.STORE_NAME).getConversionActionTypes()||[],"name")}))},J=function(){return(0,s.useSelect)((function(e){return(0,u.keyBy)(e(O.STORE_NAME).getSegmentationRuleTypes()||[],"name")}))},z=window.nab.components,Q=window.nab.experiments,K=function(){var e=(0,o.useRef)(null),t=ee(),n=Z(),r=te(),i=L("status")[0],a=(i||"").includes("draft"),l=(i||"").includes("paused"),c=ne(),u=re(),m=ie(),d=(0,s.useDispatch)(g),p=d.saveExperiment,v=d.setExperimentData;return o.createElement("div",{ref:e,className:"nab-edit-experiment-header"},o.createElement("div",{className:"nab-edit-experiment-header__info"},o.createElement(t,{className:"nab-edit-experiment-header__experiment-icon"}),o.createElement("h1",{className:"nab-edit-experiment-header__title"},(0,N._x)("Edit Test","text","nelio-ab-testing")),o.createElement(z.SubscribeWithCouponButton,{className:"finished"===i?"nab-edit-experiment-header__right-promo-button":void 0})),o.createElement("div",{className:"nab-edit-experiment-header__settings"},c&&o.createElement("span",{className:"nab-edit-experiment-header__save-button nab-edit-experiment-header__save-button--is-saving"},o.createElement(w.Dashicon,{icon:"cloud"}),(0,N._x)("Saving…","text","nelio-ab-testing")),u&&"scheduled"!==i&&o.createElement("span",{className:"nab-edit-experiment-header__save-button nab-edit-experiment-header__save-button--has-been-saved"},o.createElement(w.Dashicon,{icon:"yes"}),(0,N._x)("Saved","text (experiment)","nelio-ab-testing")),!c&&!(u&&"scheduled"!==i)&&o.createElement(w.Button,{isTertiary:!0,className:"nab-edit-experiment-header__save-button",onClick:"scheduled"===i?function(){v({status:l?"paused":"ready"}),p()}:p},"scheduled"===i?(0,N._x)("Save as Ready","command (experiment)","nelio-ab-testing"):(0,N._x)("Save","command","nelio-ab-testing")),o.createElement("div",{className:"nab-edit-experiment-header__start-button"},o.createElement(z.Tooltip,{text:r,placement:"left",getTooltipContainer:e.current?function(){return e.current}:void 0},o.createElement("span",null,o.createElement(w.Button,{isPrimary:!0,disabled:a||c||u&&"scheduled"===i,onClick:m},n))))))},Z=function(){var e=L("startDate")[0],t=L("status")[0];return(t||"").includes("paused")?(0,N._x)("Resume…","command","nelio-ab-testing"):e&&(0,R.isInTheFuture)(e)?"scheduled"===t?(0,N._x)("Schedule","command","nelio-ab-testing"):(0,N._x)("Schedule…","command","nelio-ab-testing"):(0,N._x)("Start…","command","nelio-ab-testing")},ee=function(){return(0,s.useSelect)((function(e){var t,n=e(Q.STORE_NAME).getExperimentTypes,r=e(g).getExperimentType;return null===(t=n()[r()])||void 0===t?void 0:t.icon}))},te=function(){return(0,s.useSelect)((function(e){return e(g).getDraftStatusRationale()}))},ne=function(){return(0,s.useSelect)((function(e){return e(g).isExperimentBeingSaved()}))},re=function(){return(0,s.useSelect)((function(e){return e(g).hasExperimentBeenRecentlySaved()}))},ie=function(){var e=L("status")[0],t=L("startDate")[0],n=(e||"").includes("paused"),r=(0,s.useDispatch)(g),i=r.resumeExperiment,a=r.setExperimentData,o=r.saveExperiment,l=r.startExperiment;return function(){n?i():t&&(0,R.isInTheFuture)(t)?(a({status:"scheduled"}),o()):l()}},ae=window.wp.blockEditor,oe=function(){var e=L("name"),t=e[0],n=e[1];return o.createElement("div",{className:"nab-experiment-title"},o.createElement(ae.PlainText,{value:t,className:"nab-experiment-title__edit",placeholder:(0,N._x)("Name your test…","user","nelio-ab-testing"),onChange:n}))},se=window.React;function le(e){return e.startsWith("{{/")?{type:"componentClose",value:e.replace(/\W/g,"")}:e.endsWith("/}}")?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.startsWith("{{")?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}function ce(e,t){let n,r,i=[];for(let a=0;a<e.length;a++){const o=e[a];if("string"!==o.type){if(void 0===t[o.value])throw new Error(`Invalid interpolation, missing component node: \`${o.value}\``);if("object"!=typeof t[o.value])throw new Error(`Invalid interpolation, component node must be a ReactElement or null: \`${o.value}\``);if("componentClose"===o.type)throw new Error(`Missing opening component token: \`${o.value}\``);if("componentOpen"===o.type){n=t[o.value],r=a;break}i.push(t[o.value])}else i.push(o.value)}if(n){const a=function(e,t){const n=t[e];let r=0;for(let i=e+1;i<t.length;i++){const e=t[i];if(e.value===n.value){if("componentOpen"===e.type){r++;continue}if("componentClose"===e.type){if(0===r)return i;r--}}}throw new Error("Missing closing component token `"+n.value+"`")}(r,e),o=ce(e.slice(r+1,a),t),s=(0,se.cloneElement)(n,{},o);if(i.push(s),a<e.length-1){const n=ce(e.slice(a+1),t);i=i.concat(n)}}return i=i.filter(Boolean),0===i.length?null:1===i.length?i[0]:(0,se.createElement)(se.Fragment,null,...i)}function ue(e){const{mixedString:t,components:n,throwErrors:r}=e;if(!n)return t;if("object"!=typeof n){if(r)throw new Error(`Interpolation Error: unable to process \`${t}\` because components is not an object`);return t}const i=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(le)}(t);try{return ce(i,n)}catch(e){if(r)throw new Error(`Interpolation Error: unable to process \`${t}\` because of error \`${e.message}\``);return t}}var me,de=function(e){var t,n=e.readOnly,r=e.action,i=e.goalId,a=pe(),s=ve(),l=fe(),c=ge(r.type),u=null==c?void 0:c.view,m=null==c?void 0:c.edit,d=null==c?void 0:c.icon,p=(null==r?void 0:r.attributes)||{},v=(null!==(t=null==c?void 0:c.validate)&&void 0!==t?t:function(){return{}})(p),g=(0,o.useState)(!(0,f.isEmpty)(v))[0],b=be(i,r.id),E=Ee(i,r.id);return n?o.createElement("div",{className:"nab-conversion-action"},o.createElement("div",{className:"nab-conversion-action__view"},d?o.createElement(d,{className:"nab-conversion-action__icon"}):o.createElement(w.Dashicon,{className:"nab-conversion-action__icon nab-conversion-action__icon--invalid",icon:"warning"}),o.createElement("div",{className:"nab-conversion-action__actual-view"},u?o.createElement(u,{attributes:p,experimentId:a,goal:s.attributes,goalId:i,goalIndex:l}):o.createElement("span",null,(0,N._x)("Invalid conversion action.","text","nelio-ab-testing"))))):o.createElement(w.PanelBody,{className:"nab-conversion-action",initialOpen:g,title:o.createElement("div",{className:"nab-conversion-action__view"},d?o.createElement(d,{className:"nab-conversion-action__icon"}):o.createElement(w.Dashicon,{className:"nab-conversion-action__icon nab-conversion-action__icon--invalid",icon:"warning"}),o.createElement("div",{className:"nab-conversion-action__actual-view"},u?o.createElement(u,{attributes:p,experimentId:a,goal:s.attributes,goalId:i,goalIndex:l}):o.createElement("span",null,(0,N._x)("Invalid conversion action.","text","nelio-ab-testing"))))},o.createElement("div",{className:"nab-conversion-action__edit"},m?o.createElement(m,{attributes:p,experimentId:a,goal:s.attributes,goalId:i,goalIndex:l,setAttributes:b,errors:v}):o.createElement("span",null,(0,N._x)("This conversion action can’t be properly loaded. Please consider removing it.","text","nelio-ab-testing"))),o.createElement(w.Button,{isLink:!0,isDestructive:!0,onClick:E,className:"nab-conversion-action__delete-button"},(0,N._x)("Delete","command","neli-ab-testing")))},pe=function(){return(0,s.useSelect)((function(e){return e(g).getExperimentId()}))},ve=function(){return(0,s.useSelect)((function(e){return e(g).getActiveGoal()}))},fe=function(){return(0,s.useSelect)((function(e){return e(g).getActiveGoalIndex()}))},ge=function(e){return(0,s.useSelect)((function(t){return t(T.STORE_NAME).getConversionActionType(e)}))},be=function(e,t){var n=(0,s.useDispatch)(g).updateConversionAction;return e&&t?function(r){return n(e,t,r)}:u.noop},Ee=function(e,t){var n=(0,s.useDispatch)(g).removeConversionActionsFromGoal;return e&&t?function(){return n(e,t)}:u.noop},_e=function(){var e=xe(),t=he(e);return ye(),o.createElement("div",{className:"nab-conversion-action-list nab-conversion-action-list--automatic"},1===t.length?o.createElement("p",{key:"conversion-action-explanation",className:"nab-conversion-action-list__help"},(0,N._x)("Split tests are usually run with some specific goals in mind. In this type of test, there’s a new conversion when the following conversion action occurs after the visitor has seen the tested element:","text","nelio-ab-testing")):o.createElement("p",{key:"conversion-action-explanation",className:"nab-conversion-action-list__help"},(0,N._x)("Split tests are usually run with some specific goals in mind. In this type of test, there’s a new conversion when at least one of the following conversion actions occurs after the visitor has seen the tested element:","text","nelio-ab-testing")),t.map((function(t){return o.createElement(de,{key:t.id,goalId:e,action:t,readOnly:!0})})))},xe=function(){return(0,s.useSelect)((function(e){var t;return null===(t=e(g).getActiveGoal())||void 0===t?void 0:t.id}))},he=function(e){return(0,s.useSelect)((function(t){return e&&(0,t(g).getConversionActions)(e)||[]}))},ye=function(){var e=(0,s.useDispatch)(g).replaceConversionActionsInGoal,t=xe(),n=(0,s.useSelect)((function(e){return e(g).getAlternative("control")})),r=(0,s.useSelect)((function(e){var t=e(g).getExperimentType;return(0,e(Q.STORE_NAME).getExperimentSupport)(t(),"automaticGoalSetup")}));(0,o.useEffect)((function(){if(t&&r){var i=r(n.attributes);e(t,i)}}),[r,t,n])},Se=function(){var e=Ae(),t=we(e);return o.createElement("div",{className:"nab-conversion-action-list"},!!t.length&&o.createElement("p",{key:"conversion-action-explanation-1"},(0,N._x)("After a visitor has seen the tested element, there’s a new conversion every time one of the following conversion actions occurs:","text","nelio-ab-testing")),t.map((function(t){return o.createElement(de,{key:t.id,goalId:e,action:t})})),!t.length&&[o.createElement("p",{key:"conversion-action-explanation-1",className:"nab-conversion-action-list__help"},(0,N._x)("Split tests are usually run with some specific goals in mind, such as “getting more subscribers” or “showing interest in your products.” Goals are fulfilled when the visitor performs certain actions. For instance, a visitor might be “showing interest in your products” when they visit your pricing page or they submit a certain form in your website.","text","nelio-ab-testing")),o.createElement("p",{key:"conversion-action-explanation-2",className:"nab-conversion-action-list__help"},ue({mixedString:(0,N._x)("Use the buttons below to {{strong}}add the specific conversion actions{{/strong}} that fulfill this goal.","user","nelio-ab-testing"),components:{strong:o.createElement("strong",null)}}))])},Ae=function(){return(0,s.useSelect)((function(e){var t;return null===(t=e(g).getActiveGoal())||void 0===t?void 0:t.id}))},we=function(e){return(0,s.useSelect)((function(t){return e&&(0,t(g).getConversionActions)(e)||[]}))},Ne=function(){var e=!!B("subscription"),t=Ie(),n=!!Re(t).length,r=Te(),i=(0,s.useDispatch)(g).addConversionActionsIntoGoal;return!e&&n?o.createElement("div",{className:"nab-conversion-action-type-list"},o.createElement(w.ExternalLink,{className:"components-button is-secondary",href:(0,f.addFreeTracker)((0,N._x)("https://neliosoftware.com/testing/pricing/","text","nelio-ab-testing"))},(0,N._x)("Subscribe to Track More Actions","user","nelio-ab-testing"))):o.createElement("ul",{className:"nab-conversion-action-type-list"},r&&r.map((function(e){var n=e.icon;return o.createElement(w.Tooltip,{key:e.name,text:e.title,position:"top center"},o.createElement("li",{key:e.name,className:"nab-conversion-action-type-list__item"},o.createElement(w.Button,{isSecondary:!0,className:"nab-conversion-action-type-list__new-action-button",onClick:function(){return function(e){var n=(0,T.createConversionAction)(e);n&&i(t,n)}(e.name)}},o.createElement(n,null))))})))},Ie=function(){return(0,s.useSelect)((function(e){var t;return null===(t=e(g).getActiveGoal())||void 0===t?void 0:t.id}))},Te=function(){var e=Ie(),t=Re(e);return(0,s.useSelect)((function(e){var n=e(T.STORE_NAME).getConversionActionTypes,r=(0,u.filter)(n(),(function(t){return!t.isActive||t.isActive(e)})),i=(0,u.find)(r,{name:"nab/wc-order"});return i&&t.length?(0,u.every)(t,{type:"nab/wc-order"})?[i]:(0,u.without)(r,i):r}))},Re=function(e){return(0,s.useSelect)((function(t){return e&&t(g).getConversionActions(e)||[]}))},Oe=function(){var e=De(),t=Ce(),n=t[0],r=t[1],i=Pe(),a=ke(),s=a[0],l=a[1];return e?o.createElement("div",{className:"nab-woocommerce-goal-settings"},o.createElement("p",null,o.createElement("strong",null,(0,N._x)("WooCommerce Goal Settings","text","nelio-ab-testing"))),o.createElement(w.SelectControl,{label:(0,N._x)("Order status required for conversions:","command","nelio-ab-testing"),options:i,value:s,onChange:l}),o.createElement(w.CheckboxControl,{label:(0,N._x)("Track revenue and show in test results","command","nelio-ab-testing"),checked:n,onChange:r})):null},De=function(){return(0,s.useSelect)((function(e){var t,n=e(g).getActiveGoal,r=(0,e(g).getConversionActions)(null===(t=n())||void 0===t?void 0:t.id);return r.length&&r.every((function(e){return"nab/wc-order"===e.type}))}))},Ce=function(){var e,t=Me(),n=null===(e=t.attributes.useOrderRevenue)||void 0===e||e,r=(0,s.useDispatch)(g).updateGoal;return[n,function(){return r(t.id,{useOrderRevenue:!n})}]},ke=function(){var e,t=Me(),n=null!==(e=t.attributes.orderStatusForConversion)&&void 0!==e?e:"wc-completed",r=(0,s.useDispatch)(g).updateGoal;return[n,function(e){return r(t.id,{orderStatusForConversion:e})}]},Pe=function(){return(0,s.useSelect)((function(e){return e(d.STORE_NAME).getWooCommerceSetting("orderStatuses")}))},Me=function(){return(0,s.useSelect)((function(e){return e(g).getActiveGoal()}))},Ge=function(e){var t=e.name,n=e.setName,r=e.removeGoal,i=e.isAutomatic;return o.createElement("div",{className:"nab-current-goal-info"},!i&&o.createElement("div",{className:"nab-current-goal-info__header"},o.createElement(w.TextControl,{placeholder:(0,N._x)("Name your goal…","user","nelio-ab-testing"),value:t,onChange:function(e){return n(e)}}),!!r&&o.createElement(w.Button,{isTertiary:!0,isDestructive:!0,className:"nab-current-goal-info__delete-button",onClick:r},(0,N._x)("Delete","command (goal)","nelio-ab-testing"))),o.createElement(Oe,null),i?o.createElement(_e,null):o.createElement(o.Fragment,null,o.createElement(Se,null),o.createElement(Ne,null)))},Le=n(4184),Be=n.n(Le),Ve=function(e){var t=e.single,n=Ue(),r=je(),i=Fe(),a=!!B("subscription"),l=(0,s.useDispatch)(g),c=l.setActiveGoal,m=l.addGoals;return o.createElement("ul",{className:"nab-goal-list"},r.map((function(e,t){return o.createElement("li",{key:e.id,className:Be()("nab-goal-list__item",{"nab-goal-list__item--is-active":e.id===n})},o.createElement(w.Button,{disabled:e.id===n,onClick:function(){return c(e.id)}},(0,u.trim)(e.attributes.name)||function(e){return e?(0,N.sprintf)(
/* translators: a number */
(0,N._x)("Goal %d","text","nelio-ab-testing"),e+1):(0,N._x)("Default Goal","text","nelio-ab-testing")}(t)))})),!t&&!i&&a&&o.createElement("li",{className:"nab-goal-list__add-new-goal",key:"add-new-goal"},o.createElement(w.Button,{className:"nab-goal-list__add-new-goal-button",isLink:!0,onClick:function(){var e=(0,f.createGoal)();m(e),c(e.id)}},o.createElement(w.Dashicon,{icon:"plus"}),o.createElement("span",null,(0,N._x)("New","command (goal)","nelio-ab-testing")))))},Ue=function(){return(0,s.useSelect)((function(e){var t;return null===(t=e(g).getActiveGoal())||void 0===t?void 0:t.id}))},je=function(){return(0,s.useSelect)((function(e){return e(g).getGoals()}))},Fe=function(){return(L("status")[0]||"").includes("paused")},We=function(){return We=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},We.apply(this,arguments)},qe=function(){var e=He()||{},t=Xe(),n=Ye(),r=t.length,i=$e(),a=(0,s.useDispatch)(g),l=a.removeGoals,c=a.setActiveGoal,m=a.updateGoal,d=1<r&&!n;return o.createElement("div",{className:"nab-edit-experiment__goal-section"},o.createElement("h2",null,ue({mixedString:(0,N.sprintf)(
/* translators: dashicon */
(0,N._x)("%s Conversion Goals and Actions","text","nelio-ab-testing"),"{{icon}}{{/icon}}"),components:{icon:o.createElement(w.Dashicon,{className:"nab-goal-section__title-icon",icon:"flag"})}})),o.createElement("div",{className:"nab-edit-experiment-goal-section__content"},o.createElement(Ve,{single:i}),o.createElement(Ge,{name:e.attributes.name,setName:function(t){return n=We(We({},e.attributes),{name:t}),e.id&&m(e.id,n);var n},removeGoal:d?function(){var n=function(e,t){var n=(0,u.findIndex)(e,{id:t});return n===e.length-1?e[n-1]:e[n+1]}(t,e.id);c(n.id),l(e.id)}:void 0,isAutomatic:i})))},He=function(){return(0,s.useSelect)((function(e){return e(g).getActiveGoal()}))},Xe=function(){return(0,s.useSelect)((function(e){return e(g).getGoals()}))},Ye=function(){return(L("status")[0]||"").includes("paused")},$e=function(){return(0,s.useSelect)((function(e){var t=e(g).getExperimentType;return(0,e(Q.STORE_NAME).hasExperimentSupport)(t(),"automaticGoalSetup")}))},Je=function(e){var t,n=e.readOnly,r=e.rule,i=e.segmentId,a=ze(),s=Qe(),l=Ke(r.type),c=null==l?void 0:l.view,u=null==l?void 0:l.edit,m=null==l?void 0:l.icon,d=(null==r?void 0:r.attributes)||{},p=(null!==(t=null==l?void 0:l.validate)&&void 0!==t?t:function(){return{}})(d),v=(0,o.useState)(!(0,f.isEmpty)(p))[0],g=Ze(i,r.id),b=et(i,r.id);return n?o.createElement("div",{className:"nab-segmentation-rule"},o.createElement("div",{className:"nab-segmentation-rule__view"},m?o.createElement(m,{className:"nab-segmentation-rule__icon"}):o.createElement(w.Dashicon,{className:"nab-segmentation-rule__icon nab-segmentation-rule__icon--invalid",icon:"warning"}),o.createElement("div",{className:"nab-segmentation-rule__actual-view"},c?o.createElement(c,{attributes:d,experimentId:a,segmentId:i,segmentIndex:s}):o.createElement("span",null,(0,N._x)("Invalid segmentation rule.","text","nelio-ab-testing"))))):o.createElement(w.PanelBody,{className:"nab-segmentation-rule",initialOpen:v,title:o.createElement("div",{className:"nab-segmentation-rule__view"},m?o.createElement(m,{className:"nab-segmentation-rule__icon"}):o.createElement(w.Dashicon,{className:"nab-segmentation-rule__icon nab-segmentation-rule__icon--invalid",icon:"warning"}),o.createElement("div",{className:"nab-segmentation-rule__actual-view"},c?o.createElement(c,{attributes:d,experimentId:a,segmentId:i,segmentIndex:s}):o.createElement("span",null,(0,N._x)("Invalid segmentation rule.","text","nelio-ab-testing"))))},o.createElement("div",{className:"nab-segmentation-rule__edit"},u?o.createElement(u,{attributes:d,experimentId:a,segmentId:i,segmentIndex:s,setAttributes:g,errors:p}):o.createElement("span",null,(0,N._x)("This segmentation rule can’t be properly loaded. Please consider removing it.","text","nelio-ab-testing"))),o.createElement(w.Button,{isLink:!0,isDestructive:!0,onClick:b,className:"nab-segmentation-rule__delete-button"},(0,N._x)("Delete","command","neli-ab-testing")))},ze=function(){return(0,s.useSelect)((function(e){return e(g).getExperimentId()}))},Qe=function(){return(0,s.useSelect)((function(e){return e(g).getActiveSegmentIndex()}))},Ke=function(e){return(0,s.useSelect)((function(t){return t(O.STORE_NAME).getSegmentationRuleType(e)}))},Ze=function(e,t){var n=(0,s.useDispatch)(g).updateSegmentationRule;return e&&t?function(r){return n(e,t,r)}:u.noop},et=function(e,t){var n=(0,s.useDispatch)(g).removeSegmentationRulesFromSegment;return e&&t?function(){return n(e,t)}:u.noop},tt=function(){var e=nt(),t=rt();return e?o.createElement("div",{className:"nab-segmentation-rule-list"},!!t.length&&o.createElement("p",{key:"segmentation-rule-explanation-1"},(0,N._x)("A visitor participates in the test every time all of the following segmentation rules match:","text","nelio-ab-testing")),t.map((function(t){return o.createElement(Je,{key:t.id,segmentId:e,rule:t})})),!t.length&&[o.createElement("p",{key:"segmentation-rule-explanation-1",className:"nab-segmentation-rule-list__help"},(0,N._x)("Split tests are usually applied to all visitors. But you can narrow your audience using segmentation rules to target only a subset of your visitors.","text","nelio-ab-testing")),o.createElement("p",{key:"segmentation-rule-explanation-2",className:"nab-segmentation-rule-list__help"},ue({mixedString:(0,N._x)("Use the buttons below to {{strong}}add the specific segmentation rules{{/strong}} for this segment.","user","nelio-ab-testing"),components:{strong:o.createElement("strong",null)}}))]):null},nt=function(){return(0,s.useSelect)((function(e){var t;return null===(t=e(g).getActiveSegment())||void 0===t?void 0:t.id}))},rt=function(){var e=nt();return(0,s.useSelect)((function(t){return e&&(0,t(g).getSegmentationRules)(e)||[]}))},it=function(e){var t=e.category,n=at(t.name),r=ot(),i=lt(),a=t.icon;return n.length?o.createElement("li",{key:t.name,className:"nab-segmentation-rule-type-category"},o.createElement(w.DropdownMenu,{icon:o.createElement(a,null),className:"nab-segmentation-rule-type-category__item",label:t.title,controls:n.map((function(e){var t=e.name,n=e.title,a=e.icon;return{title:n,icon:o.createElement(a,null),isDisabled:r.some((function(e){return e.type===t})),onClick:function(){return i(t)}}})),toggleProps:{className:"nab-segmentation-rule-type-category__toggle",disabled:n.every((function(e){return r.some((function(t){return t.type===e.name}))}))},menuProps:{className:"nab-segmentation-rule-type-category__menu"}})):null},at=function(e){return(0,s.useSelect)((function(t){return(t(O.STORE_NAME).getSegmentationRuleTypes()||[]).filter((function(t){return t.category===e}))}))},ot=function(){var e=st();return(0,s.useSelect)((function(t){var n=t(g).getSegmentationRules;return(null==e?void 0:e.id)&&n(e.id)||[]}))},st=function(){return(0,s.useSelect)((function(e){return e(g).getActiveSegment()}))},lt=function(){var e=(0,s.useDispatch)(g).addSegmentationRulesIntoSegment,t=st();return function(n){if(t){var r=(0,O.createSegmentationRule)(n);r&&e(t.id,r)}}},ct=function(){var e=ut();return B("subscription")?o.createElement("ul",{className:"nab-segmentation-rule-type-category-list"},e.map((function(e){return o.createElement(it,{key:e.name,category:e})}))):o.createElement("div",{className:"nab-segmentation-rule-type-list"},o.createElement(w.ExternalLink,{className:"components-button is-secondary",href:(0,f.addFreeTracker)((0,N._x)("https://neliosoftware.com/testing/pricing/","text","nelio-ab-testing"))},(0,N._x)("Subscribe to Use Segmentation Rules","user","nelio-ab-testing")))},ut=function(){return(0,s.useSelect)((function(e){return e(O.STORE_NAME).getSegmentationRuleTypeCategories()||[]}))},mt=function(e){var t=e.name,n=e.setName,r=e.removeSegment;return o.createElement("div",{className:"nab-current-segment-info"},o.createElement("div",{className:"nab-current-segment-info__header"},o.createElement(w.TextControl,{placeholder:(0,N._x)("Name your segment…","user","nelio-ab-testing"),value:t,onChange:function(e){return n(e)}}),!!r&&o.createElement(w.Button,{isTertiary:!0,isDestructive:!0,className:"nab-current-segment-info__delete-button",onClick:r},(0,N._x)("Delete","command (segment)","nelio-ab-testing"))),o.createElement(o.Fragment,null,o.createElement(tt,null),o.createElement(ct,null)))},dt=function(){var e=pt(),t=vt(),n=ft(),r=!!B("subscription"),i=(0,s.useDispatch)(g),a=i.setActiveSegment,l=i.addSegments;return o.createElement("ul",{className:"nab-segment-list"},t.map((function(t,n){return o.createElement("li",{key:t.id,className:Be()("nab-segment-list__item",{"nab-segment-list__item--is-active":t.id===e})},o.createElement(w.Button,{disabled:t.id===e,onClick:function(){return a(t.id)}},(0,u.trim)(t.attributes.name)||gt(n)))})),!n&&r&&o.createElement("li",{className:"nab-segment-list__add-new-segment",key:"add-new-segment"},o.createElement(w.Button,{className:"nab-segment-list__add-new-segment-button",isLink:!0,onClick:function(){var e=(0,f.createSegment)();l(e),a(e.id)}},o.createElement(w.Dashicon,{icon:"plus"}),o.createElement("span",null,(0,N._x)("New","command (segment)","nelio-ab-testing")))))},pt=function(){return(0,s.useSelect)((function(e){var t;return null===(t=e(g).getActiveSegment())||void 0===t?void 0:t.id}))},vt=function(){return(0,s.useSelect)((function(e){return e(g).getSegments()||[]}))},ft=function(){return L("status")[0].includes("paused")},gt=function(e){return(0,N.sprintf)(
/* translators: a number */
(0,N._x)("Segment %d","text","nelio-ab-testing"),e+1)},bt=function(){return bt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},bt.apply(this,arguments)},Et=function(){var e=_t(),t=e[0],n=e[1],r=L("status")[0],i=!!B("subscription"),a=(r||"").includes("paused"),s=xt(),l=!a;return o.createElement("div",{className:"nab-edit-experiment__segmentation-section"},o.createElement("h2",null,ue({mixedString:(0,N.sprintf)(
/* translators: dashicon */
(0,N._x)("%s Segmentation","text","nelio-ab-testing"),"{{icon}}{{/icon}}"),components:{icon:o.createElement(w.Dashicon,{className:"nab-segmentation-section__title-icon",icon:"groups"})}})),!!i&&o.createElement("div",{className:"nab-edit-experiment-segmentation-section__content"},o.createElement(dt,null),t?o.createElement(mt,{name:t.attributes.name,setName:function(e){return n(bt(bt({},t.attributes),{name:e}))},removeSegment:l?s:void 0}):o.createElement("p",{className:"nab-edit-experiment-segmentation-section__content--empty"},(0,N._x)("Add a new segment to narrow your tested audience and target only a subset of your visitors.","user","nelio-ab-testing"))),!i&&o.createElement("div",{className:"nab-edit-experiment-segmentation-section__content nab-edit-experiment-segmentation-section__content--free"},o.createElement("p",null,(0,N._x)("All your visitors participate in this test. Segmentation allows you to narrow your tested audience and target only a subset of your visitors.","user","nelio-ab-testing")),o.createElement("div",{className:"nab-edit-experiment-segmentation-section__content-action"},o.createElement(w.ExternalLink,{className:"components-button is-secondary",href:(0,f.addFreeTracker)((0,N._x)("https://neliosoftware.com/testing/pricing/","text","nelio-ab-testing"))},(0,N._x)("Subscribe to Unlock Segmentation","user","nelio-ab-testing")))))},_t=function(){var e=(0,s.useSelect)((function(e){return e(g).getActiveSegment()})),t=(0,s.useDispatch)(g).updateSegment;return[e,function(n){(null==e?void 0:e.id)&&t(e.id,n)}]},xt=function(){var e=_t()[0],t=(0,s.useSelect)((function(e){return e(g).getSegments()})),n=(0,s.useDispatch)(g),r=n.removeSegments,i=n.setActiveSegment;return e?function(){var n=function(e,t){var n=(0,u.findIndex)(e,{id:t});return e[n+1]||e[n-1]||!1}(t,e.id);n&&i(n.id),r(e.id)}:function(){return null}},ht=function(){var e=L("status")[0];return o.createElement(w.PanelRow,{className:"nab-experiment-management__status"},o.createElement("span",null,(0,N._x)("Status","text","nelio-ab-testing")),o.createElement("strong",{className:"nab-experiment-management__status-value"},function(e){switch(e){case"draft":return(0,N._x)("Draft","text (experiment status)","nelio-ab-testing");case"ready":return(0,N._x)("Ready","text (experiment status)","nelio-ab-testing");case"scheduled":return(0,N._x)("Scheduled","text (experiment status)","nelio-ab-testing");case"paused":return(0,N._x)("Paused","text (experiment status)","nelio-ab-testing");case"paused_draft":return(0,N._x)("Paused Draft","text (experiment status)","nelio-ab-testing");case"running":case"finished":case"trash":return"-"}}(e)))},yt=function(){var e=L("startDate"),t=e[0],n=e[1],r=V("professional"),i=St();return o.createElement(w.PanelRow,{className:"nab-experiment-start-schedule"},o.createElement("span",null,(0,N._x)("Start","text","nelio-ab-testing")),o.createElement("span",null,!!i&&o.createElement("span",{className:"nab-experiment-start-schedule__date"},(0,R.formatI18nDatetime)(t)),!i&&!r&&o.createElement("span",{className:"nab-experiment-start-schedule__date"},(0,N._x)("Immediately","text","nelio-ab-testing")),!i&&!!r&&o.createElement(z.DateTimePicker,{className:"nab-experiment-start-schedule__date",date:t,onChange:n,noDateLabel:(0,N._x)("Immediately","text","nelio-ab-testing"),readonly:!0})))},St=function(){return L("status")[0].includes("paused")},At=window.wp.compose,wt=window.nab.i18n,Nt=function(){var e=(0,At.useInstanceId)(Nt),t=V("professional"),n=L("endMode")[0],r=L("endValue")[0],i=It(),a=Rt[n],l=(0,s.useDispatch)(g).setExperimentData,c=function(e,t){return l({endMode:e,endValue:t})};return t?o.createElement(w.PanelRow,{className:"nab-experiment-end-schedule"},o.createElement("span",null,(0,N._x)("End","text","nelio-ab-testing")),o.createElement(w.Dropdown,{position:"bottom right",contentClassName:"nab-experiment-end-schedule__dropdown",renderToggle:function(t){var i=t.onToggle,a=t.isOpen;return o.createElement(o.Fragment,null,o.createElement("label",{className:"nab-experiment-end-schedule__value screen-reader-text",htmlFor:"nab-experiment-end-schedule__toggle-".concat(e)},(0,N._x)("Click to change","command","nelio-ab-testing")),o.createElement(w.Button,{id:"nab-experiment-end-schedule__toggle-".concat(e),type:"button",className:"nab-experiment-end-schedule__toggle",onClick:i,"aria-expanded":a,"aria-live":"polite",isLink:!0},function(e,t){switch(e){case"duration":return(0,N.sprintf)(
/* translators: number of days */
(0,N._n)("After %d day","After %d days",t,"nelio-ab-testing"),t);case"page-views":return(0,N.sprintf)(
/* translators: a number */
(0,N._n)("After %s page view","After %s page views",t,"nelio-ab-testing"),(0,wt.numberFormat)(t));case"confidence":return(0,N.sprintf)(
/* translators: a percentage number, such as “95” */
(0,N._x)("At %1$s%% confidence","text","nelio-ab-testing"),(0,wt.numberFormat)(t));case"manual":return(0,N._x)("Manual","text","nelio-ab-testing")}}(n,r)))},renderContent:function(){return o.createElement(o.Fragment,null,o.createElement(w.SelectControl,{label:(0,N._x)("End Mode","text","nelio-ab-testing"),value:n,onChange:function(e){return c(e,function(e){switch(e){case"duration":return 5;case"page-views":return 5e3;case"confidence":return 97;case"manual":return 0}}(e))},options:Tt.filter((function(e){return"confidence"!==e.value||"nab/heatmap"!==i}))}),!!a&&o.createElement(w.SelectControl,{label:(0,N._x)("Value","text","nelio-ab-testing"),onChange:function(e){return c(n,Number.parseInt(e)||0)},value:"".concat(r),options:a}))}})):o.createElement(w.PanelRow,{className:"nab-experiment-end-schedule"},o.createElement("span",null,(0,N._x)("End","text","nelio-ab-testing")),o.createElement("span",null,(0,N._x)("Manual","text","nelio-ab-testing")))},It=function(){return(0,s.useSelect)((function(e){return e(g).getExperimentType()}))},Tt=[{value:"manual",label:(0,N._x)("Manual","text","nelio-ab-testing")},{value:"duration",label:(0,N._x)("Duration","text","nelio-ab-testing")},{value:"page-views",label:(0,N._x)("Page Views","text","nelio-ab-testing")},{value:"confidence",label:(0,N._x)("Confidence","text","nelio-ab-testing")}],Rt={manual:[],confidence:[95,96,97,98,99].map((function(e){return{value:"".concat(e),label:(0,N.sprintf)(
/* translators: a percentage number, such as “95” */
(0,N._x)("%1$s%%","text","nelio-ab-testing"),(0,wt.numberFormat)(e))}})),duration:[5,7,15,30,60,90].map((function(e){return{value:"".concat(e),label:(0,N.sprintf)(
/* translators: number of days */
(0,N._n)("%d day","%d days",e,"nelio-ab-testing"),e)}})),"page-views":[2500,5e3,1e4,2e4,5e4,1e5].map((function(e){return{value:"".concat(e),label:(0,wt.numberFormat)(e)}}))},Ot=function(){var e=(0,s.useDispatch)(g).moveToTrash;return o.createElement(w.PanelBody,{className:"nab-experiment-management",title:(0,N._x)("Status & Management","text (experiment)","nelio-ab-testing")},o.createElement(ht,null),o.createElement(yt,null),o.createElement(Nt,null),o.createElement(w.PanelRow,{className:"nab-experiment-management__trash"},o.createElement(w.Button,{isTertiary:!0,isDestructive:!0,onClick:e},(0,N._x)("Move to Trash","command (experiment)","nelio-ab-testing"))))},Dt=function(){var e=L("description"),t=e[0],n=e[1];return o.createElement(w.PanelBody,{className:"nab-experiment-description",title:(0,N._x)("Description","text","nelio-ab-testing")},o.createElement(w.TextareaControl,{label:(0,N._x)("Describe your test (optional)","user","nelio-ab-testing"),className:"nab-experiment-description__textarea",value:t,onChange:n}))},Ct=function(e){var t=e.rules,n=e.scopeSupport,r=(0,o.useState)("partial"),i=r[0],a=r[1],l=(0,o.useState)(""),c=l[0],m=l[1],d=(0,s.useDispatch)(g).addScopeRules,p=c&&(0,f.isUrlFragmentInvalid)(c)||"";return o.createElement("div",{className:"nab-experiment-scope__new-rule-form"},o.createElement(w.SelectControl,{className:"nab-experiment-scope__new-rule-mode",label:(0,N._x)("Select URL matching mode","user","nelio-ab-testing"),value:i,options:kt,onChange:function(e){return a(e)}}),o.createElement(w.TextControl,{className:"nab-experiment-scope__new-rule-value",label:(0,N._x)("Write a URL","user","nelio-ab-testing"),value:c,onChange:m}),o.createElement(z.ErrorText,{value:p}),o.createElement(w.PanelRow,{className:"nab-experiment-scope__add-rule-action-container"},o.createElement(w.Button,{isSecondary:!0,onClick:function(){m(""),"custom-with-tested-post"!==n||t.length?d([(0,f.createScopeRule)({type:i,value:c})]):d([(0,f.createScopeRule)({type:"tested-post"}),(0,f.createScopeRule)({type:i,value:c})])},disabled:(0,f.isEmpty)((0,u.trim)(c)),className:"nab-experiment-scope__add-rule-action"},(0,N._x)("Add","command","nelio-ab-testing"))))},kt=[{value:"partial",label:(0,N._x)("URL contains the expected value","text","nelio-ab-testing")},{value:"exact",label:(0,N._x)("URL exactly matches the expected value","text","nelio-ab-testing")}],Pt=function(e){var t=e.rules,n=e.scopeSupport,r=(0,s.useDispatch)(g).removeScopeRules;return t.length?o.createElement(o.Fragment,null,o.createElement("p",null,"custom-with-tested-post"===n?(0,N._x)("Variants will be visible only on pages matching the following criteria, as well as on the tested element’s page.","text","nelio-ab-testing"):(0,N._x)("Variants will be visible only on pages matching the following criteria:","text","nelio-ab-testing")),o.createElement("ul",{className:"nab-experiment-scope__rule-list"},t.filter(Mt).map((function(e){var i=e.id,a=e.attributes,s=a.value,l=a.type;return o.createElement("li",{key:i,className:"nab-experiment-scope__rule-list-item"},o.createElement("span",{className:"nab-experiment-scope__active-rule-type"},"exact"===l&&(0,N._x)("URL is:","text","nelio-ab-testing"),"partial"===l&&(0,N._x)("URL contains:","text","nelio-ab-testing")),o.createElement("input",{type:"text",className:"nab-experiment-scope__active-rule-value",value:s,readOnly:!0}),o.createElement(w.Button,{isLink:!0,isDestructive:!0,className:"nab-experiment-scope__remove-rule-action",onClick:function(){return function(e){"custom-with-tested-post"===n&&2===t.length?r((0,u.map)(t,"id")):r(e)}(i)}},(0,N._x)("Delete","command","nelio-ab-testing")))})))):o.createElement("p",null,"custom-with-tested-post"===n?(0,N._x)("Variants will be visible on all the pages of your website, including that of the tested element.","user","nelio-ab-testing"):(0,N._x)("Variants will be visible on all the pages of your website.","user","nelio-ab-testing")," ",(0,N._x)("If you wish to limit its scope to certain pages only, use the following form to define the URLs in which the test should run.","user","nelio-ab-testing"))},Mt=function(e){return"exact"===e.attributes.type||"partial"===e.attributes.type},Gt=function(e){var t=e.rules,n=Lt(t);return o.createElement(o.Fragment,null,t.length?o.createElement("p",null,(0,N._x)("Variants will be visible only on the tested element’s page.","text","nelio-ab-testing")):o.createElement("p",null,(0,N._x)("Variants will be visible on the tested element’s page. All other pages will also show the appropriate variant of this test whenever the tested element appears on them.","text","nelio-ab-testing")),o.createElement(w.CheckboxControl,{label:(0,N._x)("Global Consistency","command","nelio-ab-testing"),checked:!t.length,onChange:function(){return n(!t.length)}}))},Lt=function(e){var t=(0,s.useDispatch)(g),n=t.addScopeRules,r=t.removeScopeRules;return function(t){r((0,u.map)(e,"id")),t&&n((0,f.createScopeRule)({type:"tested-post"}))}},Bt=function(){var e=Vt(),t=Ut(),n=jt();return t?n?null:o.createElement(w.PanelBody,{className:"nab-experiment-scope",title:(0,N._x)("Test Scope","text","nelio-ab-testing")},"tested-post-with-consistency"===t?o.createElement(Gt,{rules:e}):o.createElement(o.Fragment,null,o.createElement(Pt,{rules:e,scopeSupport:t}),o.createElement(Ct,{rules:e,scopeSupport:t}))):null},Vt=function(){return(0,s.useSelect)((function(e){return e(g).getScope()}))},Ut=function(){return(0,s.useSelect)((function(e){return(0,e(Q.STORE_NAME).getExperimentSupport)((0,e(g).getExperimentType)(),"scope")}))},jt=function(){return(0,s.useSelect)((function(e){return!!e(g).getAlternative("control").attributes.testAgainstExistingContent}))},Ft=function(){var e=Wt();return o.createElement("div",{className:"nab-edit-experiment-sidebar",style:e},o.createElement("div",{className:"nab-edit-experiment-sidebar__element-wrapper"},o.createElement("h2",{className:"nab-edit-experiment-sidebar__section-title"},ue({mixedString:(0,N.sprintf)(
/* translators: dashicon */
(0,N._x)("%s Additional Settings","text","nelio-ab-testing"),"{{icon}}{{/icon}}"),components:{icon:o.createElement(w.Dashicon,{className:"nab-edit-experiment-sidebar__section-title-icon",icon:"admin-settings"})}})),o.createElement(Ot,null),o.createElement(Dt,null),o.createElement(Bt,null)))},Wt=function(){return(0,s.useSelect)((function(e){var t=(0,e(d.STORE_NAME).getPageAttribute)("sidebarDimensions"),n=t.applyFix,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["applyFix"]);return n?r:void 0}))},qt=function(){return qt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},qt.apply(this,arguments)},Ht=function(e){var t=e.alternativeId,n=e.disabled,r=e.index,i=Yt(t),a=zt(r),l=$t(),c=Xt(),u=Qt(r),m=Jt(),d=Kt(),p=(0,s.useDispatch)(g),v=p.saveExperimentAndEditAlternative,b=p.saveExperimentAndPreviewAlternative,E=p.removeAlternatives,_=p.setAlternative;return i?o.createElement("div",{className:Be()(["nab-alternative-list__alternative",{"nab-alternative-list__alternative--original":!r}])},o.createElement("p",{className:Be()(["nab-alternative-list__alternative-letter",{"nab-alternative-list__alternative-letter--disabled":0<r&&n}])},function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return e>=t.length?"".concat(e-t.length+1):t.charAt(e)}(r)),o.createElement("div",{className:"nab-alternative-list__alternative-edit"},o.createElement(a,{attributes:i.attributes,disabled:n,experimentType:c,setAttributes:function(e){return _(i.id,qt(qt({},i),{attributes:(0,f.omitUndefineds)(qt(qt({},i.attributes),e))}))}}),0!==r&&o.createElement("ul",{className:"nab-alternative-list__alternative-actions"},d&&o.createElement("li",null,o.createElement(w.Button,{isLink:!0,disabled:n||m,onClick:function(){return v(t)}},(0,N._x)("Edit","command","nelio-ab-testing"))),o.createElement("li",null,o.createElement(w.Button,{isLink:!0,disabled:n||m,onClick:function(){return b(t)}},(0,N._x)("Preview","command","nelio-ab-testing"))),l&&o.createElement("li",null,o.createElement(w.Button,{isLink:!0,isDestructive:!0,disabled:n||m,onClick:function(){return E(i.id)}},(0,N._x)("Delete","command","nelio-ab-testing"))))),o.createElement("div",{className:"nab-alternative-list__alternative-help"},!!u&&o.createElement(z.HelpIcon,{text:u}))):null},Xt=function(){return(0,s.useSelect)((function(e){return e(g).getExperimentType()}))},Yt=function(e){return(0,s.useSelect)((function(t){return t(g).getAlternative(e)}))},$t=function(){var e=L("status")[0];return(0,s.useSelect)((function(t){var n=t(g).getAlternativeIds,r=(e||"").includes("paused");return n().length>2&&!r}))},Jt=function(){return(0,s.useSelect)((function(e){return e(g).isExperimentBeingSaved()}))},zt=function(e){return(0,s.useSelect)((function(t){var n=(0,t(Q.STORE_NAME).getExperimentView)((0,t(g).getExperimentType)(),e?"alternative":"original");return null!=n?n:function(){return o.createElement(o.Fragment,null)}}))},Qt=function(e){return(0,s.useSelect)((function(t){var n=t(g).getExperimentType,r=t(Q.STORE_NAME).getHelpString;return 0===e?r(n(),"original"):1===e?r(n(),"alternative"):""}))},Kt=function(){var e=Xt();return(0,s.useSelect)((function(t){return"external"===(0,t(Q.STORE_NAME).getExperimentSupport)(e,"alternativeEdition")}))},Zt=function(){var e=(0,s.useDispatch)(g).closeAlternativePreviewer,t=(0,s.useSelect)((function(e){return e(g).getAlternativePreviewerUrl()}));return t?o.createElement(w.Modal,{className:"nab-alternative-previewer",title:"Alternative Previewer",isDismissable:!0,isDismissible:!0,onRequestClose:e},o.createElement("iframe",{className:"nab-alternative-previewer__iframe",title:(0,N._x)("Alternative Preview Frame","text","nelio-ab-testing"),src:t})):null},en=function(){var e=tn(),t=e[0],n=e.slice(1),r=nn(),i=rn(),a=an(),s=on(),l=sn();return o.createElement("div",{className:"nab-edit-experiment__alternative-section"},o.createElement("h2",null,ue({mixedString:(0,N.sprintf)(
/* translators: dashicon */
(0,N._x)("%s Control Version and Variants","text","nelio-ab-testing"),"{{icon}}{{/icon}}"),components:{icon:o.createElement(w.Dashicon,{className:"nab-alternative-section__title-icon",icon:"randomize"})}})),o.createElement("div",{className:"nab-alternative-list"},!!t&&o.createElement(Ht,{key:"control",index:0,alternativeId:"control",disabled:s}),o.createElement(z.AnimatedList,{disableAnimations:l,exit:500},n.map((function(e,t){return o.createElement(Ht,{key:e,index:t+1,alternativeId:e,disabled:s})})))),o.createElement("div",{className:"nab-edit-experiment-alternative-section__new-variant-container"},!i&&!!a&&o.createElement(w.Button,{isSecondary:!0,key:"new-variant",disabled:8<=n.length||s,onClick:function(){return r()}},(0,N._x)("New Variant","command","nelio-ab-testing")),!i&&!a&&o.createElement(w.ExternalLink,{className:"components-button is-secondary",href:(0,f.addFreeTracker)((0,N._x)("https://neliosoftware.com/testing/pricing/","text","nelio-ab-testing"))},(0,N._x)("Subscribe to Add More Variants","user","nelio-ab-testing"))),o.createElement(Zt,null))},tn=function(){return(0,s.useSelect)((function(e){return e(g).getAlternativeIds()}))},nn=function(){var e=(0,s.useDispatch)(g).addAlternatives;return function(){return e((0,f.createAlternative)())}},rn=function(){return L("status")[0].includes("paused")},an=function(){return(0,s.useSelect)((function(e){return e(d.STORE_NAME).getPluginSetting("subscription")||!1}))},on=function(){return(0,s.useSelect)((function(e){return e(g).isTestedElementInvalid()}))},sn=function(){var e,t,n,r,i,a=(0,o.useState)([]),s=a[0],l=a[1],c=s.join(";"),m=tn(),d=m.join(";");return(0,o.useEffect)((function(){c!==d&&l(m)}),[c,d]),c!==d&&(e=d,t=c.split(";"),n=e.split(";"),r=(0,u.difference)(t,n),i=(0,u.difference)(n,t),!!r.length&&!!i.length)},ln=null!==(me=null===I.store||void 0===I.store?void 0:I.store.name)&&void 0!==me?me:"core/notices",cn=function(){var e=un(),t=(0,s.useDispatch)(ln).removeNotice;return o.createElement("div",{className:"nab-edit-experiment-layout"},o.createElement(j,null),o.createElement(K,null),o.createElement("div",{className:"nab-edit-experiment-layout__body"},o.createElement("div",{className:"nab-edit-experiment-layout__content",role:"region","aria-label":(0,N._x)("Editor content","text","nelio-ab-testing"),tabIndex:-1},!(0,f.isEmpty)(e)&&o.createElement(w.NoticeList,{className:"nab-edit-experiment-layout__notices",notices:e,onRemove:t}),o.createElement(oe,null),o.createElement(en,null),o.createElement(qe,null),o.createElement(Et,null)),o.createElement(Ft,null)))},un=function(){return(0,s.useSelect)((function(e){return e(ln).getNotices()}))},mn=[{label:(0,N._x)("What is the original page or post of a test?","text","nelio-ab-testing"),link:(0,N._x)("https://neliosoftware.com/testing/help/what-is-the-original-page-or-post-of-a-test/","text","nelio-ab-testing")},{label:(0,N._x)("Why don’t all my posts/pages appear in the selection list when I’m creating a new test?","text","nelio-ab-testing"),link:(0,N._x)("https://neliosoftware.com/testing/help/why-dont-all-my-posts-appear-in-the-selection-list/","text","nelio-ab-testing")},{label:(0,N._x)("What is a conversion and what counts as one?","text","nelio-ab-testing"),link:(0,N._x)("https://neliosoftware.com/testing/help/what-is-a-conversion/","text","nelio-ab-testing")},{label:(0,N._x)("How can I track conversions occurring in third-party websites?","text","nelio-ab-testing"),link:(0,N._x)("https://neliosoftware.com/testing/help/how-can-i-track-conversions-occurring-in-third-party-websites/","text","nelio-ab-testing")}];function dn(e){var t,n,r,i,a=(0,s.select)(Q.STORE_NAME).getExperimentType(e),o=(0,s.select)(d.STORE_NAME).isSubscribedTo;return[{title:(0,N._x)("Test Editor","text","nelio-ab-testing"),intro:(0,N._x)("Welcome to the Test Editor. Here you’ll be able to select the element you want to test and create one or more variants to find out which one converts the most. As you can see, it’s quite similar to WordPress’ Block Editor: there’s a header, a sidebar, and a main area.","user","nelio-ab-testing")},{title:(0,N._x)("Name","text","nelio-ab-testing"),intro:(0,N._x)("You’ll notice that all test types have a similar user interface. When creating a new test, you’ll first have to name it. Just type in a descriptive name that helps you identify the test in the future.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-experiment-title")}},{title:(0,N._x)("Variants","text","nelio-ab-testing"),intro:(0,N._x)("Next, there’s a “Control Version and Variants” section. Use it to (a) identify the element you want to test and (b) create one or more split testing variants.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-edit-experiment__alternative-section")}},{title:(0,N._x)("Variant A","text","nelio-ab-testing"),intro:null!==(n=null===(t=null==a?void 0:a.help)||void 0===t?void 0:t.original)&&void 0!==n?n:"",element:function(){return document.querySelector(".nab-alternative-list__alternative--original")},active:function(){var e;return!!(null===(e=null==a?void 0:a.help)||void 0===e?void 0:e.original)}},{title:(0,N._x)("Variant B","text","nelio-ab-testing"),intro:null!==(i=null===(r=null==a?void 0:a.help)||void 0===r?void 0:r.alternative)&&void 0!==i?i:"",element:function(){return document.querySelector(".nab-alternative-list__alternative:not(.nab-alternative-list__alternative--original)")},active:function(){var e;return!!(null===(e=null==a?void 0:a.help)||void 0===e?void 0:e.alternative)&&!!document.querySelector(".nab-alternative-list__alternative:not(.nab-alternative-list__alternative--original)")}},{title:(0,N._x)("Goals","text","nelio-ab-testing"),intro:(0,N._x)("Split tests help you to improve the conversion rate of your website. Here you can set up the goals a test pursues and the specific conversion actions that, when performed by a visitor, will trigger a conversion.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-edit-experiment__goal-section")},active:function(){var e;return!(null===(e=null==a?void 0:a.supports)||void 0===e?void 0:e.automaticGoalSetup)}},{title:(0,N._x)("Goals","text","nelio-ab-testing"),intro:(0,N._x)("Split tests help you to improve the conversion rate of your website. With this type of test, the conversion goal and conversion action that might trigger a conversion is already set up by Nelio A/B Testing.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-edit-experiment__goal-section")},active:function(){var e;return!!(null===(e=null==a?void 0:a.supports)||void 0===e?void 0:e.automaticGoalSetup)}},{title:(0,N._x)("Actions","text","nelio-ab-testing"),intro:(0,N._x)("Use these buttons to add the specific conversion actions that might trigger a conversion like, for example, “visiting a page” or “clicking an element on the page.”","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-conversion-action-type-list")},active:function(){return!!document.querySelector(".nab-conversion-action-type-list")}},{title:(0,N._x)("Segmentation","text","nelio-ab-testing"),intro:(0,N._x)("If you subscribe to Nelio A/B Testing, you’ll be able to segment your visitors into groups and specify who may or may not participate in a test.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-edit-experiment__segmentation-section")},active:function(){return!!document.querySelector(".nab-edit-experiment-segmentation-section__content--free")}},{title:(0,N._x)("Segmentation","text","nelio-ab-testing"),intro:(0,N._x)("You can segment your audience into different groups and look at the performance of your split test with respect to each group. You can also use segmentation to limit who may or may not participate in a test.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-edit-experiment__segmentation-section")},active:function(){return!document.querySelector(".nab-edit-experiment-segmentation-section__content--free")}},{title:(0,N._x)("Status","text","nelio-ab-testing"),intro:(0,N._x)("Here you can see the current status of your test: once it’s “Ready,” you’ll be able to start it. Also, if you subscribe to our Professional plan, you’ll be able to schedule when a test should be started, as well as to define if and when it should be automatically stopped.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-experiment-management")},active:function(){return!o("professional")}},{title:(0,N._x)("Status","text","nelio-ab-testing"),intro:(0,N._x)("Here you can see the current status of your test: once it’s “Ready,” you’ll be able to start it. You can also schedule when the test should be started, as well as define a stop condition to automatically stop the test.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-experiment-management")},active:function(){return o("professional")}},{title:(0,N._x)("Scope","text","nelio-ab-testing"),intro:(0,N._x)("By default, this type of test will show up on all pages of your website. You can limit its scope by specifying the URLs in which the test should be visible.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-experiment-scope")},active:function(){var e,t;return"custom"===(null===(e=null==a?void 0:a.supports)||void 0===e?void 0:e.scope)||"custom-with-tested-post"===(null===(t=null==a?void 0:a.supports)||void 0===t?void 0:t.scope)}},{title:(0,N._x)("Scope","text","nelio-ab-testing"),intro:(0,N._x)("This type of test applies to a specific element of your website, be it a page, a post, or what. If you enable “Global Consistency,” our plugin will also load the appropriate variant on any page in which the tested element (i.e. its title, featured image, and so on) shows up.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-experiment-scope")},active:function(){var e;return"tested-post-with-consistency"===(null===(e=null==a?void 0:a.supports)||void 0===e?void 0:e.scope)}}]}var pn=function(e){var t=e.experimentId,n=(0,s.useSelect)((function(e){return e(d.STORE_NAME).getExperiment(t)}));return(0,o.useEffect)((function(){var e;n&&(e=(0,s.select)(g).getExperimentType(),(0,z.appendContextualHelp)({screen:"experiment-list:".concat(e),questions:mn,walkthrough:dn(e)}))}),[!!n]),o.createElement(o.StrictMode,null,o.createElement(A,{experiment:n},o.createElement(cn,null)))},vn=function(){return vn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},vn.apply(this,arguments)},fn={activeGoalId:"",activeSegmentId:"",alternativePreviewerUrl:"",draftStatusRationale:"",hasExperimentBeenRecentlySaved:!1,isExperimentBeingSaved:!1},gn=function(){return gn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gn.apply(this,arguments)},bn=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},En=b,xn=function(){return xn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},xn.apply(this,arguments)},hn=E,yn=function(){return yn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},yn.apply(this,arguments)},Sn=_,An=function(){return An=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},An.apply(this,arguments)},wn=x,Nn=function(){return Nn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Nn.apply(this,arguments)},In=h,Tn=function(){return Tn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Tn.apply(this,arguments)},Rn=y,On=function(){return On=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},On.apply(this,arguments)},Dn=S,Cn=(0,s.combineReducers)({editor:function(e,t){var n;return void 0===e&&(e=fn),null!==(n=function(e,t){switch(t.type){case"SET_ACTIVE_GOAL":return vn(vn({},e),{activeGoalId:t.goalId});case"SET_ACTIVE_SEGMENT":return vn(vn({},e),{activeSegmentId:t.segmentId});case"SET_EXPERIMENT_AS_BEING_SAVED":return vn(vn({},e),{isExperimentBeingSaved:!!t.status});case"SET_EXPERIMENT_AS_RECENTLY_SAVED":return vn(vn({},e),{hasExperimentBeenRecentlySaved:!0});case"SET_DRAFT_STATUS_RATIONALE":return vn(vn({},e),{draftStatusRationale:t.rationale});case"OPEN_ALTERNATIVE_PREVIEWER":return vn(vn({},e),{alternativePreviewerUrl:t.url});case"CLOSE_ALTERNATIVE_PREVIEWER":return vn(vn({},e),{alternativePreviewerUrl:""});case"SETUP_EDITOR":return e}}(e=vn(vn({},e),{hasExperimentBeenRecentlySaved:!1}),t))&&void 0!==n?n:e},experiment:(0,s.combineReducers)({alternatives:function(e,t){var n;return void 0===e&&(e=En),null!==(n=function(e,t){var n;switch(t.type){case"ADD_ALTERNATIVES":return{byId:gn(gn({},e.byId),(0,u.keyBy)(t.alternatives,"id")),allIds:bn(bn([],e.allIds,!0),(0,u.map)(t.alternatives,"id"),!0)};case"REMOVE_ALTERNATIVES":return{byId:(0,u.omit)(e.byId,t.ids),allIds:(0,u.difference)(e.allIds,t.ids)};case"REPLACE_ALTERNATIVES":return{byId:gn(gn({},(0,u.omit)(e.byId,t.oldIds)),(0,u.keyBy)(t.alternatives,"id")),allIds:bn(bn([],(0,u.difference)(e.allIds,t.oldIds),!0),(0,u.map)(t.alternatives,"id"),!0)};case"SET_ALTERNATIVE":return!t.alternative||(0,f.isEmpty)(t.alternative)||(0,f.isEmpty)(e.byId[t.id])?e:gn(gn({},e),{byId:gn(gn({},e.byId),(n={},n[t.id]=t.alternative,n))});case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?En:{byId:(0,u.keyBy)(t.experiment.alternatives,"id"),allIds:(0,u.map)(t.experiment.alternatives,"id")}}}(e,t))&&void 0!==n?n:e},conversionActions:function(e,t){var n;return void 0===e&&(e=hn),null!==(n=function(e,t){var n,r,i,a,o;switch(t.type){case"ADD_CONVERSION_ACTIONS_INTO_GOAL":return xn(xn({},e),((n={})[t.goalId]=xn(xn({},e[t.goalId]),(0,u.keyBy)(t.conversionActions,"id")),n));case"REPLACE_CONVERSION_ACTIONS_IN_GOAL":return xn(xn({},e),((r={})[t.goalId]=xn({},(0,u.keyBy)(t.conversionActions,"id")),r));case"UPDATE_CONVERSION_ACTION":var s=e[t.goalId];if(!s)return e;var l=s[t.conversionActionId];return l?xn(xn({},e),((i={})[t.goalId]=xn(xn({},s),((a={})[t.conversionActionId]=xn(xn({},l),{attributes:xn(xn({},l.attributes),t.attributes)}),a)),i)):e;case"REMOVE_CONVERSION_ACTIONS_FROM_GOAL":return xn(xn({},e),((o={})[t.goalId]=(0,u.omit)(e[t.goalId],t.conversionActionIds),o));case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?{}:t.experiment.goals.reduce((function(e,t){return e[t.id]=(0,u.keyBy)(t.conversionActions,"id"),e}),{})}}(e,t))&&void 0!==n?n:e},data:function(e,t){var n;return void 0===e&&(e=Sn),null!==(n=function(e,t){switch(t.type){case"UPDATE_EXPERIMENT_DATA":return yn(yn({},e),t.attributes);case"SET_TESTED_ELEMENT_AS_INVALID":return yn(yn({},e),{isTestedElementInvalid:!!t.invalid});case"SETUP_EDITOR":return yn(yn({},e),(0,u.omit)(t.experiment,["alternatives","goals","scope","segments"]))}}(e,t))&&void 0!==n?n:e},goals:function(e,t){var n;return void 0===e&&(e=wn),null!==(n=function(e,t){var n;switch(t.type){case"ADD_GOALS":return An(An({},e),(0,u.keyBy)(t.goals,"id"));case"UPDATE_GOAL":return e[t.goalId]?An(An({},e),((n={})[t.goalId]=An(An({},e[t.goalId]),{attributes:An(An({},e[t.goalId].attributes),t.attributes)}),n)):e;case"REMOVE_GOALS":return(0,u.omit)(e,t.ids);case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?{}:(0,u.keyBy)(t.experiment.goals.map((function(e){return(0,u.omit)(e,"conversionActions")})),"id")}}(e,t))&&void 0!==n?n:e},scope:function(e,t){var n;return void 0===e&&(e=In),null!==(n=function(e,t){switch(t.type){case"ADD_SCOPE_RULES":return Nn(Nn({},e),(0,u.keyBy)(t.rules,"id"));case"REMOVE_SCOPE_RULES":return(0,u.omit)(e,t.ids);case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?{}:(0,u.keyBy)(t.experiment.scope,"id")}}(e,t))&&void 0!==n?n:e},segmentationRules:function(e,t){var n;return void 0===e&&(e=Rn),null!==(n=function(e,t){var n,r,i,a,o;switch(t.type){case"ADD_SEGMENTATION_RULES_INTO_SEGMENT":return Tn(Tn({},e),((n={})[t.segmentId]=Tn(Tn({},e[t.segmentId]),(0,u.keyBy)(t.segmentationRules,"id")),n));case"REPLACE_SEGMENTATION_RULES_IN_SEGMENT":return Tn(Tn({},e),((r={})[t.segmentId]=Tn({},(0,u.keyBy)(t.segmentationRules,"id")),r));case"UPDATE_SEGMENTATION_RULE":var s=e[t.segmentId];if(!s)return e;var l=s[t.segmentationRuleId];return l?Tn(Tn({},e),((i={})[t.segmentId]=Tn(Tn({},s),((a={})[t.segmentationRuleId]=Tn(Tn({},l),{attributes:Tn(Tn({},l.attributes),t.attributes)}),a)),i)):e;case"REMOVE_SEGMENTATION_RULES_FROM_SEGMENT":return Tn(Tn({},e),((o={})[t.segmentId]=(0,u.omit)(e[t.segmentId],t.segmentationRuleIds),o));case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?{}:t.experiment.segments.reduce((function(e,t){return e[t.id]=(0,u.keyBy)(t.segmentationRules,"id"),e}),{})}}(e,t))&&void 0!==n?n:e},segments:function(e,t){var n;return void 0===e&&(e=Dn),null!==(n=function(e,t){var n;switch(t.type){case"ADD_SEGMENTS":return On(On({},e),(0,u.keyBy)(t.segments,"id"));case"UPDATE_SEGMENT":var r=e[t.segmentId];return r?On(On({},e),((n={})[t.segmentId]=On(On({},r),{attributes:On(On({},r.attributes),t.attributes)}),n)):e;case"REMOVE_SEGMENTS":return(0,u.omit)(e,t.ids);case"SETUP_EDITOR":if("nab/heatmap"===t.experiment.type)return{};var i=t.experiment.segments.map((function(e){return(0,u.omit)(e,"segmentationRules")}));return(0,u.keyBy)(i,"id")}}(e,t))&&void 0!==n?n:e}})}),kn={};function Pn(e){return[e]}function Mn(e,t,n){var r;if(e.length!==t.length)return!1;for(r=n;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Gn(e,t){var n,r=t||Pn;function i(e){var t,r,i,a,o,s=n,l=!0;for(t=0;t<e.length;t++){if(!(o=r=e[t])||"object"!=typeof o){l=!1;break}s.has(r)?s=s.get(r):(i=new WeakMap,s.set(r,i),s=i)}return s.has(kn)||((a=function(){var e={clear:function(){e.head=null}};return e}()).isUniqueByDependants=l,s.set(kn,a)),s.get(kn)}function a(){n=new WeakMap}function o(){var t,n,a,o,s,l=arguments.length;for(o=new Array(l),a=0;a<l;a++)o[a]=arguments[a];for((t=i(s=r.apply(null,o))).isUniqueByDependants||(t.lastDependants&&!Mn(s,t.lastDependants,0)&&t.clear(),t.lastDependants=s),n=t.head;n;){if(Mn(n.args,o,1))return n!==t.head&&(n.prev.next=n.next,n.next&&(n.next.prev=n.prev),n.next=t.head,n.prev=null,t.head.prev=n,t.head=n),n.val;n=n.next}return n={val:e.apply(null,o)},o[0]=null,n.args=o,t.head&&(t.head.prev=n,n.next=t.head),t.head=n,n.val}return o.getDependants=r,o.clear=a,a(),o}function Ln(e,t){return e.experiment.alternatives.byId[t]}var Bn=Gn((function(e){return(0,u.values)(e.experiment.alternatives.byId)}),(function(e){return[e.experiment.alternatives.byId]})),Vn=function(e){return e.experiment.alternatives.allIds},Un=Gn((function(e,t){return(0,u.values)(e.experiment.conversionActions[t])}),(function(e,t){return[e.experiment.conversionActions,t]}));function jn(e){return!!e.editor.isExperimentBeingSaved}function Fn(e){return!!e.editor.hasExperimentBeenRecentlySaved}function Wn(e){return(0,u.filter)(e.experiment.goals,{id:e.editor.activeGoalId})[0]||e.experiment.goals[0]}function qn(e){return(0,u.map)(e.experiment.goals,"id").indexOf(e.editor.activeGoalId)||0}function Hn(e){return(0,u.filter)(e.experiment.segments,{id:e.editor.activeSegmentId})[0]}function Xn(e){return(0,u.map)(e.experiment.segments,"id").indexOf(e.editor.activeSegmentId)||0}function Yn(e){if(e.experiment&&e.experiment.data&&["draft","paused_draft"].includes(e.experiment.data.status))return e.editor.draftStatusRationale}function $n(e){return e.editor.alternativePreviewerUrl}function Jn(e){return e.experiment.data.id}function zn(e){return e.experiment.data.type}function Qn(e,t){return e.experiment.data[t]}function Kn(e,t){return e.experiment.data[t]}function Zn(e){return!!e.experiment.data.isTestedElementInvalid}var er=Gn((function(e){return(0,u.values)(e.experiment.goals)}),(function(e){return[e.experiment.goals]})),tr=Gn((function(e){return(0,u.values)(e.experiment.scope)}),(function(e){return[e.experiment.scope]})),nr=Gn((function(e,t){return(0,u.values)(e.experiment.segmentationRules[t])}),(function(e,t){return[e.experiment.segmentationRules,t]})),rr=Gn((function(e){return(0,u.values)(e.experiment.segments)}),(function(e){return[e.experiment.segments]}));function ir(e){return{type:"ADD_ALTERNATIVES",alternatives:(0,u.castArray)(e)}}function ar(e){return{type:"REMOVE_ALTERNATIVES",ids:(0,u.castArray)(e)}}function or(e,t){return{type:"REPLACE_ALTERNATIVES",oldIds:e,alternatives:(0,u.castArray)(t)}}function sr(e,t){return{type:"SET_ALTERNATIVE",id:e,alternative:t}}function lr(e,t){return{type:"ADD_CONVERSION_ACTIONS_INTO_GOAL",goalId:e,conversionActions:(0,u.castArray)(t)}}function cr(e,t){return{type:"REPLACE_CONVERSION_ACTIONS_IN_GOAL",goalId:e,conversionActions:(0,u.castArray)(t)}}function ur(e,t){return{type:"REMOVE_CONVERSION_ACTIONS_FROM_GOAL",goalId:e,conversionActionIds:(0,u.castArray)(t)}}function mr(e,t,n){return{type:"UPDATE_CONVERSION_ACTION",goalId:e,conversionActionId:t,attributes:n}}function dr(e){return{type:"SETUP_EDITOR",experiment:e}}function pr(e){return{type:"SET_ACTIVE_GOAL",goalId:e}}function vr(e){return{type:"SET_ACTIVE_SEGMENT",segmentId:e}}function fr(e){return{type:"SET_EXPERIMENT_AS_BEING_SAVED",status:e}}function gr(e){return{type:"SET_DRAFT_STATUS_RATIONALE",rationale:e}}function br(){return{type:"SET_EXPERIMENT_AS_RECENTLY_SAVED"}}function Er(e){return{type:"OPEN_ALTERNATIVE_PREVIEWER",url:e}}function _r(){return{type:"CLOSE_ALTERNATIVE_PREVIEWER"}}function xr(e){return{type:"UPDATE_EXPERIMENT_DATA",attributes:e}}function hr(e){return{type:"UPDATE_EXPERIMENT_DATA",attributes:e}}function yr(e){return{type:"SET_TESTED_ELEMENT_AS_INVALID",invalid:e}}function Sr(e){return{type:"ADD_GOALS",goals:(0,u.castArray)(e)}}function Ar(e){return{type:"REMOVE_GOALS",ids:(0,u.castArray)(e)}}function wr(e,t){return{type:"UPDATE_GOAL",goalId:e,attributes:t}}function Nr(e){return{type:"ADD_SCOPE_RULES",rules:(0,u.castArray)(e)}}function Ir(e){return{type:"REMOVE_SCOPE_RULES",ids:(0,u.castArray)(e)}}function Tr(e,t){return{type:"ADD_SEGMENTATION_RULES_INTO_SEGMENT",segmentId:e,segmentationRules:(0,u.castArray)(t)}}function Rr(e,t){return{type:"REPLACE_SEGMENTATION_RULES_IN_SEGMENT",segmentId:e,segmentationRules:(0,u.castArray)(t)}}function Or(e,t){return{type:"REMOVE_SEGMENTATION_RULES_FROM_SEGMENT",segmentId:e,segmentationRuleIds:(0,u.castArray)(t)}}function Dr(e,t,n){return{type:"UPDATE_SEGMENTATION_RULE",segmentId:e,segmentationRuleId:t,attributes:n}}function Cr(e){return{type:"ADD_SEGMENTS",segments:(0,u.castArray)(e)}}function kr(e){return{type:"REMOVE_SEGMENTS",ids:(0,u.castArray)(e)}}function Pr(e,t){return{type:"UPDATE_SEGMENT",segmentId:e,attributes:t}}var Mr,Gr=window.wp.apiFetch,Lr=n.n(Gr),Br=window.wp.url,Vr=function(){return Vr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Vr.apply(this,arguments)},Ur=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},jr=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Fr=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Wr=null!==(Mr=null===I.store||void 0===I.store?void 0:I.store.name)&&void 0!==Mr?Mr:"core/notices";function qr(){var e,t,n,r,i,a;return Ur(this,void 0,void 0,(function(){var o,l,c,u,m,d,p,v,f,b,E,_,x,h,y,S,A,w,N,I,T,R,O,D,C;return jr(this,(function(k){switch(k.label){case 0:if((0,s.select)(g).isExperimentBeingSaved())return[2];for((0,s.dispatch)(g).setExperimentAsBeingSaved(!0),o=[],l=(0,s.select)(g).getGoals(),c=0,u=l;c<u.length;c++)m=u[c],d=(0,s.select)(g).getConversionActions(m.id),p=!!d.length||d.every(Qr),o.push(Vr(Vr({},m),{attributes:Vr(Vr({},m.attributes),{useOrderRevenue:p?null===(e=m.attributes.useOrderRevenue)||void 0===e||e:void 0,orderStatusForConversion:p?null!==(t=m.attributes.orderStatusForConversion)&&void 0!==t?t:"wc-completed":void 0}),conversionActions:d}));for(v=[],f=(0,s.select)(g).getSegments(),b=0,E=f;b<E.length;b++)_=E[b],v.push(Vr(Vr({},_),{segmentationRules:(0,s.select)(g).getSegmentationRules(_.id)}));for(x=[],h=(0,s.select)(g).getAlternativeIds(),y=(0,s.select)(g).isTestedElementInvalid(),S=(0,s.select)(g).getAlternative("control"),A=0,w=h;A<w.length;A++)"control"!==(N=w[A])&&(I=(0,s.select)(g).getAlternative(N))&&x.push(I);R=(0,s.select)(g).getExperimentType(),T="nab/heatmap"===R?{id:(0,s.select)(g).getExperimentId(),type:R,name:(0,s.select)(g).getExperimentAttribute("name"),description:(0,s.select)(g).getExperimentAttribute("description"),status:(0,s.select)(g).getExperimentAttribute("status"),startDate:(0,s.select)(g).getExperimentAttribute("startDate"),endDate:!1,endMode:(0,s.select)(g).getExperimentAttribute("endMode"),endValue:(0,s.select)(g).getExperimentAttribute("endValue"),trackingMode:null!==(n=(0,s.select)(g).getHeatmapAttribute("trackingMode"))&&void 0!==n?n:"post",trackedPostId:null!==(r=(0,s.select)(g).getHeatmapAttribute("trackedPostId"))&&void 0!==r?r:0,trackedPostType:null!==(i=(0,s.select)(g).getHeatmapAttribute("trackedPostType"))&&void 0!==i?i:"page",trackedUrl:null!==(a=(0,s.select)(g).getHeatmapAttribute("trackedUrl"))&&void 0!==a?a:""}:{id:(0,s.select)(g).getExperimentId(),type:R,name:(0,s.select)(g).getExperimentAttribute("name"),description:(0,s.select)(g).getExperimentAttribute("description"),status:(0,s.select)(g).getExperimentAttribute("status"),startDate:(0,s.select)(g).getExperimentAttribute("startDate"),endDate:!1,endMode:(0,s.select)(g).getExperimentAttribute("endMode"),endValue:(0,s.select)(g).getExperimentAttribute("endValue"),scope:(0,s.select)(g).getScope(),alternatives:y?[S]:Fr([S],x,!0),goals:o,segments:v},k.label=1;case 1:return k.trys.push([1,3,,4]),[4,Lr()({path:"/nab/v1/experiment/".concat(T.id),method:"PUT",data:T})];case 2:return O=k.sent(),"nab/heatmap"!==T.type&&y&&(O=Vr(Vr({},O),{alternatives:Fr([O.alternatives[0]],x,!0)})),(0,s.dispatch)(g).setupEditor(O),(0,s.dispatch)(g).setExperimentAsBeingSaved(!1),(0,s.dispatch)(g).setExperimentAsRecentlySaved(),[3,4];case 3:return D=k.sent(),C=Kr(D),(0,s.dispatch)(Wr).createErrorNotice(C),(0,s.dispatch)(g).setExperimentAsBeingSaved(!1),[3,4];case 4:return[2]}}))}))}function Hr(e){return Ur(this,void 0,void 0,(function(){var t;return jr(this,(function(n){switch(n.label){case 0:return[4,qr()];case 1:return n.sent(),(0,s.select)(g).hasExperimentBeenRecentlySaved()&&(0,s.select)(g).getAlternativeIds().includes(e)&&(t=(0,s.select)(g).getAlternative(e))&&t.links.edit?(window.location.href=t.links.edit,[2]):[2]}}))}))}function Xr(e){return Ur(this,void 0,void 0,(function(){var t;return jr(this,(function(n){switch(n.label){case 0:return[4,qr()];case 1:return n.sent(),(0,s.select)(g).hasExperimentBeenRecentlySaved()&&(0,s.select)(g).getAlternativeIds().includes(e)&&(null==(t=(0,s.select)(g).getAlternative(e))?void 0:t.links.preview)?((0,s.dispatch)(g).openAlternativePreviewer(t.links.preview),[2]):[2]}}))}))}function Yr(){return Ur(this,void 0,void 0,(function(){return jr(this,(function(e){switch(e.label){case 0:return(0,s.dispatch)(g).setExperimentData({status:"trash"}),[4,qr()];case 1:return e.sent(),(0,s.select)(g).hasExperimentBeenRecentlySaved()?(window.location.href=(0,Br.addQueryArgs)("edit.php",{post_type:"nab_experiment"}),[2]):[2]}}))}))}function $r(){return Ur(this,void 0,void 0,(function(){return jr(this,(function(e){switch(e.label){case 0:return[4,zr("start",(0,N._x)("Test can’t be started","text","nelio-ab-testing"))];case 1:return e.sent(),[2]}}))}))}function Jr(){return Ur(this,void 0,void 0,(function(){return jr(this,(function(e){switch(e.label){case 0:return[4,zr("resume",(0,N._x)("Test can’t be resumed","text","nelio-ab-testing"))];case 1:return e.sent(),[2]}}))}))}function zr(e,t){return Ur(this,void 0,void 0,(function(){var n,r,i;return jr(this,(function(a){switch(a.label){case 0:return[4,qr()];case 1:if(a.sent(),!(0,s.select)(g).hasExperimentBeenRecentlySaved())return[2];(0,s.dispatch)(g).setExperimentAsBeingSaved(!0),n=(0,s.select)(g).getExperimentId(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,Lr()({path:"/nab/v1/experiment/".concat(n,"/").concat(e),method:"PUT"})];case 3:return a.sent(),[3,5];case 4:return r=a.sent(),i=Kr(r,t),(0,s.dispatch)(Wr).createErrorNotice(i),(0,s.dispatch)(g).setExperimentAsBeingSaved(!1),[2];case 5:return window.location.href=(0,Br.addQueryArgs)("admin.php",{page:"nelio-ab-testing-experiment-view",experiment:n}),[2]}}))}))}var Qr=function(e){return"nab/wc-order"===e.type};function Kr(e,t){return(e.errors?(0,u.values)(e.errors):[])[0]||t||(0,N._x)("Unknown error","text","nelio-ab-testing")}var Zr=function(){return Zr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Zr.apply(this,arguments)},ei=Zr(Zr({},t),i);function ti(e,t){var n=document.getElementById(e);n?((0,p.registerCoreExperiments)(),(0,m.registerCoreConversionActions)(),(0,v.registerCoreSegmentationRules)(),(0,o.render)(o.createElement(pn,{experimentId:t}),n)):console.warn("Unable to find container node ".concat(e,"."))}function ni(){var e=window.innerHeight,t=document.getElementById("wpadminbar"),n=t?t.getBoundingClientRect().height:0;(0,(0,s.dispatch)(d.STORE_NAME).setPageAttribute)("sidebarDimensions",{top:n,height:"".concat(e-n,"px"),applyFix:782<=window.innerWidth})}(0,s.registerStore)(g,{reducer:Cn,controls:s.controls,actions:ei,selectors:e}),window.addEventListener("resize",(0,u.debounce)(ni,100)),c()(ni)}();var i=nab="undefined"==typeof nab?{}:nab;for(var a in r)i[a]=r[a];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})}();