{"version":3,"file":"js/alternative-loader-fake.js","mappings":"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","sources":["webpack://nab/./assets/src/public/alternative-loader/helpers/preload-query-args.ts","webpack://nab/./assets/src/public/utils/dom-ready.ts","webpack://nab/webpack/bootstrap","webpack://nab/webpack/runtime/define property getters","webpack://nab/webpack/runtime/hasOwnProperty shorthand","webpack://nab/webpack/runtime/make namespace object","webpack://nab/./assets/src/public/alternative-loader/fake/index.ts"],"sourcesContent":["/**\n * External dependencies\n */\nimport type { Url } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport type { PreloadQueryArgUrl } from '../types';\n\nexport default function preloadQueryArgs(\n\tconfig: ReadonlyArray< PreloadQueryArgUrl >\n): void {\n\tif ( ! config.length ) {\n\t\treturn;\n\t} //end if\n\n\t// eslint-disable-next-line @typescript-eslint/prefer-regexp-exec\n\tconst matches = document.cookie.match( /nabAlternative=[0-9]+/ ) || [ '' ];\n\tconst alt: number | typeof NaN = Number.parseInt(\n\t\tmatches[ 0 ].split( '=' )[ 1 ]\n\t);\n\tif ( isNaN( alt ) ) {\n\t\treturn;\n\t} //end if\n\n\tconst site = document.location.protocol + '//' + document.location.hostname;\n\tconst anchors = Array.from(\n\t\tdocument.querySelectorAll< HTMLAnchorElement >( 'a' )\n\t)\n\t\t.filter( ( a ) => a.href )\n\t\t.filter( ( a ) => 0 === a.href.indexOf( site ) )\n\t\t.filter( ( a ) => -1 === a.href.indexOf( '#' ) )\n\t\t.filter( ( a ) => -1 === a.href.indexOf( '/wp-content/' ) );\n\n\tconfig = [ ...config ].sort( ( x ) => ( x.type === 'alt-urls' ? -1 : 1 ) );\n\tconfig.forEach( ( c ) => {\n\t\tconst scope = c.type === 'alt-urls' ? c.altUrls : c.scope;\n\t\tanchors\n\t\t\t.filter( ( a ) => -1 === a.href.indexOf( 'nab=' ) )\n\t\t\t.filter( ( a ) => isInScope( scope, a.href ) )\n\t\t\t.forEach( ( a ) => {\n\t\t\t\tconst nab = alt % c.altCount;\n\t\t\t\tconst url = c.type === 'alt-urls' ? c.altUrls[ nab ] : a.href;\n\t\t\t\ta.href = url.includes( '?' )\n\t\t\t\t\t? `${ url }&nab=${ nab }`\n\t\t\t\t\t: `${ url }?nab=${ nab }`;\n\t\t\t} );\n\t} );\n} //end preloadQueryArgs()\n\n// =======\n// HELPERS\n// =======\n\nfunction isInScope( scope: ReadonlyArray< string >, link: string ): boolean {\n\tlink = link.toLowerCase();\n\treturn scope.some( ( l ) =>\n\t\tisPartialUrl( l ) ? link.includes( getPart( l ) ) : link === l\n\t);\n} //end isInScope()\n\nfunction isPartialUrl( url: Url ): boolean {\n\treturn url.startsWith( '*' ) && url.endsWith( '*' );\n} //end isPartialUrl()\n\nfunction getPart( partialUrl: string ): string {\n\treturn partialUrl.substring( 1, partialUrl.length - 1 );\n} //end getPart()\n","export default function domReady( callback: () => unknown ): void {\n\tif ( typeof document === 'undefined' ) {\n\t\treturn;\n\t} //end if\n\n\tif (\n\t\tdocument.readyState === 'complete' || // DOMContentLoaded + Images/Styles/etc loaded, so we call directly.\n\t\tdocument.readyState === 'interactive' // DOMContentLoaded fires at this point, so we call directly.\n\t) {\n\t\treturn void callback();\n\t} //end if\n\n\t// DOMContentLoaded has not fired yet, delay callback until then.\n\tdocument.addEventListener( 'DOMContentLoaded', callback );\n} //end domReady()\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Internal dependencies\n */\nimport preloadQueryArgs from '../helpers/preload-query-args';\nimport domReady from '../../utils/dom-ready';\nimport type { PreloadQueryArgUrl } from '../types';\n\n// =========\n// TS CHECKS\n// =========\n\nconst hasPreloadConfig = (\n\tw: unknown\n): w is { nabPreloadConfig: ReadonlyArray< PreloadQueryArgUrl > } =>\n\t!! w && 'object' === typeof w && 'nabPreloadConfig' in w;\n\nconst hasDoSingleAction = (\n\tw: unknown\n): w is { nabDoSingleAction: ( a: string ) => void } =>\n\t!! w && 'object' === typeof w && 'nabDoSingleAction' in w;\n\n// ====\n// INIT\n// ====\n\n// Add preload vars when page is ready.\ndomReady( () => {\n\tif ( hasPreloadConfig( window ) ) {\n\t\tpreloadQueryArgs( window.nabPreloadConfig );\n\t} //end if\n} );\n\n// Let our other scripts know the content is already valid.\nsetTimeout( () => {\n\tif ( hasDoSingleAction( window ) ) {\n\t\twindow.nabDoSingleAction( 'valid-content' );\n\t} //end if\n}, 1 );\n\n// Remove nab query arg from the URL.\nif ( window.history?.replaceState ) {\n\twindow.history.replaceState(\n\t\t{},\n\t\t'',\n\t\tdocument.location.href\n\t\t\t.replace( /([?&])nab=[0-9]+/, '$1' )\n\t\t\t.replace( '?&', '?' )\n\t\t\t.replace( '&&', '&' )\n\t\t\t.replace( /[?&]#/, '#' )\n\t\t\t.replace( /[?&]$/, '' )\n\t);\n} //end if\n"],"names":[],"sourceRoot":""}