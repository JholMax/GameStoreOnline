{"version":3,"file":"js/css-selector-finder.js","mappings":"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","sources":["webpack://nab/./node_modules/css-path/css-path.js","webpack://nab/./assets/src/admin/scripts/css-selector-finder/style.scss?8ce3","webpack://nab/./node_modules/trim/index.js","webpack://nab/./assets/src/admin/scripts/css-selector-finder/highlighter.ts","webpack://nab/./packages/utils/links.ts","webpack://nab/external window [\"wp\",\"url\"]","webpack://nab/webpack/bootstrap","webpack://nab/webpack/runtime/compat get default export","webpack://nab/webpack/runtime/define property getters","webpack://nab/webpack/runtime/hasOwnProperty shorthand","webpack://nab/webpack/runtime/make namespace object","webpack://nab/./assets/src/admin/scripts/css-selector-finder/index.ts"],"sourcesContent":["var trim = require('trim')\n\n  , classSelector = function (className) {\n      var selectors = className.split(/\\s/g)\n        , array = []\n\n      for (var i = 0; i < selectors.length; ++i) {\n        if (selectors[i].length > 0) {\n          array.push('.' + selectors[i])\n        }\n      }\n\n      return array.join('')\n    }\n\n  , nthChild = function (elm) {\n      var childNumber = 0\n        , childNodes = elm.parentNode.childNodes\n        , index = 0\n\n      for(; index < childNodes.length; ++index) {\n        if (childNodes[index].nodeType === 1)\n          ++childNumber\n\n        if (childNodes[index] === elm)\n          return childNumber\n      }\n    }\n\n  , path = function (elm, rootNode, list) {\n\n      var tag = elm.tagName.toLowerCase()\n        , selector = [ tag ]\n        , className = elm.getAttribute('class')\n        , id = elm.getAttribute('id')\n\n      if (id) {\n        list.unshift(tag + '#' + trim(id))\n        return list\n      }\n\n      if (className)\n        selector.push( classSelector(className) )\n\n      if (tag !== 'html' && tag !== 'body' && elm.parentNode) {\n        selector.push(':nth-child(' + nthChild(elm) + ')')\n      }\n\n      list.unshift(selector.join(''))\n\n      if (elm.parentNode && elm.parentNode !== rootNode && elm.parentNode.tagName) {\n        path(elm.parentNode, rootNode, list)\n      }\n\n      return list\n    }\n\nmodule.exports = function (elm, rootNode) {\n  return path(elm, rootNode, []).join(' > ')\n}","// extracted by mini-css-extract-plugin\nexport {};","\nexports = module.exports = trim;\n\nfunction trim(str){\n  return str.replace(/^\\s*|\\s*$/g, '');\n}\n\nexports.left = function(str){\n  return str.replace(/^\\s*/, '');\n};\n\nexports.right = function(str){\n  return str.replace(/\\s*$/, '');\n};\n","/**\n * External dependencies\n */\nimport _cssPath from 'css-path';\nconst cssPath = _cssPath as ( el: HTMLElement ) => string;\n\nlet highlighters: ReadonlyArray< HTMLElement > = [];\nconst hoveredElementHighlighter = document.createElement( 'div' );\nhoveredElementHighlighter.className = 'nab-highlight';\ndocument.body.appendChild( hoveredElementHighlighter );\n\nexport function getCssSelector( element: HTMLElement ): string {\n\tlet selector = cssPath( element );\n\tselector = selector.replace( /:nth-child\\([0-9]+\\)/g, '' );\n\tselector = selector.replace( />/g, '' );\n\tselector = selector.replace( / +/g, ' ' );\n\treturn selector;\n} //end getCssSelector()\n\nexport function highlightCssSelector( selector: string ): void {\n\tclearHighlighters();\n\thideHoveredElementHighlighter();\n\n\ttry {\n\t\thighlighters = Array.from(\n\t\t\tdocument.querySelectorAll< HTMLElement >( selector )\n\t\t).map( ( element ) => {\n\t\t\tconst highlighter = document.createElement( 'div' );\n\t\t\thighlighter.className = 'nab-highlight';\n\t\t\tdocument.body.appendChild( highlighter );\n\t\t\tpositionHighlightElement( highlighter, element );\n\t\t\treturn highlighter;\n\t\t} );\n\t} catch ( e ) {\n\t\t/* Nothing to be done */\n\t} //end try\n} //end highlightCssSelector()\n\nexport function highlightHoveredElement( ev: Event ): void {\n\tclearHighlighters();\n\tpositionHighlightElement(\n\t\thoveredElementHighlighter,\n\t\t( ev.target || ev.srcElement ) as HTMLElement | null\n\t);\n} //end highlightHoveredElement()\n\n// =======\n// HELPERS\n// =======\n\nfunction positionHighlightElement(\n\thighlight: HTMLElement,\n\telement: HTMLElement | null\n) {\n\tif ( ! highlight.style || ! element ) {\n\t\treturn;\n\t} //end if\n\n\tconst viewportOffset = element.getBoundingClientRect();\n\thighlight.style.display = 'block';\n\thighlight.style.top = `${\n\t\tMath.floor( viewportOffset.top ) - 1 + window.scrollY\n\t}px`;\n\thighlight.style.left = `${\n\t\tMath.floor( viewportOffset.left ) - 1 + window.scrollX\n\t}px`;\n\thighlight.style.width = `${ viewportOffset.width }px`;\n\thighlight.style.height = `${ viewportOffset.height }px`;\n} //end positionHighlightElement()\n\nfunction clearHighlighters() {\n\tif ( 0 === highlighters.length ) {\n\t\treturn;\n\t} //end if\n\n\thighlighters.forEach(\n\t\t( highlighter ) =>\n\t\t\thighlighter.parentElement &&\n\t\t\thighlighter.parentElement.removeChild( highlighter )\n\t);\n\thighlighters = [];\n} //end clearHighlighters()\n\nfunction hideHoveredElementHighlighter() {\n\thoveredElementHighlighter.style.display = 'none';\n\thoveredElementHighlighter.style.top = '50%';\n\thoveredElementHighlighter.style.left = '50%';\n\thoveredElementHighlighter.style.width = '0';\n\thoveredElementHighlighter.style.height = '0';\n} //end hideHoveredElementHighlighter()\n","/**\n * WordPress dependencies\n */\nimport { addQueryArgs } from '@wordpress/url';\n\nexport function addFreeTracker( link: string ): string {\n\treturn addQueryArgs( link, {\n\t\tutm_source: 'nelio-ab-testing',\n\t\tutm_medium: 'plugin',\n\t\tutm_campaign: 'free',\n\t} );\n} //end addFreeTracker()\n\nexport function isExternalLink( link: string ): boolean {\n\t// Internal link.\n\tif ( ! /^[a-z]+:\\/\\//.test( link ) ) {\n\t\treturn false;\n\t} //end if\n\n\tlink = link.replace( /^https?:\\/\\//, 'http://' );\n\tconst currentDomain = document.location.href\n\t\t.replace( /^https?:\\/\\//, '' )\n\t\t.replace( /\\/.*$/, '' );\n\tif ( 0 === link.indexOf( 'http://' + currentDomain ) ) {\n\t\treturn false;\n\t} //end if\n\n\treturn true;\n} //end isExternalLink()\n\nexport function disableExternalLinks(): void {\n\tArray.from( document.querySelectorAll( 'a' ) ).forEach( ( link ) => {\n\t\tconst href = link.getAttribute( 'href' ) || '';\n\t\tif ( ! isExternalLink( href ) ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tlink.classList.add( 'nab-disabled-link' );\n\t\tlink.addEventListener( 'click', ( ev ) => ev.preventDefault() );\n\t} );\n} //end disableExternalLinks()\n\nexport function addParamToLocalLinks(\n\tparamName: string,\n\tparamValue?: number | string | boolean\n): void {\n\tArray.from( document.querySelectorAll( 'a' ) ).forEach( ( link ) => {\n\t\tconst href = link.getAttribute( 'href' ) || '';\n\t\tif ( isExternalLink( href ) ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\t// TODO. Remove fragment stuff when this pull request is finally merged: https://github.com/WordPress/gutenberg/pull/16656\n\t\tconst cleanUrl = href.replace( /#.*$/, '' );\n\t\tconst fragment = href.replace( /^[^#]*/, '' );\n\t\tconst finalUrl =\n\t\t\taddQueryArgs( cleanUrl, { [ paramName ]: paramValue } ) + fragment;\n\n\t\tlink.setAttribute( 'href', finalUrl );\n\t} );\n} //end addParamToLocalLinks()\n","module.exports = window[\"wp\"][\"url\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress dependencies\n */\nimport type { select as _select, dispatch as _dispatch } from '@wordpress/data';\ntype Select = typeof _select;\ntype Dispatch = typeof _dispatch;\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport {\n\tdisableExternalLinks,\n\taddParamToLocalLinks,\n} from '../../../../../packages/utils/links';\nimport {\n\tgetCssSelector,\n\thighlightCssSelector,\n\thighlightHoveredElement,\n} from './highlighter';\n\n// NOTE. No @nab packages in front.\nconst NAB_DATA = 'nab/data';\n\nfunction init() {\n\tif ( ! hasWordPressData( window.parent ) ) {\n\t\tconsole.error( 'Parent window doesn’t have expected API. Bye!' ); // eslint-disable-line\n\t\treturn;\n\t} //end if\n\n\twindow.addEventListener( 'message', reactToParentMessages, false );\n\n\tdisableExternalLinks();\n\taddCssSelectorFinderParamsInAllLinks();\n\tupdateParentWithThisUrl();\n} //end init()\n\ntype Message = {\n\treadonly data?:\n\t\t| { readonly type: 'explore' }\n\t\t| { readonly type: 'highlight'; readonly value: string };\n};\n\nfunction reactToParentMessages( message: Message ): void {\n\tif ( 'explore' === message.data?.type ) {\n\t\tdocument.addEventListener( 'mouseover', highlightHoveredElement );\n\t\tdocument.addEventListener(\n\t\t\t'click',\n\t\t\t( ev ) => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tconst el = ev.target || ev.srcElement;\n\t\t\t\tif ( ! el ) {\n\t\t\t\t\treturn;\n\t\t\t\t} //end if\n\t\t\t\tdispatchCssSelectorForHoveredElement( el as HTMLElement );\n\t\t\t},\n\t\t\t{ once: true }\n\t\t);\n\t} else {\n\t\tdocument.removeEventListener( 'mouseover', highlightHoveredElement );\n\t} //end if\n\n\tif ( 'highlight' === message.data?.type ) {\n\t\thighlightCssSelector( message.data.value );\n\t} //end if\n} //end reactToParentMessages()\n\nfunction dispatchCssSelectorForHoveredElement( element: HTMLElement ): void {\n\tif ( ! hasWordPressData( window.parent ) ) {\n\t\treturn;\n\t} //end if\n\n\tconst { select, dispatch } = window.parent.wp.data;\n\tconst state = select( NAB_DATA ).getPageAttribute(\n\t\t'css-selector/cssSelectorFinderState'\n\t);\n\tif ( undefined === state ) {\n\t\treturn;\n\t} //end if\n\n\tdispatch( NAB_DATA ).setPageAttribute(\n\t\t'css-selector/cssSelectorFinderState',\n\t\t{\n\t\t\t...state,\n\t\t\tmode: 'normal',\n\t\t\tvalue: getCssSelector( element ).replace(\n\t\t\t\t'.nab-disabled-link',\n\t\t\t\t''\n\t\t\t),\n\t\t}\n\t);\n} //end dispatchCssSelectorForHoveredElement()\n\nfunction addCssSelectorFinderParamsInAllLinks() {\n\taddParamToLocalLinks( 'nab-css-selector-finder' );\n\taddParamToLocalLinks( 'experiment', getParamFromUrl( 'experiment' ) );\n\taddParamToLocalLinks( 'alternative', getParamFromUrl( 'alternative' ) );\n} //end addCssSelectorFinderParamsInAllLinks()\n\nfunction getParamFromUrl( paramName: string ) {\n\tconst url = window.location.href; // phpcs:ignore\n\tconst checker = new RegExp( '[&?]' + paramName + '=' );\n\tif ( ! checker.test( url ) ) {\n\t\treturn;\n\t} //end if\n\n\treturn url.replace(\n\t\tnew RegExp( '^.*[&?]' + paramName + '=([^&]+).*$' ),\n\t\t'$1'\n\t);\n} //end getParamFromUrl()\n\nfunction updateParentWithThisUrl() {\n\tif ( ! hasWordPressData( window.parent ) ) {\n\t\treturn;\n\t} //end if\n\n\tconst { select, dispatch } = window.parent.wp.data;\n\tconst state = select( NAB_DATA ).getPageAttribute(\n\t\t'css-selector/cssSelectorFinderState'\n\t);\n\tif ( undefined === state ) {\n\t\treturn;\n\t} //end if\n\n\tdispatch( NAB_DATA ).setPageAttribute(\n\t\t'css-selector/cssSelectorFinderState',\n\t\t{\n\t\t\t...state,\n\t\t\tcurrentUrl: window.location.href, // phpcs:ignore\n\t\t}\n\t);\n} //endupdateParentWithThisUrl()\n\ntype WordPressData = {\n\treadonly wp: {\n\t\treadonly data: {\n\t\t\treadonly select: Select;\n\t\t\treadonly dispatch: Dispatch;\n\t\t};\n\t};\n};\n\nfunction hasWordPressData( win: unknown ): win is WordPressData {\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n\treturn !! ( win as any ).wp.data;\n} //end hasWordPressData()\n\ninit();\n"],"names":[],"sourceRoot":""}