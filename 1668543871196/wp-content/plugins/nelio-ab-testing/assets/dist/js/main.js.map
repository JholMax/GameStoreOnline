{"version":3,"file":"js/main.js","mappings":"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B,8FAAiC;AAC5D,2BAA2B,mBAAO,CAAC,2FAA6B;AAChE,2BAA2B,mBAAO,CAAC,6GAAsC;AACzE,2BAA2B,mBAAO,CAAC,2GAAqC;;AAExE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;AACA,+BAA+B,uBAAuB;AACtD,CAAC;;AAED;AACA;AACA;AACA,2BAA2B,iEAAiE;AAC5F,0BAA0B,8BAA8B;AACxD,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtFa;;AAEb,eAAe,mBAAO,CAAC,2DAAa;;AAEpC;AACA;AACA;AACA;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB,cAAc;AACpC;AACA,GAAG;AACH,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;;;;;;;;;;;AC9BY;;AAEb,iBAAiB,mBAAO,CAAC,0EAAkB,mBAAmB,mBAAO,CAAC,0EAAkB;;;;;;;;;;;;ACF3E;;AAEb;AACA;AACA;AACA;AACA;;;;;;;;;;;ACNA,WAAW,mBAAO,CAAC,+CAAS;;AAE5B;AACA;;AAEA;;;;;;;;;;;ACLA,aAAa,mBAAO,CAAC,mDAAW;AAChC,gBAAgB,mBAAO,CAAC,yDAAc;AACtC,qBAAqB,mBAAO,CAAC,mEAAmB;;AAEhD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;AC3BA,sBAAsB,mBAAO,CAAC,qEAAoB;;AAElD;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;AClBA;AACA,wBAAwB,qBAAM,gBAAgB,qBAAM,IAAI,qBAAM,sBAAsB,qBAAM;;AAE1F;;;;;;;;;;;ACHA,aAAa,mBAAO,CAAC,mDAAW;;AAEhC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;AC7CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;;;;;;;;;;ACrBA,iBAAiB,mBAAO,CAAC,2DAAe;;AAExC;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;ACRA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;AClBA,eAAe,mBAAO,CAAC,qDAAY;AACnC,UAAU,mBAAO,CAAC,2CAAO;AACzB,eAAe,mBAAO,CAAC,qDAAY;;AAEnC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,WAAW,QAAQ,WAAW;AAC9B,WAAW,SAAS;AACpB;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,SAAS;AACpB;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,+CAA+C,iBAAiB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;AC5BA,iBAAiB,mBAAO,CAAC,2DAAe;AACxC,mBAAmB,mBAAO,CAAC,6DAAgB;;AAE3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;AC5BA,WAAW,mBAAO,CAAC,+CAAS;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;ACtBA,eAAe,mBAAO,CAAC,qDAAY;AACnC,eAAe,mBAAO,CAAC,qDAAY;;AAEnC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,WAAW,QAAQ,WAAW;AAC9B,WAAW,SAAS;AACpB;AACA,WAAW,SAAS;AACpB;AACA,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,mBAAmB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;;;;;;;;;;ACpEA,eAAe,mBAAO,CAAC,uDAAa;AACpC,eAAe,mBAAO,CAAC,qDAAY;AACnC,eAAe,mBAAO,CAAC,qDAAY;;AAEnC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;AC/DA;;GAEG;AAC0C;AACJ;AACmB;AAGrD,SAAS,sBAAsB,CAAE,QAAkB;IACzD,4DAAQ,CAAE,cAAM,yBAAkB,CAAE,QAAQ,CAAE,EAA9B,CAA8B,CAAE,CAAC;IACjD,4DAAQ,C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ACA,0BAA0B,cAAc;AACxC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA,6CAA6C;AAC7C;;AAEA;AACA;;AAEA;;AAEA;AACA,oCAAoC,kBAAkB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA,oCAAoC,mBAAmB;AACvD;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,IAAI;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,IAAI;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sDAAsD,gBAAgB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,8CAA8C,GAAG;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,sDAAsD;AACtD;;AAEA,sBAAsB;AACtB;;AAEA,+BAA+B;AAC/B;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,kCAAkC,IAAI;AACtC;;AAEA,8CAA8C;AAC9C;;AAEA,uBAAuB;AACvB;;AAEA,+BAA+B,0CAA0C;AACzE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iDAAiD,IAAI,WAAW,IAAI;AACpE;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC;AACA,sBAAsB,SAAS;AAC/B;AACA,kCAAkC;AAClC;;AAEA;AACA,wDAAwD,EAAE;AAC1D;AACA,wCAAwC;AACxC,4BAA4B,IAAI;AAChC;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf,0BAA0B,EAAE;AAC5B;;AAEA;AACA;AACA,wBAAwB,EAAE,iBAAiB;AAC3C;;AAEA;AACA,0BAA0B,EAAE,UAAU;AACtC;;AAEA;AACA;AACA;AACA,qCAAqC,IAAI;AACzC;AACA,gCAAgC,IAAI;AACpC;;AAEA;AACA,gCAAgC,EAAE,gBAAgB,EAAE,GAAG,aAAa,IAAI;AACxE;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA,6DAA6D,EAAE,WAAW,EAAE;AAC5E;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,eAAe,IAAI;AACzC;;AAEA;AACA,8BAA8B,EAAE,yDAAyD,IAAI;AAC7F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,EAAE;AACxB;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,SAAS;AACjC;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA,0CAA0C,MAAM;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,IAAI,IAAI;;AAE7B;AACA;AACA;AACA;;AAEA;AACA,sBAAsB;AACtB;;AAEA;AACA,sBAAsB;AACtB,yBAAyB,GAAG;AAC5B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kCAAkC,IAAI;AACtC,gCAAgC,EAAE;AAClC,gCAAgC,IAAI;AACpC;AACA;;AAEA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,IAAI;AAC/B;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE;AACvB;AACA;AACA;AACA,qBAAqB,EAAE;AACvB;AACA,sBAAsB,EAAE;AACxB;AACA,sBAAsB,EAAE;AACxB;AACA;AACA;AACA,uBAAuB,EAAE;AACzB,yCAAyC,EAAE;AAC3C;AACA,uBAAuB,IAAI;AAC3B;AACA,+BAA+B,IAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,EAAE;AAC7B;AACA,sBAAsB;AACtB;AACA,sBAAsB;AACtB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,kCAAkC,WAAW;AAC7C;;AAEA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B;AAC1B;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,6CAA6C,OAAO,IAAI,IAAI;AAC5D;AACA,qDAAqD;AACrD;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB;AACA,sBAAsB,QAAQ,IAAI;AAClC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAwB,IAAI;AAC5B;AACA,wBAAwB,IAAI;AAC5B;AACA,8BAA8B;AAC9B;AACA,+BAA+B;AAC/B;AACA,8BAA8B,IAAI,EAAE;AACpC;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB,IAAI;AAC7B;AACA;;AAEA;;AAEA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,IAAI,6BAA6B;AACzD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,sBAAsB;AACtB;AACA,0CAA0C;AAC1C;AACA,4DAA4D,SAAS;AACrE;AACA,mBAAmB;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,YAAY;;AAEjC;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA,+BAA+B,IAAI,mCAAmC,IAAI;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAa;AACzB;AACA;AACA,QAAQ,gBAAgB;AACxB,MAAM;AACN;AACA,YAAY,UAAc,kBAAkB,wBAAU;AACtD,YAAY,mCAAO;AACnB;AACA,aAAa;AAAA,kGAAC;AACd,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","sources":["webpack://nab/./node_modules/d/index.js","webpack://nab/./node_modules/es5-ext/function/noop.js","webpack://nab/./node_modules/es5-ext/object/assign/index.js","webpack://nab/./node_modules/es5-ext/object/assign/is-implemented.js","webpack://nab/./node_modules/es5-ext/object/assign/shim.js","webpack://nab/./node_modules/es5-ext/object/is-value.js","webpack://nab/./node_modules/es5-ext/object/keys/index.js","webpack://nab/./node_modules/es5-ext/object/keys/is-implemented.js","webpack://nab/./node_modules/es5-ext/object/keys/shim.js","webpack://nab/./node_modules/es5-ext/object/normalize-options.js","webpack://nab/./node_modules/es5-ext/object/valid-value.js","webpack://nab/./node_modules/es5-ext/string/\u0000#/contains/index.js","webpack://nab/./node_modules/es5-ext/string/\u0000#/contains/is-implemented.js","webpack://nab/./node_modules/es5-ext/string/\u0000#/contains/shim.js","webpack://nab/./node_modules/es6-symbol/index.js","webpack://nab/./node_modules/es6-symbol/is-implemented.js","webpack://nab/./node_modules/es6-symbol/is-symbol.js","webpack://nab/./node_modules/es6-symbol/lib/private/generate-name.js","webpack://nab/./node_modules/es6-symbol/lib/private/setup/standard-symbols.js","webpack://nab/./node_modules/es6-symbol/lib/private/setup/symbol-registry.js","webpack://nab/./node_modules/es6-symbol/polyfill.js","webpack://nab/./node_modules/es6-symbol/validate-symbol.js","webpack://nab/./node_modules/ext/global-this/implementation.js","webpack://nab/./node_modules/ext/global-this/index.js","webpack://nab/./node_modules/ext/global-this/is-implemented.js","webpack://nab/./node_modules/lodash/_Symbol.js","webpack://nab/./node_modules/lodash/_baseGetTag.js","webpack://nab/./node_modules/lodash/_baseTrim.js","webpack://nab/./node_modules/lodash/_freeGlobal.js","webpack://nab/./node_modules/lodash/_getRawTag.js","webpack://nab/./node_modules/lodash/_objectToString.js","webpack://nab/./node_modules/lodash/_root.js","webpack://nab/./node_modules/lodash/_trimmedEndIndex.js","webpack://nab/./node_modules/lodash/debounce.js","webpack://nab/./node_modules/lodash/isObject.js","webpack://nab/./node_modules/lodash/isObjectLike.js","webpack://nab/./node_modules/lodash/isSymbol.js","webpack://nab/./node_modules/lodash/now.js","webpack://nab/./node_modules/lodash/throttle.js","webpack://nab/./node_modules/lodash/toNumber.js","webpack://nab/./assets/src/public/tracking/regular/conversions.ts","webpack://nab/./assets/src/public/tracking/regular/heatmaps.ts","webpack://nab/./assets/src/public/tracking/regular/listeners/click-external-link.ts","webpack://nab/./assets/src/public/tracking/regular/listeners/click.ts","webpack://nab/./assets/src/public/tracking/regular/listeners/form-submission.ts","webpack://nab/./assets/src/public/tracking/regular/listeners/index.ts","webpack://nab/./assets/src/public/tracking/regular/listeners/video-playback.ts","webpack://nab/./assets/src/public/tracking/regular/listeners/wc-add-to-cart.ts","webpack://nab/./assets/src/public/tracking/regular/listeners/woocommerce.ts","webpack://nab/./assets/src/public/tracking/regular/sync.ts","webpack://nab/./assets/src/public/tracking/regular/utils.ts","webpack://nab/./assets/src/public/tracking/regular/xpath.ts","webpack://nab/./assets/src/public/utils/actions.ts","webpack://nab/./assets/src/public/utils/cookies.ts","webpack://nab/./assets/src/public/utils/dom-ready.ts","webpack://nab/./assets/src/public/utils/dom.ts","webpack://nab/./assets/src/public/utils/participation.ts","webpack://nab/./assets/src/public/utils/segmentation-rules/browser.ts","webpack://nab/./assets/src/public/utils/segmentation-rules/cookie.ts","webpack://nab/./assets/src/public/utils/segmentation-rules/day-of-week.ts","webpack://nab/./assets/src/public/utils/segmentation-rules/device-type.ts","webpack://nab/./assets/src/public/utils/segmentation-rules/index.ts","webpack://nab/./assets/src/public/utils/segmentation-rules/ip-address.ts","webpack://nab/./assets/src/public/utils/segmentation-rules/language.ts","webpack://nab/./assets/src/public/utils/segmentation-rules/location.ts","webpack://nab/./assets/src/public/utils/segmentation-rules/operating-system.ts","webpack://nab/./assets/src/public/utils/segmentation-rules/query-parameter.ts","webpack://nab/./assets/src/public/utils/segmentation-rules/referring-url.ts","webpack://nab/./assets/src/public/utils/segmentation-rules/time.ts","webpack://nab/./assets/src/public/utils/segmentation-rules/user-login.ts","webpack://nab/./assets/src/public/utils/segmentation-rules/window-width.ts","webpack://nab/./assets/src/public/utils/segments.ts","webpack://nab/./assets/src/public/utils/tracking.ts","webpack://nab/./assets/src/public/utils/url.ts","webpack://nab/./node_modules/type/function/is.js","webpack://nab/./node_modules/type/object/is.js","webpack://nab/./node_modules/type/plain-function/is.js","webpack://nab/./node_modules/type/prototype/is.js","webpack://nab/./node_modules/type/value/is.js","webpack://nab/./node_modules/ua-parser-js/src/ua-parser.js","webpack://nab/./node_modules/uuid/dist/esm-browser/regex.js","webpack://nab/./node_modules/uuid/dist/esm-browser/rng.js","webpack://nab/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://nab/./node_modules/uuid/dist/esm-browser/v4.js","webpack://nab/./node_modules/uuid/dist/esm-browser/validate.js","webpack://nab/webpack/bootstrap","webpack://nab/webpack/runtime/amd options","webpack://nab/webpack/runtime/compat get default export","webpack://nab/webpack/runtime/define property getters","webpack://nab/webpack/runtime/global","webpack://nab/webpack/runtime/hasOwnProperty shorthand","webpack://nab/webpack/runtime/make namespace object","webpack://nab/./assets/src/public/tracking/regular/index.ts"],"sourcesContent":["\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src /*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1 /*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString /*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? require(\"ext/global-this\").Symbol\n\t: require(\"./polyfill\");\n","\"use strict\";\n\nvar global     = require(\"ext/global-this\")\n  , validTypes = { object: true, symbol: true };\n\nmodule.exports = function () {\n\tvar Symbol = global.Symbol;\n\tvar symbol;\n\tif (typeof Symbol !== \"function\") return false;\n\tsymbol = Symbol(\"test symbol\");\n\ttry { String(symbol); }\n\tcatch (e) { return false; }\n\n\t// Return 'true' also for polyfills\n\tif (!validTypes[typeof Symbol.iterator]) return false;\n\tif (!validTypes[typeof Symbol.toPrimitive]) return false;\n\tif (!validTypes[typeof Symbol.toStringTag]) return false;\n\n\treturn true;\n};\n","\"use strict\";\n\nmodule.exports = function (value) {\n\tif (!value) return false;\n\tif (typeof value === \"symbol\") return true;\n\tif (!value.constructor) return false;\n\tif (value.constructor.name !== \"Symbol\") return false;\n\treturn value[value.constructor.toStringTag] === \"Symbol\";\n};\n","\"use strict\";\n\nvar d = require(\"d\");\n\nvar create = Object.create, defineProperty = Object.defineProperty, objPrototype = Object.prototype;\n\nvar created = create(null);\nmodule.exports = function (desc) {\n\tvar postfix = 0, name, ie11BugWorkaround;\n\twhile (created[desc + (postfix || \"\")]) ++postfix;\n\tdesc += postfix || \"\";\n\tcreated[desc] = true;\n\tname = \"@@\" + desc;\n\tdefineProperty(\n\t\tobjPrototype,\n\t\tname,\n\t\td.gs(null, function (value) {\n\t\t\t// For IE11 issue see:\n\t\t\t// https://connect.microsoft.com/IE/feedbackdetail/view/1928508/\n\t\t\t//    ie11-broken-getters-on-dom-objects\n\t\t\t// https://github.com/medikoo/es6-symbol/issues/12\n\t\t\tif (ie11BugWorkaround) return;\n\t\t\tie11BugWorkaround = true;\n\t\t\tdefineProperty(this, name, d(value));\n\t\t\tie11BugWorkaround = false;\n\t\t})\n\t);\n\treturn name;\n};\n","\"use strict\";\n\nvar d            = require(\"d\")\n  , NativeSymbol = require(\"ext/global-this\").Symbol;\n\nmodule.exports = function (SymbolPolyfill) {\n\treturn Object.defineProperties(SymbolPolyfill, {\n\t\t// To ensure proper interoperability with other native functions (e.g. Array.from)\n\t\t// fallback to eventual native implementation of given symbol\n\t\thasInstance: d(\n\t\t\t\"\", (NativeSymbol && NativeSymbol.hasInstance) || SymbolPolyfill(\"hasInstance\")\n\t\t),\n\t\tisConcatSpreadable: d(\n\t\t\t\"\",\n\t\t\t(NativeSymbol && NativeSymbol.isConcatSpreadable) ||\n\t\t\t\tSymbolPolyfill(\"isConcatSpreadable\")\n\t\t),\n\t\titerator: d(\"\", (NativeSymbol && NativeSymbol.iterator) || SymbolPolyfill(\"iterator\")),\n\t\tmatch: d(\"\", (NativeSymbol && NativeSymbol.match) || SymbolPolyfill(\"match\")),\n\t\treplace: d(\"\", (NativeSymbol && NativeSymbol.replace) || SymbolPolyfill(\"replace\")),\n\t\tsearch: d(\"\", (NativeSymbol && NativeSymbol.search) || SymbolPolyfill(\"search\")),\n\t\tspecies: d(\"\", (NativeSymbol && NativeSymbol.species) || SymbolPolyfill(\"species\")),\n\t\tsplit: d(\"\", (NativeSymbol && NativeSymbol.split) || SymbolPolyfill(\"split\")),\n\t\ttoPrimitive: d(\n\t\t\t\"\", (NativeSymbol && NativeSymbol.toPrimitive) || SymbolPolyfill(\"toPrimitive\")\n\t\t),\n\t\ttoStringTag: d(\n\t\t\t\"\", (NativeSymbol && NativeSymbol.toStringTag) || SymbolPolyfill(\"toStringTag\")\n\t\t),\n\t\tunscopables: d(\n\t\t\t\"\", (NativeSymbol && NativeSymbol.unscopables) || SymbolPolyfill(\"unscopables\")\n\t\t)\n\t});\n};\n","\"use strict\";\n\nvar d              = require(\"d\")\n  , validateSymbol = require(\"../../../validate-symbol\");\n\nvar registry = Object.create(null);\n\nmodule.exports = function (SymbolPolyfill) {\n\treturn Object.defineProperties(SymbolPolyfill, {\n\t\tfor: d(function (key) {\n\t\t\tif (registry[key]) return registry[key];\n\t\t\treturn (registry[key] = SymbolPolyfill(String(key)));\n\t\t}),\n\t\tkeyFor: d(function (symbol) {\n\t\t\tvar key;\n\t\t\tvalidateSymbol(symbol);\n\t\t\tfor (key in registry) {\n\t\t\t\tif (registry[key] === symbol) return key;\n\t\t\t}\n\t\t\treturn undefined;\n\t\t})\n\t});\n};\n","// ES2015 Symbol polyfill for environments that do not (or partially) support it\n\n\"use strict\";\n\nvar d                    = require(\"d\")\n  , validateSymbol       = require(\"./validate-symbol\")\n  , NativeSymbol         = require(\"ext/global-this\").Symbol\n  , generateName         = require(\"./lib/private/generate-name\")\n  , setupStandardSymbols = require(\"./lib/private/setup/standard-symbols\")\n  , setupSymbolRegistry  = require(\"./lib/private/setup/symbol-registry\");\n\nvar create = Object.create\n  , defineProperties = Object.defineProperties\n  , defineProperty = Object.defineProperty;\n\nvar SymbolPolyfill, HiddenSymbol, isNativeSafe;\n\nif (typeof NativeSymbol === \"function\") {\n\ttry {\n\t\tString(NativeSymbol());\n\t\tisNativeSafe = true;\n\t} catch (ignore) {}\n} else {\n\tNativeSymbol = null;\n}\n\n// Internal constructor (not one exposed) for creating Symbol instances.\n// This one is used to ensure that `someSymbol instanceof Symbol` always return false\nHiddenSymbol = function Symbol(description) {\n\tif (this instanceof HiddenSymbol) throw new TypeError(\"Symbol is not a constructor\");\n\treturn SymbolPolyfill(description);\n};\n\n// Exposed `Symbol` constructor\n// (returns instances of HiddenSymbol)\nmodule.exports = SymbolPolyfill = function Symbol(description) {\n\tvar symbol;\n\tif (this instanceof Symbol) throw new TypeError(\"Symbol is not a constructor\");\n\tif (isNativeSafe) return NativeSymbol(description);\n\tsymbol = create(HiddenSymbol.prototype);\n\tdescription = description === undefined ? \"\" : String(description);\n\treturn defineProperties(symbol, {\n\t\t__description__: d(\"\", description),\n\t\t__name__: d(\"\", generateName(description))\n\t});\n};\n\nsetupStandardSymbols(SymbolPolyfill);\nsetupSymbolRegistry(SymbolPolyfill);\n\n// Internal tweaks for real symbol producer\ndefineProperties(HiddenSymbol.prototype, {\n\tconstructor: d(SymbolPolyfill),\n\ttoString: d(\"\", function () { return this.__name__; })\n});\n\n// Proper implementation of methods exposed on Symbol.prototype\n// They won't be accessible on produced symbol instances as they derive from HiddenSymbol.prototype\ndefineProperties(SymbolPolyfill.prototype, {\n\ttoString: d(function () { return \"Symbol (\" + validateSymbol(this).__description__ + \")\"; }),\n\tvalueOf: d(function () { return validateSymbol(this); })\n});\ndefineProperty(\n\tSymbolPolyfill.prototype,\n\tSymbolPolyfill.toPrimitive,\n\td(\"\", function () {\n\t\tvar symbol = validateSymbol(this);\n\t\tif (typeof symbol === \"symbol\") return symbol;\n\t\treturn symbol.toString();\n\t})\n);\ndefineProperty(SymbolPolyfill.prototype, SymbolPolyfill.toStringTag, d(\"c\", \"Symbol\"));\n\n// Proper implementaton of toPrimitive and toStringTag for returned symbol instances\ndefineProperty(\n\tHiddenSymbol.prototype, SymbolPolyfill.toStringTag,\n\td(\"c\", SymbolPolyfill.prototype[SymbolPolyfill.toStringTag])\n);\n\n// Note: It's important to define `toPrimitive` as last one, as some implementations\n// implement `toPrimitive` natively without implementing `toStringTag` (or other specified symbols)\n// And that may invoke error in definition flow:\n// See: https://github.com/medikoo/es6-symbol/issues/13#issuecomment-164146149\ndefineProperty(\n\tHiddenSymbol.prototype, SymbolPolyfill.toPrimitive,\n\td(\"c\", SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive])\n);\n","\"use strict\";\n\nvar isSymbol = require(\"./is-symbol\");\n\nmodule.exports = function (value) {\n\tif (!isSymbol(value)) throw new TypeError(value + \" is not a symbol\");\n\treturn value;\n};\n","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of Object.prototype being sealed (via preventExtensions, seal or freeze)\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ is resolved with global context, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? globalThis : require(\"./implementation\");\n","\"use strict\";\n\nmodule.exports = function () {\n\tif (typeof globalThis !== \"object\") return false;\n\tif (!globalThis) return false;\n\treturn globalThis.Array === Array;\n};\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","/**\n * Internal dependencies\n */\nimport domReady from '../../utils/dom-ready';\nimport { sendConversions } from './sync';\nimport { getAllActions, getConvertingGoals } from './utils';\nimport type { ConvertibleAction, Settings } from './types';\n\nexport function initConversionTracking( settings: Settings ): void {\n\tdomReady( () => addActionListeners( settings ) );\n\tdomReady( () => sendConvertingPageViews( settings ) );\n} //end initConversionTracking()\n\ntype ActionListener = ( action: ConvertibleAction ) => false | void;\nconst actionListeners: ActionListener[] = [];\nexport function addActionTypeListeners( al: ActionListener ): void {\n\tactionListeners.push( al );\n} //end addActionTypeListeners()\n\n// =======\n// HELPERS\n// =======\n\nfunction addActionListeners( settings: Settings ) {\n\tgetAllActions( settings.experiments )\n\t\t.filter( ( action ) => 'nab/page-view' !== action.type )\n\t\t.forEach( ( action ) =>\n\t\t\tactionListeners.forEach( ( addListeners ) =>\n\t\t\t\taddListeners( action )\n\t\t\t)\n\t\t);\n} //end addActionListeners()\n\nfunction sendConvertingPageViews( settings: Settings ) {\n\tconst { alternativePostIds, experiments } = settings;\n\n\tconst events = getConvertingGoals(\n\t\texperiments,\n\t\t( action ) =>\n\t\t\t'nab/page-view' === action.type &&\n\t\t\talternativePostIds.includes( action.attributes.postId as number )\n\t);\n\tsendConversions( events, settings );\n} //end sendConvertingPageViews()\n","/**\n * External dependencies\n */\nimport type { ClickEvent, ExperimentId, Maybe, ScrollEvent } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport domReady from '../../utils/dom-ready';\nimport { getCookie } from '../../utils/cookies';\nimport { xPath } from './xpath';\nimport { track } from './sync';\nimport type { HeatmapSummary, Settings } from './types';\n\nconst ROW_HEIGHT_FOR_SHOW_TIME_TRACKING = 50;\nconst SHOW_TIME_UPDATE_INTERVAL_IN_MS = 500;\nconst SHOW_TIME_UPDATE_MAX_DURATION_IN_MS = 2 * 60 * 1000; // 2 minutes\n\nexport function initHeatmapTracking( settings: Settings ): void {\n\tdomReady( () => doInitHeatmapTracking( settings ) );\n} //end initHeatmapTracking()\n\n// =======\n// HELPERS\n// =======\n\nfunction doInitHeatmapTracking( settings: Settings ) {\n\tif ( ! settings.heatmapTracking.length ) {\n\t\treturn;\n\t} //end if\n\n\tconst startTime = new Date().getTime();\n\tdocument.addEventListener( 'click', ( ev ) => {\n\t\tconst event = createClickEventWithoutExperimentInfo(\n\t\t\tev,\n\t\t\tstartTime,\n\t\t\tsettings\n\t\t);\n\t\tif ( ! event ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tconst events = settings.heatmapTracking\n\t\t\t.map( ( { id, type } ) => ( {\n\t\t\t\t...getExperimentInfo( id, type, settings ),\n\t\t\t\t...event,\n\t\t\t} ) )\n\t\t\t.filter( ( { experiment } ) => !! experiment );\n\n\t\ttrack( events, settings );\n\t} );\n\n\tlet maxScroll = window.pageYOffset + window.innerHeight;\n\tdocument.addEventListener( 'scroll', () => {\n\t\tconst bottom = window.pageYOffset + window.innerHeight;\n\t\tif ( bottom > maxScroll ) {\n\t\t\tmaxScroll = bottom;\n\t\t} //end if\n\t} );\n\n\tconst showTimes = new Array(\n\t\tMath.ceil(\n\t\t\tdocument.body.clientHeight / ROW_HEIGHT_FOR_SHOW_TIME_TRACKING\n\t\t)\n\t).fill( 0 ) as number[];\n\tlet numOfShowTimeUpdates = 0;\n\tconst maxNumOfShowTimeUpdates = Math.ceil(\n\t\tSHOW_TIME_UPDATE_MAX_DURATION_IN_MS / SHOW_TIME_UPDATE_INTERVAL_IN_MS\n\t);\n\tfunction updateShowTimes() {\n\t\tconst top = window.pageYOffset;\n\t\tconst bottom = top + window.innerHeight;\n\n\t\tconst firstVisibleRow = Math.ceil(\n\t\t\ttop / ROW_HEIGHT_FOR_SHOW_TIME_TRACKING\n\t\t);\n\t\tconst lastVisibleRow = Math.min(\n\t\t\tMath.floor( bottom / ROW_HEIGHT_FOR_SHOW_TIME_TRACKING ),\n\t\t\tshowTimes.length\n\t\t);\n\n\t\tfor ( let row = firstVisibleRow; row <= lastVisibleRow; ++row ) {\n\t\t\t++showTimes[ row ];\n\t\t} //end for\n\n\t\t++numOfShowTimeUpdates;\n\t\tif ( numOfShowTimeUpdates < maxNumOfShowTimeUpdates ) {\n\t\t\tsetTimeout( updateShowTimes, SHOW_TIME_UPDATE_INTERVAL_IN_MS );\n\t\t} //end if\n\t} //end updateShowTimes()\n\tsetTimeout( updateShowTimes, SHOW_TIME_UPDATE_INTERVAL_IN_MS );\n\n\twindow.addEventListener( 'beforeunload', () => {\n\t\tconst event: Omit< ScrollEvent, 'experiment' | 'alternative' > = {\n\t\t\t...createPartialScrollEvent(),\n\t\t\tsweetSpot: findSweetSpot( showTimes ),\n\t\t\tmaxScroll,\n\t\t};\n\t\tconst events = settings.heatmapTracking.map(\n\t\t\t( { id, type } ): ScrollEvent => ( {\n\t\t\t\t...getExperimentInfo( id, type, settings ),\n\t\t\t\t...event,\n\t\t\t} )\n\t\t);\n\n\t\tif ( ! events.length ) {\n\t\t\treturn;\n\t\t} //end if\n\t\ttrack( events, settings );\n\t} );\n} //end doInitHeatmapTracking()\n\nfunction createClickEventWithoutExperimentInfo(\n\tev: MouseEvent,\n\tstart: number,\n\tsettings: Settings\n): Maybe< Omit< ClickEvent, 'experiment' | 'alternative' > > {\n\tconst target = ( ev.target || ev.srcElement ) as HTMLElement | null;\n\tif ( ! target ) {\n\t\treturn;\n\t} //end if\n\n\tconst rect = target.getBoundingClientRect();\n\tif ( ! rect || ! rect.width || ! rect.height ) {\n\t\treturn;\n\t} //end if\n\n\tconst x = ( ev.clientX - rect.left ) / rect.width;\n\tconst y = ( ev.clientY - rect.top ) / rect.height;\n\n\treturn {\n\t\tkind: 'click',\n\t\ttimeToClick: Math.round( ( new Date().getTime() - start ) / 1000 ),\n\t\twindowWidth: document.body.offsetWidth || 0,\n\t\txpath: xPath( target, settings.optimizeXPath ),\n\t\tx,\n\t\ty,\n\t};\n} //end createClickEventWithoutExperimentInfo()\n\nfunction createPartialScrollEvent(): Omit<\n\tScrollEvent,\n\t'experiment' | 'alternative' | 'maxScroll' | 'sweetSpot'\n> {\n\treturn {\n\t\tkind: 'scroll',\n\t\twindowWidth: document.body.offsetWidth || 0,\n\t\tfirstFold: window.innerHeight,\n\t\tdocumentHeight: document.body.clientHeight,\n\t};\n} //end createPartialScrollEvent()\n\nfunction getExperimentInfo(\n\texperimentId: ExperimentId,\n\ttype: HeatmapSummary[ 'type' ],\n\tsettings: Settings\n) {\n\tif ( 'heatmap' === type ) {\n\t\treturn {\n\t\t\talternative: 0,\n\t\t\texperiment: experimentId,\n\t\t};\n\t} //end if\n\n\tconst val = Number.parseInt( getCookie( 'nabAlternative' ) ?? '' );\n\tconst alternativeCookie = isNaN( val ) ? -1 : val;\n\tif ( -1 === alternativeCookie ) {\n\t\treturn {\n\t\t\talternative: 0,\n\t\t\texperiment: 0,\n\t\t};\n\t} //end if\n\n\tconst experiment = settings.experiments[ experimentId ];\n\treturn {\n\t\talternative: alternativeCookie % experiment.alternatives.length,\n\t\texperiment: experimentId,\n\t};\n} //end getExperimentInfo()\n\nfunction findSweetSpot( showTimes: ReadonlyArray< number > ) {\n\tconst collapsedShowTimes = collapseShowTimes( showTimes );\n\n\tconst sweetSpotValue = collapsedShowTimes.reduce(\n\t\t( maxValue, { value } ) => Math.max( maxValue, value ),\n\t\t0\n\t);\n\tconst sweetSpots = collapsedShowTimes.filter(\n\t\t( { value } ) => value === sweetSpotValue\n\t);\n\n\tconst maxSweetSpotAreaSize = sweetSpots.reduce(\n\t\t( maxSize, { size } ) => Math.max( size, maxSize ),\n\t\t0\n\t);\n\tconst largestSweetSpots = sweetSpots.filter(\n\t\t( { size } ) => size === maxSweetSpotAreaSize\n\t);\n\n\tconst sweetSpot = pickRandom( largestSweetSpots );\n\treturn (\n\t\tROW_HEIGHT_FOR_SHOW_TIME_TRACKING *\n\t\t( sweetSpot.start + Math.floor( sweetSpot.size / 2 ) )\n\t);\n} //end findSweetSpot()\n\nfunction collapseShowTimes( showTimes: ReadonlyArray< number > ) {\n\ttype ScrollRowCount = {\n\t\tstart: number;\n\t\tvalue: number;\n\t\tsize: number;\n\t};\n\n\treturn showTimes.reduce( ( result, value, index ) => {\n\t\tconst last = result[ result.length - 1 ];\n\n\t\tif ( last?.value === value ) {\n\t\t\t++last.size;\n\t\t} else {\n\t\t\tresult.push( { start: index, value, size: 1 } );\n\t\t} //end if\n\n\t\treturn result;\n\t}, [] as ScrollRowCount[] );\n} //end collapseShowTimes()\n\nfunction pickRandom< T >( list: ReadonlyArray< T > ): T {\n\tconst index = Math.round( Math.random() * ( list.length - 1 ) );\n\treturn list[ index ];\n} //end pickRandom()\n","/**\n * External dependencies\n */\nimport type { Attributes } from '../../../../../../packages/conversion-action-library/click-external-link/types';\n\n/**\n * Internal dependencies\n */\nimport { getClosest } from '../../../utils/dom';\nimport { removeQueryArgs } from '../../../utils/url';\nimport type { ConvertibleAction, Convert } from '../types';\n\nexport function isClickExternalLinkAction(\n\taction: ConvertibleAction\n): action is ConvertibleAction< Attributes > {\n\treturn 'nab/click-external-link' === action.type;\n} //end isClickExternalLinkAction()\n\nexport function listenToClickExternalLinkEvent(\n\taction: ConvertibleAction< Attributes >,\n\tconvert: Convert\n): void {\n\tconst maybeConvert = ( anchorTag: HTMLAnchorElement ) => {\n\t\tconst {\n\t\t\tattributes: { mode, value },\n\t\t\texperiment,\n\t\t\tgoal,\n\t\t} = action;\n\t\tconst href = removeQueryArgs(\n\t\t\tanchorTag.getAttribute( 'href' ) ?? '',\n\t\t\t'nab'\n\t\t);\n\n\t\tswitch ( mode ) {\n\t\t\tcase 'exact':\n\t\t\t\treturn href === value && convert( experiment, goal );\n\n\t\t\tcase 'partial':\n\t\t\t\treturn (\n\t\t\t\t\t0 <= href.indexOf( value ) && convert( experiment, goal )\n\t\t\t\t);\n\n\t\t\tcase 'start':\n\t\t\t\treturn href.startsWith( value ) && convert( experiment, goal );\n\n\t\t\tcase 'end':\n\t\t\t\treturn href.endsWith( value ) && convert( experiment, goal );\n\n\t\t\tcase 'regex':\n\t\t\t\ttry {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tnew RegExp( value ).test( href ) &&\n\t\t\t\t\t\tconvert( experiment, goal )\n\t\t\t\t\t);\n\t\t\t\t} catch ( e ) {}\n\t\t} //end switch\n\t};\n\n\tdocument.addEventListener( 'click', ( ev ) => {\n\t\tconst target = ( ev.target || ev.srcElement ) as HTMLElement | null;\n\t\tif ( ! target ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tconst anchorTag = getClosest< HTMLAnchorElement >( target, 'a' );\n\t\tif ( ! anchorTag ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tmaybeConvert( anchorTag );\n\t} );\n\n\tArray.from( document.querySelectorAll< HTMLAnchorElement >( 'a' ) ).forEach(\n\t\t( el ) => {\n\t\t\tel.addEventListener( 'click', () => maybeConvert( el ) );\n\t\t\tel.addEventListener(\n\t\t\t\t'auxclick',\n\t\t\t\t( ev ) => 1 === ev.button && maybeConvert( el )\n\t\t\t);\n\t\t}\n\t);\n} //end listenToClickExternalLinkEvent()\n","/**\n * External dependencies\n */\nimport type { Attributes } from '../../../../../../packages/conversion-action-library/click/types';\n\n/**\n * Internal dependencies\n */\nimport type { ConvertibleAction, Convert } from '../types';\n\nexport function isClickAction(\n\taction: ConvertibleAction\n): action is ConvertibleAction< Attributes > {\n\treturn 'nab/click' === action.type;\n} //end isClickAction()\n\nexport function listenToClickEvent(\n\taction: ConvertibleAction< Attributes >,\n\tconvert: Convert\n): void {\n\tconst {\n\t\tattributes: { mode },\n\t\texperiment,\n\t\tgoal,\n\t} = action;\n\n\tconst value =\n\t\t'id' === mode\n\t\t\t? `#${ action.attributes.value }`\n\t\t\t: action.attributes.value;\n\n\tdocument.addEventListener( 'click', ( ev ) => {\n\t\tconst target = ( ev.target || ev.srcElement ) as HTMLElement | null;\n\t\tif ( ! target?.closest ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tif ( ! target.closest( value ) ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tconvert( experiment, goal );\n\t} );\n\n\tArray.from(\n\t\tdocument.querySelectorAll< HTMLElement >( value )\n\t).forEach( ( el ) =>\n\t\tel.addEventListener( 'click', () => convert( experiment, goal ) )\n\t);\n} //end listenToClickEvent()\n","/**\n * External dependencies\n */\nimport debounce from 'lodash/debounce';\nimport type { ExperimentId } from '@nab/types';\nimport type { Attributes } from '../../../../../../packages/conversion-action-library/form-submission/types';\n\n/**\n * Internal dependencies\n */\nimport domReady from '../../../utils/dom-ready';\nimport { getClosest } from '../../../utils/dom';\nimport { getCookie } from '../../../utils/cookies';\nimport type { AlternativeIndex, ConvertibleAction } from '../types';\n\ntype ExpAlt = {\n\treadonly experiment: ExperimentId;\n\treadonly alternative: AlternativeIndex;\n};\n\nconst formActions = [ 'nab/form-submission', 'nab/wc-order' ];\nexport function isFormSubmissionAction(\n\taction: ConvertibleAction\n): action is ConvertibleAction< Attributes > {\n\treturn formActions.includes( action.type );\n} //end isFormSubmissionAction()\n\nconst actions: ExpAlt[] = [];\nexport function prepareFormForSyncingEventInWordPress(\n\taction: ConvertibleAction< Attributes >\n): void {\n\tconst { experiment, alternative } = action;\n\tactions.push( { experiment, alternative } );\n\taddEventListenersToExtendFormFields();\n} //end prepareFormForSyncingEventInWordPress()\n\n// =======\n// HELPERS\n// =======\n\nconst isJQuery = ( x?: unknown ): x is JQuery =>\n\t!! x && typeof x === 'function' && 'ajaxPrefilter' in x;\n\ntype JQuery = {\n\treadonly ajaxPrefilter: (\n\t\thandler: ( opts: unknown, originalOpts: unknown ) => void\n\t) => void;\n};\n\nconst hasData = ( x?: unknown ): x is { data: unknown } =>\n\t!! x && 'object' === typeof x && 'data' in x;\n\nconst hasAction = ( x?: unknown ): x is { action: unknown } =>\n\t!! x && 'object' === typeof x && 'action' in x;\n\ndomReady( () => {\n\t/* eslint-disable */\n\tconst jQuery = ( window as any ).jQuery;\n\t/* eslint-enable */\n\tif ( ! isJQuery( jQuery ) ) {\n\t\treturn;\n\t} //end if\n\n\tjQuery.ajaxPrefilter( ( opts, oriOpts ) => {\n\t\tif ( ! hasData( oriOpts ) || ! hasAction( oriOpts.data ) ) {\n\t\t\treturn;\n\t\t} //end if\n\t\tif ( 'nf_ajax_submit' !== oriOpts.data.action ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tif ( ! hasData( opts ) || 'string' !== typeof opts.data ) {\n\t\t\treturn;\n\t\t} //end if\n\t\topts.data +=\n\t\t\t'&nab_experiments_with_page_view=' +\n\t\t\tencodeURIComponent( generateExperimentsWithPageViewValue() );\n\t} );\n} );\n\nlet areListenersReady = false;\nfunction addEventListenersToExtendFormFields() {\n\tif ( areListenersReady ) {\n\t\treturn;\n\t} //end if\n\tareListenersReady = true;\n\n\tdocument.addEventListener( 'click', maybeAddHiddenFieldInForm );\n\tdocument.addEventListener( 'click', maybeAddHiddenFieldInForm, true );\n\tdocument.addEventListener( 'keyup', maybeAddHiddenFieldInForm );\n\tdocument.addEventListener( 'keyup', maybeAddHiddenFieldInForm, true );\n} //end addEventListenersToExtendFormFields()\n\nconst maybeAddHiddenFieldInForm = debounce(\n\t( ev: Event ) => {\n\t\tconst target = ( ev.target || ev.srcElement ) as HTMLElement | null;\n\t\tif ( ! target ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tconst form = getClosest< HTMLFormElement >( target, 'form' );\n\t\tif ( ! form ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tconst value = generateExperimentsWithPageViewValue();\n\t\tif ( ! value ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tconst hiddenField = getHiddenField( form );\n\t\thiddenField.setAttribute( 'value', value );\n\t},\n\t1000,\n\t{ leading: true }\n);\n\nfunction getHiddenField( form: HTMLFormElement ): HTMLElement {\n\tlet hiddenField = form.querySelector< HTMLElement >(\n\t\t'input[name=nab_experiments_with_page_view]'\n\t);\n\tif ( hiddenField ) {\n\t\treturn hiddenField;\n\t} //end if\n\n\thiddenField = document.createElement( 'input' );\n\thiddenField.setAttribute( 'type', 'hidden' );\n\thiddenField.setAttribute( 'name', 'nab_experiments_with_page_view' );\n\n\tform.appendChild( hiddenField );\n\n\treturn hiddenField;\n} //end getHiddenField()\n\nfunction generateExperimentsWithPageViewValue() {\n\tconst experiments = getExperimentsWithPageView();\n\tconst relevantActions = actions.filter( ( { experiment } ) =>\n\t\texperiments.includes( experiment )\n\t);\n\treturn relevantActions\n\t\t.map(\n\t\t\t( { experiment, alternative } ) =>\n\t\t\t\t`${ experiment }:${ alternative }`\n\t\t)\n\t\t.join( ',' );\n} //end generateExperimentsWithPageViewValue()\n\nfunction getExperimentsWithPageView(): ReadonlyArray< ExperimentId > {\n\ttry {\n\t\tconst value = JSON.parse(\n\t\t\tgetCookie( 'nabExperimentsWithPageViews' ) ?? ''\n\t\t) as Record< ExperimentId, number >;\n\t\treturn Object.keys( value ).map( ( id ) => Number.parseInt( id ) || 0 );\n\t} catch {\n\t\treturn [];\n\t} //end try\n} //end getExperimentsWithPageView()\n","/**\n * Internal dependencies\n */\nimport './woocommerce';\nimport { addActionTypeListeners } from '../conversions';\n\nimport { isClickAction, listenToClickEvent } from './click';\nimport {\n\tisClickExternalLinkAction,\n\tlistenToClickExternalLinkEvent,\n} from './click-external-link';\nimport {\n\tisFormSubmissionAction,\n\tprepareFormForSyncingEventInWordPress,\n} from './form-submission';\nimport {\n\tisVideoPlaybackAction,\n\tlistenToVideoPlaybackEvent,\n} from './video-playback';\nimport {\n\tisWooCommerceAddToCartAction,\n\tlistenToWooCommerceAddToCartEvent,\n} from './wc-add-to-cart';\n\nimport type { Convert } from '../types';\n\nexport function initDefaultListeners( convert: Convert ): void {\n\taddActionTypeListeners(\n\t\t( action ) =>\n\t\t\tisClickAction( action ) && listenToClickEvent( action, convert )\n\t);\n\n\taddActionTypeListeners(\n\t\t( action ) =>\n\t\t\tisClickExternalLinkAction( action ) &&\n\t\t\tlistenToClickExternalLinkEvent( action, convert )\n\t);\n\n\taddActionTypeListeners(\n\t\t( action ) =>\n\t\t\tisFormSubmissionAction( action ) &&\n\t\t\tprepareFormForSyncingEventInWordPress( action )\n\t);\n\n\taddActionTypeListeners(\n\t\t( action ) =>\n\t\t\tisVideoPlaybackAction( action ) &&\n\t\t\tlistenToVideoPlaybackEvent( action, convert )\n\t);\n\n\taddActionTypeListeners(\n\t\t( action ) =>\n\t\t\tisWooCommerceAddToCartAction( action ) &&\n\t\t\tlistenToWooCommerceAddToCartEvent( action, convert )\n\t);\n} //end initDefaultListeners()\n","/**\n * External dependencies\n */\nimport throttle from 'lodash/throttle';\nimport type { Attributes } from '../../../../../../packages/conversion-action-library/video-playback/types';\n\n/**\n * Internal dependencies\n */\nimport domReady from '../../../utils/dom-ready';\nimport { onScrollDown } from '../utils';\nimport { addQueryArgs } from '../../../utils/url';\nimport type { ConvertibleAction, Convert } from '../types';\n\nconst YOUTUBE_PLAY = 1;\nconst YOUTUBE_END = 0;\n\nexport function isVideoPlaybackAction(\n\taction: ConvertibleAction\n): action is ConvertibleAction< Attributes > {\n\treturn 'nab/video-playback' === action.type;\n} //end isVideoPlaybackAction()\n\nexport function listenToVideoPlaybackEvent(\n\taction: ConvertibleAction< Attributes >,\n\tconvert: Convert\n): void {\n\tswitch ( action?.attributes?.platform ) {\n\t\tcase 'youtube':\n\t\t\treturn listenToYouTubeVideoPlaybackEvent( action, convert );\n\t} //end switch\n} //end listenToVideoPlaybackEvent()\n\n// =======\n// HELPERS\n// =======\n\nfunction listenToYouTubeVideoPlaybackEvent(\n\taction: ConvertibleAction< Attributes >,\n\tconvert: Convert\n): void {\n\tconst apiReady = loadYouTubeApi();\n\tapiReady( () => {\n\t\taddYouTubeListeners( action, convert );\n\t\tonScrollDown(\n\t\t\tthrottle( () => addYouTubeListeners( action, convert ), 1000 )\n\t\t);\n\t} );\n} //end listenToYouTubeVideoPlaybackEvent()\n\nlet youTubeApiStatus: 'unavailable' | 'loading' | 'ready' = 'unavailable';\nfunction loadYouTubeApi() {\n\tdomReady( () => {\n\t\tif ( 'unavailable' !== youTubeApiStatus ) {\n\t\t\treturn;\n\t\t} //end if\n\t\tyouTubeApiStatus = 'loading';\n\n\t\t// TODO. Improve these types.\n\t\t/* eslint-disable */\n\t\tconst fn: () => void =\n\t\t\t( window as any ).onYouTubeIframeAPIReady ?? ( () => {} );\n\t\t( window as any ).onYouTubeIframeAPIReady = () => {\n\t\t\t/* eslint-enable */\n\t\t\tyouTubeApiStatus = 'ready';\n\t\t\tfn();\n\t\t};\n\n\t\tconst tag = document.createElement( 'script' );\n\t\ttag.src = 'https://www.youtube.com/iframe_api';\n\t\tdocument.head.appendChild( tag );\n\t} );\n\n\treturn ( fn: () => void ) => {\n\t\tconst check = ( attempt: number ) => {\n\t\t\tif ( 'ready' === youTubeApiStatus ) {\n\t\t\t\treturn fn();\n\t\t\t} //end if\n\t\t\tif ( 5 <= attempt ) {\n\t\t\t\treturn;\n\t\t\t} //end if\n\t\t\tsetTimeout( () => check( attempt + 1 ), attempt * 2000 );\n\t\t};\n\t\tcheck( 1 );\n\t};\n} //end loadYouTubeApi()\n\nconst listenedYouTubeIframes: HTMLIFrameElement[] = [];\nfunction addYouTubeListeners(\n\taction: ConvertibleAction< Attributes >,\n\tconvert: Convert\n) {\n\tconst { videoId, event } = action.attributes;\n\tconst { experiment, goal } = action;\n\n\tgetYouTubeIframes( videoId )\n\t\t.filter( ( iframe ) => ! listenedYouTubeIframes.includes( iframe ) )\n\t\t.forEach( ( iframe ) => {\n\t\t\tlistenedYouTubeIframes.push( iframe );\n\t\t\t// TODO. Improve these types.\n\t\t\t/* eslint-disable */\n\t\t\tnew ( window as any ).YT.Player( iframe, {\n\t\t\t\tevents: {\n\t\t\t\t\tonStateChange: ( ev ) => {\n\t\t\t\t\t\tswitch ( ev.data ) {\n\t\t\t\t\t\t\tcase YOUTUBE_PLAY:\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t'play' === event &&\n\t\t\t\t\t\t\t\t\tconvert( experiment, goal )\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tcase YOUTUBE_END:\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t'end' === event &&\n\t\t\t\t\t\t\t\t\tconvert( experiment, goal )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} //end switch\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t} );\n\t\t\t/* eslint-enable */\n\t\t} );\n} //end addYouTubeListeners()\n\nfunction getYouTubeIframes( videoId: string ) {\n\tconst iframes = Array.from(\n\t\tdocument.querySelectorAll< HTMLIFrameElement >(\n\t\t\t`iframe[src*=\"${ videoId }\"]`\n\t\t)\n\t).filter(\n\t\t( iframe ) =>\n\t\t\tiframe.src.includes( 'youtube' ) ||\n\t\t\tiframe.src.includes( 'youtu.be' )\n\t);\n\n\tiframes\n\t\t.filter( ( iframe ) => ! iframe.src.includes( 'enablejsapi' ) )\n\t\t.forEach( ( iframe ) => {\n\t\t\tiframe.src = addQueryArgs( iframe.src, { enablejsapi: 1 } );\n\t\t} );\n\n\treturn iframes;\n} //end getYouTubeIframes()\n","/**\n * External dependencies\n */\nimport type { Attributes } from '../../../../../../packages/conversion-action-library/wc-add-to-cart/types';\nimport type { WooCommerceCartItem } from './woocommerce';\n\n/**\n * Internal dependencies\n */\nimport domReady from '../../../utils/dom-ready';\nimport type { ConvertibleAction, Convert } from '../types';\n\nexport function isWooCommerceAddToCartAction(\n\taction: ConvertibleAction\n): action is ConvertibleAction< Attributes > {\n\treturn 'nab/wc-add-to-cart' === action.type;\n} //end isWooCommerceAddToCartAction()\n\nexport function listenToWooCommerceAddToCartEvent(\n\taction: ConvertibleAction< Attributes >,\n\tconvert: Convert\n): void {\n\tdomReady( () => {\n\t\tconst {\n\t\t\tattributes: { anyProduct, productId },\n\t\t\texperiment,\n\t\t\tgoal,\n\t\t} = action;\n\n\t\tdocument.body.addEventListener(\n\t\t\t'nab-wc-product-added-to-cart',\n\t\t\t( e: CustomEvent< ReadonlyArray< WooCommerceCartItem > > ) => {\n\t\t\t\tif ( anyProduct ) {\n\t\t\t\t\tconvert( experiment, goal );\n\t\t\t\t} else if (\n\t\t\t\t\te.detail.map( ( p ) => p.product_id ).includes( productId )\n\t\t\t\t) {\n\t\t\t\t\tconvert( experiment, goal );\n\t\t\t\t} //end if\n\t\t\t}\n\t\t);\n\t} );\n} //end listenToWooCommerceAddToCartEvent()\n","/**\n * External dependencies\n */\nimport isObject from 'lodash/isObject';\n\n/**\n * Internal dependencies.\n */\nimport domReady from '../../../utils/dom-ready';\n\nconst manageEvents = () => {\n\tif ( ! hasWooCommerceCartFragmentsParams( window ) ) {\n\t\treturn;\n\t} //end if\n\n\tconst previousCartData = getStoredCartData();\n\tconst currentCartData = getWooCommerceCartData();\n\n\t// Purchase cart items.\n\tif (\n\t\tpreviousCartData.items.length > 0 &&\n\t\tcurrentCartData.items.length === 0 &&\n\t\tpreviousCartData.purchased\n\t) {\n\t\tdocument.body.dispatchEvent(\n\t\t\tnew CustomEvent( 'nab-wc-purchase', {\n\t\t\t\tdetail: [ ...previousCartData.items ],\n\t\t\t} )\n\t\t);\n\t} //end if\n\n\tconst addedProducts = currentCartData.items.filter( ( p ) =>\n\t\tpreviousCartData.items.every(\n\t\t\t( pp ) =>\n\t\t\t\tpp.product_id !== p.product_id &&\n\t\t\t\tpp.variation_id === p.variation_id\n\t\t)\n\t);\n\tif ( addedProducts.length ) {\n\t\tdocument.body.dispatchEvent(\n\t\t\tnew CustomEvent( 'nab-wc-product-added-to-cart', {\n\t\t\t\tdetail: [ ...addedProducts ],\n\t\t\t} )\n\t\t);\n\t} //end if\n\n\tstoreCartData( { items: currentCartData.items, purchased: false } );\n};\n\nconst isJQuery = ( x?: unknown ): x is JQuery =>\n\t!! x && 'function' === typeof x;\n\ntype JQuery = ( selector: string | Node ) => JQueryElement;\ntype JQueryElement = {\n\treadonly on: (\n\t\tevent: string,\n\t\tcallback: ( ...args: unknown[] ) => void\n\t) => void;\n};\n\ndomReady( () => {\n\t/* eslint-disable */\n\tconst jQuery = ( window as any ).jQuery;\n\t/* eslint-enable */\n\tif ( ! isJQuery( jQuery ) ) {\n\t\treturn;\n\t} //end if\n\n\tjQuery( 'form.checkout' ).on( 'checkout_place_order_success', () =>\n\t\tsetTimeout( () => {\n\t\t\tconst cartData = getStoredCartData();\n\t\t\tstoreCartData( { ...cartData, purchased: true } );\n\t\t}, 1 )\n\t);\n\n\tjQuery( document.body ).on(\n\t\t'wc_fragments_loaded wc_fragments_refreshed',\n\t\t() => setTimeout( manageEvents, 1 )\n\t);\n} );\n\n/**\n * Helpers\n */\n\nconst hasWooCommerceCartFragmentsParams = (\n\tx: unknown\n): x is {\n\t// eslint-disable-next-line camelcase\n\twc_cart_fragments_params: Partial< WooCommerceCartFragmentsParams >;\n} =>\n\thasOwnProperty( x, 'wc_cart_fragments_params' ) &&\n\tisObject( x.wc_cart_fragments_params );\n\nconst getStoredCartDataKey = (): string => {\n\treturn `nab_${ getWooCommerceCartFragmentsParams().fragment_name }`;\n};\n\nconst getStoredCartData = (): CartData => {\n\tconst key = getStoredCartDataKey();\n\tif ( ! sessionStorage.getItem( key ) ) {\n\t\tstoreCartData( {\n\t\t\tpurchased: false,\n\t\t\titems: getWooCommerceCartData().items,\n\t\t} );\n\t} //end if\n\n\treturn JSON.parse( sessionStorage.getItem( key ) ?? '{}' ) as CartData;\n};\n\nconst storeCartData = ( data: CartData ) => {\n\tsessionStorage.setItem( getStoredCartDataKey(), JSON.stringify( data ) );\n};\n\nfunction getWooCommerceCartData(): WooCommerceCartInfo {\n\tconst fragmentName = getWooCommerceCartFragmentsParams().fragment_name;\n\n\tconst wooCommerceFragments = JSON.parse(\n\t\tsessionStorage.getItem( fragmentName ) ?? '{}'\n\t) as WooCommerceFragments;\n\n\treturn wooCommerceFragments.nab_cart_info;\n} //end getWooCommerceCartData()\n\nfunction getWooCommerceCartFragmentsParams(): WooCommerceCartFragmentsParams {\n\tconst params = hasWooCommerceCartFragmentsParams( window )\n\t\t? window.wc_cart_fragments_params\n\t\t: {};\n\n\treturn {\n\t\tfragment_name: '',\n\t\t...params,\n\t};\n}\n\nfunction hasOwnProperty< Y extends PropertyKey >(\n\tobj: unknown,\n\tprop: Y\n): obj is Record< Y, unknown > {\n\treturn !! obj && typeof obj === 'object' && obj.hasOwnProperty( prop );\n} //end hasOwnProperty()\n\n/**\n * Types\n */\n\ntype CartData = {\n\treadonly purchased: boolean;\n\treadonly items: ReadonlyArray< WooCommerceCartItem >;\n};\n\ntype WooCommerceCartInfo = {\n\treadonly items: ReadonlyArray< WooCommerceCartItem >;\n};\n\nexport type WooCommerceCartItem = {\n\t// eslint-disable-next-line camelcase\n\treadonly product_id: number;\n\t// eslint-disable-next-line camelcase\n\treadonly variation_id: number;\n\treadonly quantity: number;\n\t// eslint-disable-next-line camelcase\n\treadonly line_total: number;\n\t// eslint-disable-next-line camelcase\n\treadonly line_tax: number;\n\t// eslint-disable-next-line camelcase\n\treadonly line_subtotal: number;\n\t// eslint-disable-next-line camelcase\n\treadonly line_subtotal_tax: number;\n};\n\ntype WooCommerceCartFragmentsParams = {\n\t// eslint-disable-next-line camelcase\n\treadonly fragment_name: string;\n};\n\ntype WooCommerceFragments = {\n\t// eslint-disable-next-line camelcase\n\treadonly nab_cart_info: WooCommerceCartInfo;\n};\n","/**\n * External dependencies\n */\nimport { v4 as uuid } from 'uuid';\nimport type {\n\tConversionEvent,\n\tExperimentId,\n\tMaybe,\n\tTrackEvent,\n\tVisitEvent,\n} from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { getCookie } from '../../utils/cookies';\nimport { addQueryArgs } from '../../utils/url';\nimport {\n\tcanSynchEvent,\n\tisStagingSite,\n\tupdateExperimentsWithPageViews,\n} from '../../utils/tracking';\nimport { getActiveSegments } from '../../utils/segments';\n\nimport type {\n\tConvertingGoal,\n\tGoalIndex,\n\tHeatmapSummary,\n\tSettings,\n} from './types';\n\nexport function sendViews(\n\texpIds: ExperimentId | ReadonlyArray< ExperimentId >,\n\tsettings: Settings\n): void {\n\tconst isVisitEvent = ( e?: VisitEvent ): e is VisitEvent => !! e;\n\n\tconst events = ( Array.isArray( expIds ) ? expIds : [ expIds ] )\n\t\t.map( ( id ) => generatePageViewEvent( id, settings ) )\n\t\t.filter( isVisitEvent );\n\n\ttrack( events, settings );\n} //end trackPageViews()\n\nexport function sendConversions(\n\tconvGoals: ConvertingGoal | ReadonlyArray< ConvertingGoal >,\n\tsettings: Settings\n): void {\n\tconst { experiments } = settings;\n\tconst isConvEvent = ( e?: ConversionEvent ): e is ConversionEvent => !! e;\n\tconst events = ( Array.isArray( convGoals ) ? convGoals : [ convGoals ] )\n\t\t.map( ( { experiment, goal } ) =>\n\t\t\tgenerateConversionEvent( experiment, goal, experiments )\n\t\t)\n\t\t.filter( isConvEvent );\n\n\ttrack( events, settings );\n} //end sendConversions()\n\nexport function track(\n\tevents: ReadonlyArray< TrackEvent >,\n\tsettings: Settings\n): void {\n\tupdateExperimentsWithPageViews( events, settings );\n\n\tevents = events.filter( canSynchEvent );\n\tif ( ! events.length ) {\n\t\treturn;\n\t} //end if\n\n\tif ( isStagingSite() ) {\n\t\tevents.forEach( ( event ) => console.info( '[Staging] Event', event ) ); // eslint-disable-line\n\t\treturn;\n\t} //end if\n\n\tconst { siteId, trackingUrl, timezone } = settings;\n\tconst timestamp = new Date().toISOString();\n\tevents = events.map( ( event ) => ( {\n\t\t...event,\n\t\tid: uuid(),\n\t\ttimezone,\n\t\ttimestamp,\n\t} ) );\n\n\tconst url = addQueryArgs( trackingUrl, {\n\t\te: window.btoa( JSON.stringify( events ) ),\n\t\ta: siteId,\n\t} );\n\n\t/* eslint-disable */\n\tconst beaconSent =\n\t\t!! settings.useSendBeacon &&\n\t\t'function' === typeof window.navigator.sendBeacon &&\n\t\t!! window.Blob &&\n\t\twindow.navigator.sendBeacon(\n\t\t\turl,\n\t\t\tnew Blob( [], { 'Content-Type': 'text/plain' } as any )\n\t\t);\n\t/* eslint-enable */\n\n\tif ( ! beaconSent ) {\n\t\tconst image = document.createElement( 'img' );\n\t\timage.setAttribute( 'src', url );\n\t} //end if\n} //end track()\n\nfunction generatePageViewEvent(\n\texperimentId: ExperimentId,\n\tsettings: Settings\n): Maybe< VisitEvent > {\n\tconst { experiments, heatmapTracking } = settings;\n\n\tconst experiment = experiments[ experimentId ];\n\tif ( ! experiment ) {\n\t\treturn maybeGeneratePageViewEventForHeatmap(\n\t\t\texperimentId,\n\t\t\theatmapTracking\n\t\t);\n\t} //end if\n\n\tconst val = Number.parseInt( getCookie( 'nabAlternative' ) ?? '' );\n\tconst alternativeCookie = isNaN( val ) ? -1 : val;\n\tif ( -1 === alternativeCookie ) {\n\t\treturn;\n\t} //end if\n\n\tconst segments = getActiveSegments( experimentId );\n\tif ( ! segments.length ) {\n\t\treturn;\n\t} //end if\n\n\tconst alternative = alternativeCookie % experiment.alternatives.length;\n\n\treturn {\n\t\tkind: 'visit',\n\t\texperiment: experimentId,\n\t\talternative,\n\t\tsegments,\n\t};\n} //end generatePageViewEvent()\n\nfunction maybeGeneratePageViewEventForHeatmap(\n\texperimentId: ExperimentId,\n\theatmapTracking: ReadonlyArray< HeatmapSummary >\n): Maybe< VisitEvent > {\n\tconst ids = heatmapTracking.map( ( { id } ) => id );\n\tif ( ! ids.includes( experimentId ) ) {\n\t\treturn;\n\t} //end if\n\n\treturn {\n\t\tkind: 'visit',\n\t\texperiment: experimentId,\n\t\talternative: 0,\n\t\tsegments: [],\n\t};\n} //end maybeGeneratePageViewEventForHeatmap()\n\nfunction generateConversionEvent(\n\texperimentId: ExperimentId,\n\tgoalIndex: GoalIndex,\n\texperiments: Settings[ 'experiments' ]\n): Maybe< ConversionEvent > {\n\tconst experiment = experiments[ experimentId ];\n\tif ( ! experiment ) {\n\t\treturn;\n\t} //end if\n\n\tif ( experiment.goals.length <= goalIndex ) {\n\t\treturn;\n\t} //end if\n\n\tconst val = Number.parseInt( getCookie( 'nabAlternative' ) ?? '' );\n\tconst alternativeCookie = isNaN( val ) ? -1 : val;\n\tif ( undefined === alternativeCookie ) {\n\t\treturn;\n\t} //end if\n\n\tconst segments = getActiveSegments( experimentId );\n\tif ( ! segments.length ) {\n\t\treturn;\n\t} //end if\n\n\tconst alternative = alternativeCookie % experiment.alternatives.length;\n\treturn {\n\t\tkind: 'conversion',\n\t\texperiment: experimentId,\n\t\talternative,\n\t\tgoal: goalIndex,\n\t\tsegments,\n\t};\n} //end generateConversionEvent()\n","/**\n * External dependencies\n */\nimport type { ConversionAction } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { getCookie } from '../../utils/cookies';\nimport type {\n\tConvertibleAction,\n\tConvertingGoal,\n\tGoalSummary,\n\tSettings,\n} from './types';\n\nexport function getAllActions(\n\texperiments: Settings[ 'experiments' ]\n): ReadonlyArray< ConvertibleAction > {\n\tconst val = Number.parseInt( getCookie( 'nabAlternative' ) ?? '' );\n\tconst alternativeCookie = isNaN( val ) ? -1 : val;\n\tif ( -1 === alternativeCookie ) {\n\t\treturn [];\n\t} //end if\n\n\treturn Object.keys( experiments )\n\t\t.map( ( id ) => Number.parseInt( id ) )\n\t\t.filter( ( id ) => ! Number.isNaN( id ) && 0 < id )\n\t\t.reduce( ( result, experimentId ) => {\n\t\t\tconst experiment = experiments[ experimentId ];\n\t\t\texperiment.goals.forEach( ( goal ) => {\n\t\t\t\tconst relevantActions = goal.conversionActions.map(\n\t\t\t\t\t( action ) => ( {\n\t\t\t\t\t\t...action,\n\t\t\t\t\t\texperiment: experimentId,\n\t\t\t\t\t\talternative:\n\t\t\t\t\t\t\talternativeCookie % experiment.alternatives.length,\n\t\t\t\t\t\tgoal: goal.id,\n\t\t\t\t\t} )\n\t\t\t\t);\n\t\t\t\tresult = [ ...result, ...relevantActions ];\n\t\t\t} );\n\n\t\t\treturn result;\n\t\t}, [] as ReadonlyArray< ConvertibleAction > );\n} //end getAllActions()\n\nexport function getConvertingGoals(\n\texperiments: Settings[ 'experiments' ],\n\tactionMatcher: ( act: ConversionAction ) => boolean\n): ReadonlyArray< ConvertingGoal > {\n\treturn Object.keys( experiments )\n\t\t.map( ( id ) => Number.parseInt( id ) )\n\t\t.filter( ( id ) => ! Number.isNaN( id ) && 0 < id )\n\t\t.reduce( ( result, experimentId ) => {\n\t\t\tconst relevantGoals = experiments[\n\t\t\t\texperimentId\n\t\t\t].goals.filter( ( goal ) =>\n\t\t\t\thasMatchingAction( goal, actionMatcher )\n\t\t\t);\n\t\t\tconst eventsFromGoals = relevantGoals.map( ( goal ) => ( {\n\t\t\t\tgoal: goal.id,\n\t\t\t\texperiment: experimentId,\n\t\t\t} ) );\n\n\t\t\treturn [ ...result, ...eventsFromGoals ];\n\t\t}, [] as ReadonlyArray< ConvertingGoal > );\n} //end getConvertingGoals()\n\ntype Fn = () => void;\nconst onScrollDownFns: Fn[] = [];\nexport function onScrollDown( fn: Fn ): void {\n\tonScrollDownFns.push( fn );\n\tif ( 1 === onScrollDownFns.length ) {\n\t\tlet maxScroll = window.pageYOffset + window.innerHeight;\n\t\tdocument.addEventListener( 'scroll', () => {\n\t\t\tconst bottom = window.pageYOffset + window.innerHeight;\n\t\t\tif ( bottom <= maxScroll ) {\n\t\t\t\treturn;\n\t\t\t} //end if\n\t\t\tmaxScroll = bottom;\n\t\t\tonScrollDownFns.forEach( ( f ) => f() );\n\t\t} );\n\t} //end if\n} //end onScrollDown()\n\n// =======\n// HELPERS\n// =======\n\nfunction hasMatchingAction(\n\tgoal: GoalSummary,\n\tactionMatcher: ( action: ConversionAction ) => boolean\n): boolean {\n\treturn goal.conversionActions.reduce(\n\t\t( memo, action ) => memo || actionMatcher( action ),\n\t\tfalse\n\t);\n} //end hasMatchingAction()\n","const Node = window.Node;\nconst XPathResult = window.XPathResult;\n\ntype Step = {\n\treadonly value: string;\n\treadonly optimized: boolean;\n};\n\n// Code from Chromium project.\n// https://github.com/chromium/chromium/blob/master/third_party/blink/renderer/devtools/front_end/elements/DOMPath.js\n\nexport function getElementByXPath( xpath: string ): Node | null {\n\treturn document.evaluate(\n\t\txpath,\n\t\tdocument,\n\t\tnull,\n\t\tXPathResult.FIRST_ORDERED_NODE_TYPE,\n\t\tnull\n\t).singleNodeValue;\n} //end getElementByXPath()\n\nexport function xPath( node: Node, optimized: boolean ): string {\n\tif ( node.nodeType === Node.DOCUMENT_NODE ) {\n\t\treturn '/';\n\t} //end if\n\n\tconst steps: Step[] = [];\n\n\tlet contextNode: Node | null = node;\n\twhile ( contextNode ) {\n\t\tconst step = _xPathValue( contextNode, optimized );\n\t\tif ( ! step ) {\n\t\t\tbreak; // Error - bail out early.\n\t\t} //end if\n\n\t\tsteps.push( step );\n\t\tif ( step.optimized ) {\n\t\t\tbreak;\n\t\t} //end if\n\n\t\tcontextNode = contextNode.parentNode;\n\t} //end while\n\n\tsteps.reverse();\n\tconst path = steps.map( ( s ) => s.value ).join( '/' );\n\treturn steps[ 0 ]?.optimized ? path : `/${ path }`;\n} //end xPath()\n\nfunction _xPathValue( node: Node, optimized: boolean ): Step | null {\n\tconst ownIndex = _xPathIndex( node );\n\tif ( ownIndex === -1 ) {\n\t\treturn null; // Error.\n\t} //end if\n\n\tlet ownValue = '';\n\tswitch ( node.nodeType ) {\n\t\tcase Node.ELEMENT_NODE:\n\t\t\tif ( ! isHTMLElement( node ) ) {\n\t\t\t\tbreak;\n\t\t\t} //end if\n\t\t\tif ( optimized && node.getAttribute( 'id' ) ) {\n\t\t\t\treturn {\n\t\t\t\t\tvalue: `//*[@id=\"${ node.getAttribute( 'id' ) || '' }\"]`,\n\t\t\t\t\toptimized: true,\n\t\t\t\t};\n\t\t\t} //end if\n\t\t\townValue = node.localName;\n\t\t\tbreak;\n\n\t\tcase Node.ATTRIBUTE_NODE:\n\t\t\townValue = `@${ node.nodeName }`;\n\t\t\tbreak;\n\n\t\tcase Node.TEXT_NODE:\n\t\tcase Node.CDATA_SECTION_NODE:\n\t\t\townValue = 'text()';\n\t\t\tbreak;\n\n\t\tcase Node.PROCESSING_INSTRUCTION_NODE:\n\t\t\townValue = 'processing-instruction()';\n\t\t\tbreak;\n\n\t\tcase Node.COMMENT_NODE:\n\t\t\townValue = 'comment()';\n\t\t\tbreak;\n\n\t\tcase Node.DOCUMENT_NODE:\n\t\t\townValue = '';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\townValue = '';\n\t\t\tbreak;\n\t} //end switch\n\n\tif ( ownIndex > 0 ) {\n\t\townValue += `[${ ownIndex }]`;\n\t} //end if\n\n\treturn {\n\t\tvalue: ownValue,\n\t\toptimized: node.nodeType === Node.DOCUMENT_NODE,\n\t};\n}\n\nfunction _xPathIndex( node: Node ): number {\n\t// Returns -1 in case of error,\n\t//          0 if no siblings matching the same expression,\n\t//          <XPath index among the same expression-matching sibling nodes> otherwise.\n\tfunction areNodesSimilar( left: Node, right: Node ): boolean {\n\t\tif ( left === right ) {\n\t\t\treturn true;\n\t\t} //end if\n\n\t\tif ( isHTMLElement( left ) && isHTMLElement( right ) ) {\n\t\t\treturn left.localName === right.localName;\n\t\t} //end if\n\n\t\tif ( left.nodeType === right.nodeType ) {\n\t\t\treturn true;\n\t\t} //end if\n\n\t\t// XPath treats CDATA as text nodes.\n\t\tconst leftType =\n\t\t\tleft.nodeType === Node.CDATA_SECTION_NODE\n\t\t\t\t? Node.TEXT_NODE\n\t\t\t\t: left.nodeType;\n\t\tconst rightType =\n\t\t\tright.nodeType === Node.CDATA_SECTION_NODE\n\t\t\t\t? Node.TEXT_NODE\n\t\t\t\t: right.nodeType;\n\t\treturn leftType === rightType;\n\t} //end areNodesSimilar()\n\n\tconst siblings = node.parentNode ? node.parentNode.children : null;\n\tif ( ! siblings ) {\n\t\treturn 0; // Root node - no siblings.\n\t} //end if\n\n\tlet hasSameNamedElements;\n\tfor ( let i = 0; i < siblings.length; ++i ) {\n\t\tif (\n\t\t\tareNodesSimilar( node, siblings[ i ] ) &&\n\t\t\tsiblings[ i ] !== node\n\t\t) {\n\t\t\thasSameNamedElements = true;\n\t\t\tbreak;\n\t\t} //end if\n\t} //end for\n\n\tif ( ! hasSameNamedElements ) {\n\t\treturn 0;\n\t} //end if\n\n\tlet ownIndex = 1; // XPath indices start with 1.\n\tfor ( let i = 0; i < siblings.length; ++i ) {\n\t\tif ( areNodesSimilar( node, siblings[ i ] ) ) {\n\t\t\tif ( siblings[ i ] === node ) {\n\t\t\t\treturn ownIndex;\n\t\t\t} //end if\n\t\t\t++ownIndex;\n\t\t} //end if\n\t} //end for\n\treturn -1; // An error occurred: |node| not found in parent's children.\n} //end _xPathIndex()\n\nconst isHTMLElement = ( n: Node ): n is HTMLElement =>\n\tNode.ELEMENT_NODE === n.nodeType;\n","export function addSingleAction( name: string, callback: () => void ): void {\n\tif ( ! hasAddSingleAction( window ) ) {\n\t\t// eslint-disable-next-line\n\t\tconsole.error(\n\t\t\t'Nelio A/B Testing - Helper function missing: nabAddSingleAction'\n\t\t);\n\t\treturn;\n\t} //end if\n\twindow.nabAddSingleAction( name, callback );\n} //end addSingleAction()\n\nexport function doSingleAction( name: string ): void {\n\tif ( ! hasDoSingleAction( window ) ) {\n\t\t// eslint-disable-next-line\n\t\tconsole.error(\n\t\t\t'Nelio A/B Testing - Helper function missing: nabDoSingleAction'\n\t\t);\n\t\treturn;\n\t} //end if\n\tsetTimeout( () => {\n\t\tif ( hasDoSingleAction( window ) ) {\n\t\t\twindow.nabDoSingleAction( name );\n\t\t} //end if\n\t}, 1 );\n} //end doSingleAction()\n\nconst hasAddSingleAction = (\n\tw: unknown\n): w is { nabAddSingleAction: ( a: string, fn: () => void ) => void } =>\n\t!! w && 'object' === typeof w && 'nabAddSingleAction' in w;\n\nconst hasDoSingleAction = (\n\tw: unknown\n): w is { nabDoSingleAction: ( a: string ) => void } =>\n\t!! w && 'object' === typeof w && 'nabDoSingleAction' in w;\n","/**\n * External dependencies\n */\nimport type { Maybe } from '@nab/types';\n\ntype CookieOptions = {\n\treadonly path: string;\n\treadonly expires: number;\n};\n\nexport function setCookie(\n\tname: string,\n\tvalue: number | boolean | string,\n\toptions?: Partial< CookieOptions >\n): void {\n\tconst opts: CookieOptions = {\n\t\tpath: '/',\n\t\texpires: 0,\n\t\t...( options || {} ),\n\t};\n\n\tlet cookie = `${ name }=${ encodeURIComponent( value ) };`;\n\n\tif ( 0 < opts.expires ) {\n\t\tconst expiration = new Date(\n\t\t\tnew Date().getTime() + opts.expires * 864e5\n\t\t);\n\t\tcookie += ` expires=${ expiration.toUTCString() };`;\n\t} //end if\n\n\tcookie += ` path=${ opts.path };`;\n\n\tdocument.cookie = cookie;\n} //end setCookie()\n\nexport function getCookie( name: string ): Maybe< string > {\n\tconst cookies = document.cookie\n\t\t.split( ';' )\n\t\t.map( ( cookie ) => cookie.trim() )\n\t\t.reduce( ( memo, cookie ) => {\n\t\t\tmemo[ cookie.split( '=' )[ 0 ] ] = cookie.split( '=' )[ 1 ];\n\t\t\treturn memo;\n\t\t}, {} );\n\n\tif ( ! cookies[ name ] ) {\n\t\treturn;\n\t} //end if\n\treturn decodeURIComponent( cookies[ name ] );\n} //end getCookie()\n\nexport function removeCookie( name: string ): void {\n\tdocument.cookie = `${ name }=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n} //end removeCookie()\n","export default function domReady( callback: () => unknown ): void {\n\tif ( typeof document === 'undefined' ) {\n\t\treturn;\n\t} //end if\n\n\tif (\n\t\tdocument.readyState === 'complete' || // DOMContentLoaded + Images/Styles/etc loaded, so we call directly.\n\t\tdocument.readyState === 'interactive' // DOMContentLoaded fires at this point, so we call directly.\n\t) {\n\t\treturn void callback();\n\t} //end if\n\n\t// DOMContentLoaded has not fired yet, delay callback until then.\n\tdocument.addEventListener( 'DOMContentLoaded', callback );\n} //end domReady()\n","export function getClosest< T extends HTMLElement = HTMLElement >(\n\tnode: HTMLElement,\n\tnodeType: string\n): T | false {\n\tlet currentNode: HTMLElement | null = node;\n\tdo {\n\t\tif ( nodeType.toLowerCase() === currentNode.nodeName.toLowerCase() ) {\n\t\t\treturn currentNode as T;\n\t\t} //end if\n\t\tcurrentNode = currentNode.parentElement;\n\t} while ( currentNode );\n\n\treturn false;\n} //end getClosest()\n","/**\n * Internal dependencies\n */\nimport { getCookie, removeCookie, setCookie } from '../utils/cookies';\nimport type { Settings } from '../alternative-loader/types';\n\ntype ParticipationSettings = Pick<\n\tSettings,\n\t'gdprCookie' | 'participationChance'\n>;\n\nexport function isIE(): boolean {\n\tconst ua = window.navigator.userAgent || '';\n\treturn -1 !== ua.indexOf( 'MSIE ' ) || -1 !== ua.indexOf( 'Trident/' );\n} //end isIE()\n\nexport function doesVisitorParticipate(\n\tsettings: ParticipationSettings\n): boolean {\n\tif ( ! settings ) {\n\t\treturn false;\n\t} //end if\n\n\tif ( isIE() ) {\n\t\treturn false;\n\t} //end if\n\n\tif ( ! areCookiesEnabled() ) {\n\t\treturn false;\n\t} //end if\n\n\tconst { gdprCookie } = settings;\n\tif ( ! isGdprAccepted( gdprCookie ) ) {\n\t\treturn false;\n\t} //end if\n\n\tif ( isVisitorExcludedFromTesting() ) {\n\t\treturn false;\n\t} //end if\n\n\tconst { participationChance } = settings;\n\treturn doesVisitorParticipateAccordingToTheCookie( participationChance );\n} //end doesVisitorParticipate()\n\nexport function isVisitorExcludedFromTesting(): boolean {\n\treturn !! getCookie( 'nabIsVisitorExcluded' );\n} //end isVisitorExcludedFromTesting()\n\n// =======\n// HELPERS\n// =======\n\nfunction areCookiesEnabled() {\n\tsetCookie( 'nabCheckWritePermission', true );\n\tif ( ! getCookie( 'nabCheckWritePermission' ) ) {\n\t\treturn false;\n\t} //end if\n\n\tremoveCookie( 'nabCheckWritePermission' );\n\treturn true;\n} //end areCookiesEnable();\n\nfunction isGdprAccepted( gdprCookie: string | false ) {\n\tif ( ! gdprCookie ) {\n\t\treturn true;\n\t} //end if\n\n\treturn !! getCookie( gdprCookie );\n} //end isGdprAccepted()\n\nfunction doesVisitorParticipateAccordingToTheCookie(\n\tparticipationChance: number\n) {\n\tif (\n\t\t! isVisitorParticipationCookieValid() ||\n\t\tshouldVisitorParticipationCookieBeUpdated( participationChance )\n\t) {\n\t\tgenerateVisitorParticipationCookie( participationChance );\n\t} //end if\n\n\tconst participation = getCookie( 'nabParticipation' );\n\treturn 0 === participation?.indexOf( 'true' );\n} //end doesVisitorParticipateAccordingToTheCookie()\n\nfunction isVisitorParticipationCookieValid() {\n\tconst participation = getCookie( 'nabParticipation' ) || '';\n\treturn /^(true|false),[0-9]{1,3}$/.test( participation );\n} //end isVisitorParticipationCookieValid()\n\nfunction shouldVisitorParticipationCookieBeUpdated(\n\tparticipationChance: number\n) {\n\tconst participation = getCookie( 'nabParticipation' ) || '';\n\treturn participation.split( ',' )[ 1 ] !== `${ participationChance }`;\n} //end shouldVisitorParticipationCookieBeUpdated()\n\nfunction generateVisitorParticipationCookie( participationChance: number ) {\n\tconst random = Math.min( 100, Math.floor( Math.random() * 101 ) );\n\tconst shouldVisitorParticipate =\n\t\trandom <= participationChance ? 'true' : 'false';\n\tsetCookie(\n\t\t'nabParticipation',\n\t\t`${ shouldVisitorParticipate },${ participationChance }`,\n\t\t{ expires: 120 }\n\t);\n} //end generateVisitorParticipationCookie()\n","/**\n * External dependencies\n */\nimport UaParser from 'ua-parser-js';\n\n/**\n * Internal dependencies\n */\nimport type { Attributes } from '../../../../../packages/segmentation-rule-library/rules/browser/types';\n\nexport const type = 'nab/browser';\n\nexport function validate( attributes: Attributes ): boolean {\n\tconst { condition, values } = attributes;\n\n\tconst visitorBrowser = getVisitorBrowser();\n\n\tswitch ( condition ) {\n\t\tcase 'is-equal-to':\n\t\t\treturn values.some( ( { value } ) =>\n\t\t\t\tisSameBrowser( value, visitorBrowser )\n\t\t\t);\n\n\t\tcase 'is-not-equal-to':\n\t\t\treturn values.every(\n\t\t\t\t( { value } ) => ! isSameBrowser( value, visitorBrowser )\n\t\t\t);\n\t} //end switch\n\n\treturn false;\n}\n\nfunction getVisitorBrowser() {\n\tconst parser = new UaParser();\n\tconst browserData = parser.getBrowser();\n\treturn browserData.name;\n} //end getVisitorBrowser()\n\nfunction isSameBrowser( browserName, visitorBrowserName ) {\n\treturn browserName === visitorBrowserName;\n} //end isSameBrowser()\n","/**\n * Internal dependencies\n */\nimport { getCookie } from '../cookies';\nimport type { Attributes } from '../../../../../packages/segmentation-rule-library/rules/cookie/types';\n\nexport const type = 'nab/browser';\n\nexport function validate( attributes: Attributes ): boolean {\n\tconst { name, condition, value } = attributes;\n\n\tconst cookieValue = getCookie( name );\n\n\tswitch ( condition ) {\n\t\tcase 'is-equal-to':\n\t\t\treturn cookieValue === value;\n\n\t\tcase 'is-not-equal-to':\n\t\t\treturn cookieValue !== value;\n\n\t\tcase 'contains':\n\t\t\treturn !! cookieValue?.includes( value );\n\n\t\tcase 'does-not-contain':\n\t\t\treturn ! cookieValue || ! cookieValue.includes( value );\n\n\t\tcase 'exists':\n\t\t\treturn 'undefined' !== typeof cookieValue;\n\n\t\tcase 'does-not-exist':\n\t\t\treturn 'undefined' === typeof cookieValue;\n\t} //end switch\n\n\treturn false;\n}\n","/**\n * Internal dependencies\n */\nimport type { Attributes } from '../../../../../packages/segmentation-rule-library/rules/day-of-week/types';\n\nexport const type = 'nab/day-of-week';\n\nexport function validate( attributes: Attributes ): boolean {\n\tconst DAYS = [\n\t\t'Sunday',\n\t\t'Monday',\n\t\t'Tuesday',\n\t\t'Wednesday',\n\t\t'Thursday',\n\t\t'Friday',\n\t\t'Saturday',\n\t];\n\tconst { condition, values } = attributes;\n\n\tconst visitorDay = new Date().getDay();\n\n\tswitch ( condition ) {\n\t\tcase 'is-equal-to':\n\t\t\treturn values.some( ( { value } ) => value === DAYS[ visitorDay ] );\n\n\t\tcase 'is-not-equal-to':\n\t\t\treturn values.every(\n\t\t\t\t( { value } ) => value !== DAYS[ visitorDay ]\n\t\t\t);\n\t} //end switch\n\n\treturn false;\n}\n","/**\n * External dependencies\n */\nimport UaParser from 'ua-parser-js';\n\n/**\n * Internal dependencies\n */\nimport type { Attributes } from '../../../../../packages/segmentation-rule-library/rules/device-type/types';\n\nexport const type = 'nab/device-type';\n\nexport function validate( attributes: Attributes ): boolean {\n\tconst { condition, values } = attributes;\n\n\tconst parser = new UaParser();\n\tconst visitorDeviceType = parser.getDevice().type || 'desktop';\n\n\tswitch ( condition ) {\n\t\tcase 'is-equal-to':\n\t\t\treturn values.some( ( { value } ) => value === visitorDeviceType );\n\n\t\tcase 'is-not-equal-to':\n\t\t\treturn values.every( ( { value } ) => value !== visitorDeviceType );\n\t} //end switch\n\n\treturn false;\n}\n","/**\n * External dependencies\n */\nimport type { Dict, SegmentationRule } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport * as browser from './browser';\nimport * as cookie from './cookie';\nimport * as dayOfWeek from './day-of-week';\nimport * as deviceType from './device-type';\nimport * as ipAddress from './ip-address';\nimport * as language from './language';\nimport * as location from './location';\nimport * as operatingSystem from './operating-system';\nimport * as queryParameter from './query-parameter';\nimport * as referringUrl from './referring-url';\nimport * as time from './time';\nimport * as userLogin from './user-login';\nimport * as windowWidth from './window-width';\n\ntype Validator = {\n\treadonly type: string;\n\treadonly validate: ( attrs: Dict ) => boolean;\n};\n\nexport const isValidSegmentationRule = ( {\n\ttype,\n\tattributes,\n}: Omit< SegmentationRule, 'id' > ): boolean => {\n\tconst segmentationRuleValidators: ReadonlyArray< Validator > = [\n\t\tbrowser,\n\t\tcookie,\n\t\tdayOfWeek,\n\t\tdeviceType,\n\t\tipAddress,\n\t\tlanguage,\n\t\tlocation,\n\t\toperatingSystem,\n\t\tqueryParameter,\n\t\treferringUrl,\n\t\ttime,\n\t\tuserLogin,\n\t\twindowWidth,\n\t];\n\n\treturn !! segmentationRuleValidators\n\t\t.find( ( validator ) => validator.type === type )\n\t\t?.validate( attributes );\n};\n","/**\n * Internal dependencies\n */\nimport { getSegmentationGeoData } from '../segments';\nimport type { Attributes } from '../../../../../packages/segmentation-rule-library/rules/ip-address/types';\n\nexport const type = 'nab/ip-address';\n\nexport function validate( attributes: Attributes ): boolean {\n\tconst { condition, values } = attributes;\n\n\tconst geoData = getSegmentationGeoData();\n\tconst visitorIp = geoData.ipAddress;\n\tif ( 'string' !== typeof visitorIp ) {\n\t\treturn false;\n\t} //end if\n\n\tswitch ( condition ) {\n\t\tcase 'is-equal-to':\n\t\t\treturn values.some( ( ipPattern ) =>\n\t\t\t\tmatches( visitorIp, ipPattern )\n\t\t\t);\n\n\t\tcase 'is-not-equal-to':\n\t\t\treturn values.every(\n\t\t\t\t( ipPattern ) => ! matches( visitorIp, ipPattern )\n\t\t\t);\n\t} //end switch\n\n\treturn false;\n} //end validate()\n\nfunction matches( ip: string, pattern: string ) {\n\tconst re = pattern.replace( '*', '\\\\d?\\\\d?\\\\d' ).replace( '.', '\\\\.' );\n\treturn new RegExp( re ).test( ip );\n} //end matches()\n","/**\n * Internal dependencies\n */\nimport type { Attributes } from '../../../../../packages/segmentation-rule-library/rules/language/types';\n\nexport const type = 'nab/language';\n\nexport function validate( attributes: Attributes ): boolean {\n\tconst { condition, language } = attributes;\n\n\tconst currentLanguage = ( window.navigator.language || '' ).toLowerCase();\n\n\tswitch ( condition ) {\n\t\tcase 'is-equal-to':\n\t\t\treturn language.some( ( { value } ) =>\n\t\t\t\tcurrentLanguage.startsWith( value )\n\t\t\t);\n\n\t\tcase 'is-not-equal-to':\n\t\t\treturn language.every(\n\t\t\t\t( { value } ) => ! currentLanguage.startsWith( value )\n\t\t\t);\n\t} //end switch\n\n\treturn false;\n}\n","/**\n * Internal dependencies\n */\nimport { getSegmentationGeoData } from '../segments';\nimport type { Attributes } from '../../../../../packages/segmentation-rule-library/rules/location/types';\n\nexport const type = 'nab/location';\n\nexport function validate( attributes: Attributes ): boolean {\n\tconst { condition, location } = attributes;\n\n\tconst geoData = getSegmentationGeoData();\n\tconst visitorLocation = geoData.location;\n\tif ( 'string' !== typeof visitorLocation ) {\n\t\treturn false;\n\t} //end if\n\n\tswitch ( condition ) {\n\t\tcase 'is-equal-to':\n\t\t\treturn location.some( ( { value } ) =>\n\t\t\t\tvisitorLocation.startsWith( value )\n\t\t\t);\n\n\t\tcase 'is-not-equal-to':\n\t\t\treturn location.every(\n\t\t\t\t( { value } ) => ! visitorLocation.startsWith( value )\n\t\t\t);\n\t} //end switch\n\n\treturn false;\n}\n","/**\n * External dependencies\n */\nimport UaParser from 'ua-parser-js';\n\n/**\n * Internal dependencies\n */\nimport type { Attributes } from '../../../../../packages/segmentation-rule-library/rules/operating-system/types';\n\nexport const type = 'nab/operating-system';\n\nexport function validate( attributes: Attributes ): boolean {\n\tconst { condition, values } = attributes;\n\n\tconst visitorOS = getVisitorOS();\n\n\tswitch ( condition ) {\n\t\tcase 'is-equal-to':\n\t\t\treturn values.some( ( { value } ) => isSameOS( value, visitorOS ) );\n\n\t\tcase 'is-not-equal-to':\n\t\t\treturn values.every(\n\t\t\t\t( { value } ) => ! isSameOS( value, visitorOS )\n\t\t\t);\n\t} //end switch\n\n\treturn false;\n}\n\nfunction getVisitorOS() {\n\tconst parser = new UaParser();\n\tconst operatingSystemData = parser.getOS();\n\tlet osName = operatingSystemData.name;\n\n\tif ( 'Windows' === osName && operatingSystemData.version ) {\n\t\tosName += ' ' + operatingSystemData.version;\n\t} //end if\n\n\tif (\n\t\t'Mac OS' === osName &&\n\t\toperatingSystemData.version &&\n\t\toperatingSystemData.version.startsWith( '10' )\n\t) {\n\t\tosName += ' X';\n\t} //end if\n\n\treturn osName;\n} //end getVisitorOS()\n\nfunction isSameOS( operatingSystemName, visitorOS ) {\n\tif (\n\t\t'Windows' === operatingSystemName &&\n\t\t'string' === typeof visitorOS &&\n\t\tvisitorOS.startsWith( 'Windows' )\n\t) {\n\t\treturn true;\n\t} //end if\n\n\treturn operatingSystemName === visitorOS;\n} //end isSameOS()\n","/**\n * Internal dependencies\n */\nimport { getQueryArgs } from '../url';\nimport type { Attributes } from '../../../../../packages/segmentation-rule-library/rules/query-parameter/types';\n\nexport const type = 'nab/query-parameter';\n\nexport function validate( attributes: Attributes ): boolean {\n\tconst { name, condition, value } = attributes;\n\n\tconst queryArgs = getQueryArgs( document.URL );\n\n\tswitch ( condition ) {\n\t\tcase 'is-equal-to':\n\t\t\treturn queryArgs[ name ] === value;\n\n\t\tcase 'is-not-equal-to':\n\t\t\treturn queryArgs[ name ] !== value;\n\n\t\tcase 'contains':\n\t\t\treturn !! queryArgs[ name ]?.includes( value );\n\n\t\tcase 'does-not-contain':\n\t\t\treturn ! queryArgs[ name ] || ! queryArgs[ name ].includes( value );\n\n\t\tcase 'exists':\n\t\t\treturn 'undefined' !== typeof queryArgs[ name ];\n\n\t\tcase 'does-not-exist':\n\t\t\treturn 'undefined' === typeof queryArgs[ name ];\n\t} //end switch\n\n\treturn false;\n}\n","/**\n * Internal dependencies\n */\nimport type { Attributes } from '../../../../../packages/segmentation-rule-library/rules/referring-url/types';\n\nexport const type = 'nab/referring-url';\n\nexport function validate( attributes: Attributes ): boolean {\n\tconst { condition, value } = attributes;\n\n\tconst referrer = document.referrer;\n\n\tswitch ( condition ) {\n\t\tcase 'is-equal-to':\n\t\t\treturn referrer === value;\n\n\t\tcase 'is-not-equal-to':\n\t\t\treturn referrer !== value;\n\n\t\tcase 'contains':\n\t\t\treturn !! referrer?.includes( value );\n\n\t\tcase 'does-not-contain':\n\t\t\treturn ! referrer || ! referrer.includes( value );\n\t} //end switch\n\n\treturn false;\n}\n","/**\n * Internal dependencies\n */\nimport type { Attributes } from '../../../../../packages/segmentation-rule-library/rules/time/types';\n\nexport const type = 'nab/time';\n\nexport function validate( attributes: Attributes ): boolean {\n\tconst PERIODS = [\n\t\t'00-02',\n\t\t'02-04',\n\t\t'04-06',\n\t\t'06-08',\n\t\t'08-10',\n\t\t'10-12',\n\t\t'12-14',\n\t\t'14-16',\n\t\t'16-18',\n\t\t'18-20',\n\t\t'20-22',\n\t\t'22-24',\n\t];\n\tconst { condition, values } = attributes;\n\n\tconst visitorHour = new Date().getHours();\n\tconst visitorPeriod = Math.floor( visitorHour / 2 );\n\n\tswitch ( condition ) {\n\t\tcase 'is-equal-to':\n\t\t\treturn values.some(\n\t\t\t\t( { value } ) => value === PERIODS[ visitorPeriod ]\n\t\t\t);\n\n\t\tcase 'is-not-equal-to':\n\t\t\treturn values.every(\n\t\t\t\t( { value } ) => value !== PERIODS[ visitorPeriod ]\n\t\t\t);\n\t} //end switch\n\n\treturn false;\n}\n","/**\n * Internal dependencies\n */\nimport { getCookie } from '../../utils/cookies';\nimport type { Attributes } from '../../../../../packages/segmentation-rule-library/rules/user-login/types';\n\nexport const type = 'nab/user-login';\n\nexport function validate( attributes: Attributes ): boolean {\n\tconst { condition } = attributes;\n\tconst isUserLoggedIn = !! getCookie( 'nabIsUserLoggedIn' );\n\n\tif ( condition === 'is-logged-in' && isUserLoggedIn ) {\n\t\treturn true;\n\t} //end if\n\n\tif ( condition === 'is-not-logged-in' && isUserLoggedIn === false ) {\n\t\treturn true;\n\t} //end if\n\n\treturn false;\n}\n","/**\n * Internal dependencies\n */\nimport type { Attributes } from '../../../../../packages/segmentation-rule-library/rules/window-width/types';\n\nexport const type = 'nab/window-width';\n\nexport function validate( attributes: Attributes ): boolean {\n\tconst { condition, value, interval } = attributes;\n\n\tconst currentWidth =\n\t\twindow.innerWidth ||\n\t\tdocument.documentElement.clientWidth ||\n\t\tdocument.body.clientWidth;\n\n\tswitch ( condition ) {\n\t\tcase 'is-greater-than':\n\t\t\treturn undefined !== value && currentWidth > value;\n\n\t\tcase 'is-less-than':\n\t\t\treturn undefined !== value && currentWidth < value;\n\n\t\tcase 'between':\n\t\t\treturn (\n\t\t\t\t'number' === typeof interval?.min &&\n\t\t\t\t'number' === typeof interval?.max &&\n\t\t\t\tinterval.min <= currentWidth &&\n\t\t\t\tcurrentWidth <= interval.max\n\t\t\t);\n\t} //end switch\n\n\treturn false;\n}\n","/**\n * External dependencies\n */\nimport type { Dict, ExperimentId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { getCookie, setCookie } from '../utils/cookies';\nimport { isValidSegmentationRule } from './segmentation-rules';\nimport { getExperimentsWithPageViews } from '../utils/tracking';\n\nimport type { ExperimentSummary, Settings } from '../alternative-loader/types';\n\ntype SegmentationSettings = {\n\treadonly activeSegments: Record< ExperimentId, ReadonlyArray< number > >;\n\treadonly geo: {\n\t\treadonly ipAddress: string;\n\t\treadonly location: string;\n\t\treadonly lastUpdate: number;\n\t};\n};\n\nexport async function updateSegmentationSettings(\n\tsettings: Settings,\n\twhenToRecalculateGeoData: 'now' | 'future'\n): Promise< void > {\n\tconst { experiments, whenIsGeoDataRequired, site } = settings;\n\n\tif (\n\t\t! isSegmentationGeoDataOutdated() ||\n\t\twhenToRecalculateGeoData !== whenIsGeoDataRequired\n\t) {\n\t\tupdateActiveSegments( experiments );\n\t\treturn;\n\t} //end if\n\n\ttry {\n\t\tconst res = await window.fetch(\n\t\t\t`https://api.nelioabtesting.com/v1/ipc?siteId=${ site }`\n\t\t);\n\t\tconst data: string = await res.text();\n\t\tconst jsonData = JSON.parse( data ) as Dict;\n\t\tif ( ! hasGeoData( jsonData ) ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tsetSegmentationSettings( {\n\t\t\t...getSegmentationSettings(),\n\t\t\tgeo: {\n\t\t\t\tipAddress: jsonData.ip,\n\t\t\t\tlocation: jsonData.location,\n\t\t\t\tlastUpdate: new Date().toISOString(),\n\t\t\t},\n\t\t} );\n\t} catch ( e ) {}\n\n\tupdateActiveSegments( experiments );\n} //end updateSegmentationSettings()\n\nexport function isVisitorInASegmentOfEveryTest(\n\texperiments: Settings[ 'experiments' ]\n): boolean {\n\tconst activeSegments = getAllActiveSegments();\n\treturn Object.keys( experiments ).every(\n\t\t( experimentId ) => ! isEmptyArray( activeSegments[ experimentId ] )\n\t);\n} //end isVisitorInASegmentOfEveryTest()\n\nexport function getSegmentationGeoData(): Partial<\n\tSegmentationSettings[ 'geo' ]\n> {\n\tconst segmentationSettings = getSegmentationSettings();\n\treturn segmentationSettings.geo || {};\n} //end getSegmentationGeoData()\n\nexport function getActiveSegments(\n\texperimentId: ExperimentId\n): ReadonlyArray< number > {\n\tconst activeSegments = getAllActiveSegments();\n\treturn activeSegments[ experimentId ] || [];\n} //end getActiveSegments()\n\nexport function cleanOldSegments(\n\texperiments: ReadonlyArray< ExperimentId >\n): void {\n\tconst segmentationSettings = getSegmentationSettings();\n\tconst activeSegments = segmentationSettings.activeSegments || {};\n\n\tconst viewedExperimentIds = Object.keys( getExperimentsWithPageViews() )\n\t\t.map( ( id ) => Number.parseInt( id ) )\n\t\t.filter( ( id ) => ! isNaN( id ) && 0 < id );\n\n\t// Remove experiments that do not exist or didn't have views.\n\tconst newActiveSegments = Object.keys( activeSegments )\n\t\t.map( ( experimentId ) => Number.parseInt( experimentId ) )\n\t\t.filter(\n\t\t\t( experimentId ) => ! isNaN( experimentId ) && 0 < experimentId\n\t\t)\n\t\t.reduce( ( result, experimentId ) => {\n\t\t\tif (\n\t\t\t\texperiments.includes( experimentId ) ||\n\t\t\t\tviewedExperimentIds.includes( experimentId )\n\t\t\t) {\n\t\t\t\tresult[ experimentId ] = activeSegments[ experimentId ];\n\t\t\t} //end if\n\t\t\treturn result;\n\t\t}, {} as Record< ExperimentId, ReadonlyArray< number > > );\n\n\tsetSegmentationSettings( {\n\t\t...segmentationSettings,\n\t\tactiveSegments: newActiveSegments,\n\t} );\n} //end cleanOldSegments()\n\nexport function getSegmentationSettings(): Partial< SegmentationSettings > {\n\ttry {\n\t\treturn JSON.parse(\n\t\t\tgetCookie( 'nabSegmentation' ) || '{}'\n\t\t) as Partial< SegmentationSettings >;\n\t} catch ( e ) {\n\t\treturn {};\n\t} //end try\n} //end getSegmentationSettings()\n\n// =======\n// HELPERS\n// =======\n\nfunction getAllActiveSegments() {\n\tconst segmentationSettings = getSegmentationSettings();\n\tconst activeSegments = segmentationSettings.activeSegments || {};\n\treturn activeSegments;\n} //end getAllActiveSegments()\n\nfunction setSegmentationSettings( settings ) {\n\tsetCookie( 'nabSegmentation', JSON.stringify( settings ), {\n\t\texpires: 120,\n\t} );\n} //end setSegmentationSettings()\n\nfunction isSegmentationGeoDataOutdated() {\n\tconst geoData = getSegmentationGeoData();\n\tif ( ! geoData.lastUpdate ) {\n\t\treturn true;\n\t} //end if\n\n\tconst lastUpdate = geoData.lastUpdate;\n\tconst now = new Date().getTime();\n\tconst lastUpdateDate = new Date( lastUpdate ).getTime();\n\tconst diffTime = Math.abs( now - lastUpdateDate );\n\tconst diffDays = Math.ceil( diffTime / ( 1000 * 60 * 60 * 24 ) );\n\n\treturn isNaN( diffDays ) || diffDays > 7; // Update segmentation data every week.\n} //end isSegmentationGeoDataOutdated()\n\nfunction updateActiveSegments( experiments: Settings[ 'experiments' ] ) {\n\tconst segmentationSettings = getSegmentationSettings();\n\tconst previousActiveSegments = segmentationSettings.activeSegments || {};\n\n\tconst activeSegments = {};\n\tfor ( const experimentId in experiments ) {\n\t\tif ( experiments.hasOwnProperty( experimentId ) ) {\n\t\t\tactiveSegments[ experimentId ] = calculateActiveSegments(\n\t\t\t\texperiments[ experimentId ].segments\n\t\t\t);\n\t\t} //end if\n\t} //end for\n\n\tsetSegmentationSettings( {\n\t\t...segmentationSettings,\n\t\tactiveSegments: {\n\t\t\t...activeSegments,\n\t\t\t...previousActiveSegments,\n\t\t},\n\t} );\n} //end updateActiveSegments()\n\nfunction calculateActiveSegments( segments: ExperimentSummary[ 'segments' ] ) {\n\t// When no segments, return the global segment.\n\tif ( isEmptyArray( segments ) ) {\n\t\treturn [ 0 ];\n\t} //end if\n\n\tconst activeSegments = segments\n\t\t.map( ( { segmentationRules }, index ) =>\n\t\t\tsegmentationRules.every( isValidSegmentationRule ) ? index + 1 : 0\n\t\t)\n\t\t.filter( ( segmentIndex ) => 0 < segmentIndex );\n\n\treturn activeSegments.length ? [ 0, ...activeSegments ] : [];\n} //end calculateActiveSegments()\n\nconst isEmptyArray = ( arr: unknown ): arr is unknown[] =>\n\tArray.isArray( arr ) && ! arr.length;\n\nconst hasGeoData = (\n\tx: Dict\n): x is {\n\treadonly ip: string;\n\treadonly location: string;\n} => !! x.ip && !! x.location;\n","/**\n * External dependencies\n */\nimport type { ExperimentId, TrackEvent } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { getCookie, setCookie } from '../utils/cookies';\nimport type { GoalIndex, Settings } from '../tracking/regular/types';\n\ntype ExpsWithViews = Record< ExperimentId, Timestamp >;\ntype Timestamp = number;\n\nexport function isStagingSite(): boolean {\n\treturn !! getCookie( 'nabIsStagingSite' );\n} //end isStagingSite()\n\nexport function updateExperimentsWithPageViews(\n\tevents: ReadonlyArray< TrackEvent >,\n\tsettings: Settings\n): void {\n\tremoveOldExperimentsFromCookie( settings.experiments );\n\n\tevents = events.filter( ( event ) => 'visit' === event.kind );\n\tif ( ! events.length ) {\n\t\treturn;\n\t} //end if\n\n\tconst now = new Date().getTime();\n\tsetExperimentsWithPageViewsCookie( {\n\t\t...getExperimentsWithPageViews(),\n\t\t...events.reduce( ( result, event ) => {\n\t\t\tresult[ event.experiment ] = now;\n\t\t\treturn result;\n\t\t}, {} as ExpsWithViews ),\n\t} );\n} //end updateExperimentsWithPageViews()\n\nexport function canSynchEvent( event: TrackEvent ): boolean {\n\tif ( 'visit' === event.kind ) {\n\t\treturn true;\n\t} //end if\n\n\tconst experimentsWithPageViews = getExperimentsWithPageViews();\n\tif ( ! experimentsWithPageViews[ event.experiment ] ) {\n\t\treturn false;\n\t} //end if\n\n\treturn (\n\t\t'conversion' !== event.kind ||\n\t\tcanSynchConversion( event.experiment, event.goal )\n\t);\n} //end canSynchEvent()\n\nexport function getExperimentsWithPageViews(): ExpsWithViews {\n\ttry {\n\t\tconst value = getCookie( 'nabExperimentsWithPageViews' ) ?? '';\n\t\treturn JSON.parse( value ) as ExpsWithViews;\n\t} catch ( e ) {\n\t\treturn {};\n\t} //end try\n} //end getExperimentsWithPageViews()\n\n// =======\n// HELPERS\n// =======\n\nlet synchedGoals: ReadonlyArray< string > = [];\nfunction canSynchConversion(\n\texperimentId: ExperimentId,\n\tgoalIndex: GoalIndex\n): boolean {\n\tif ( synchedGoals.includes( `${ experimentId }-${ goalIndex }` ) ) {\n\t\treturn false;\n\t} //end if\n\n\tsynchedGoals = [ ...synchedGoals, `${ experimentId }-${ goalIndex }` ];\n\treturn true;\n} //end canSynchConversion()\n\nfunction setExperimentsWithPageViewsCookie( value: ExpsWithViews ): void {\n\tsetCookie( 'nabExperimentsWithPageViews', JSON.stringify( value ), {\n\t\texpires: 120,\n\t} );\n} //end setExperimentsWithPageViewsCookie()\n\nlet wasCookieCleaned = false;\nfunction removeOldExperimentsFromCookie( experiments ): void {\n\tif ( wasCookieCleaned ) {\n\t\treturn;\n\t} //end if\n\twasCookieCleaned = true;\n\n\tconst experimentsWithPageViews = getExperimentsWithPageViews();\n\tconst experimentIds = Object.keys( experiments ).map( numberify );\n\tconst experimentIdsWithPageViews = Object.keys(\n\t\texperimentsWithPageViews\n\t).map( numberify );\n\n\tconst invalidExperimentIds = experimentIdsWithPageViews.filter(\n\t\t( id ) => ! experimentIds.includes( id )\n\t);\n\n\tconst now = new Date().getTime();\n\tconst TEN_DAYS_IN_MINUTES = 14400;\n\tconst newExperimentsWithPageViews = experimentIdsWithPageViews.reduce(\n\t\t( result, id ) => {\n\t\t\tconst expirationDate = experimentsWithPageViews[ id ];\n\n\t\t\tif ( invalidExperimentIds.includes( id ) ) {\n\t\t\t\tconst minutesToLastValidation =\n\t\t\t\t\tMath.abs( now - expirationDate ) / 60000;\n\t\t\t\tif ( TEN_DAYS_IN_MINUTES < minutesToLastValidation ) {\n\t\t\t\t\treturn result;\n\t\t\t\t} //end if\n\n\t\t\t\treturn { ...result, [ id ]: expirationDate };\n\t\t\t} //end if\n\n\t\t\treturn { ...result, [ id ]: now };\n\t\t},\n\t\t{} as ExpsWithViews\n\t);\n\n\tsetExperimentsWithPageViewsCookie( newExperimentsWithPageViews );\n} //end removeOldExperimentsFromCookie()\n\nconst numberify = ( x: string ) => Number.parseInt( x ) || 0;\n","type ParamValue = string | number | boolean;\n\nexport function buildUrl(\n\turl: string,\n\targs: Record< string, ParamValue > = {},\n\thash?: string\n): string {\n\tconst keys = Object.keys( args );\n\tif ( keys.length ) {\n\t\turl +=\n\t\t\t'?' +\n\t\t\tkeys\n\t\t\t\t.map(\n\t\t\t\t\t( key ) => `${ key }=${ encodeURIComponent( args[ key ] ) }`\n\t\t\t\t)\n\t\t\t\t.map( ( arg ) =>\n\t\t\t\t\t/=$/.test( arg ) ? arg.slice( 0, -1 ) : arg\n\t\t\t\t)\n\t\t\t\t.reduce( ( search, pair ) => `${ search }&${ pair }` );\n\t} //end if\n\n\tif ( hash ) {\n\t\turl += '#' + hash;\n\t} //end if\n\n\treturn url;\n} //end buildUrl()\n\nexport function removeArgsAndHash( url: string ): string {\n\tconst { cleanUrl } = fragments( url );\n\treturn cleanUrl;\n} //end removeArgsAndHash()\n\nexport function getHash( url: string ): string {\n\tconst { hash } = fragments( url );\n\treturn hash;\n} //end getHash()\n\nexport function addQueryArgs(\n\turl: string,\n\targs?: Record< string, ParamValue >\n): string {\n\targs = args ?? {};\n\tconst { cleanUrl, hash } = fragments( url );\n\n\tconst newArgs = {\n\t\t...getQueryArgs( url ),\n\t\t...args,\n\t};\n\treturn buildUrl( cleanUrl, newArgs, hash );\n} //end addQueryArgs()\n\nexport function removeQueryArgs(\n\turl: string,\n\t...names: ReadonlyArray< string >\n): string {\n\turl = url || '';\n\n\tif ( 0 === names.length ) {\n\t\treturn url;\n\t} //end if\n\n\tconst { cleanUrl, hash } = fragments( url );\n\n\tconst args = getQueryArgs( url );\n\tfor ( const key of names ) {\n\t\tdelete args[ key ];\n\t} //end for\n\n\treturn buildUrl( cleanUrl, args, hash );\n} //end removeQueryArgs()\n\nexport function getQueryArgs( url: string ): Record< string, string > {\n\tconst { search } = fragments( url );\n\tif ( ! search ) {\n\t\treturn {};\n\t} //end if\n\tconst args = search.split( '&' );\n\treturn args.reduce( ( res, arg ) => {\n\t\tconst [ key, value = '' ] = arg.split( '=' );\n\t\tif ( key ) {\n\t\t\tres[ key ] = decodeURIComponent( value );\n\t\t} //end if\n\t\treturn res;\n\t}, {} );\n} //end getQueryArgs()\n\n// =======\n// HELPERS\n// =======\n\nfunction fragments( url: string ) {\n\tconst baseUrl =\n\t\t0 <= url.indexOf( '#' ) ? url.substr( 0, url.indexOf( '#' ) ) : url;\n\tconst hash =\n\t\t0 <= url.indexOf( '#' ) ? url.substr( url.indexOf( '#' ) + 1 ) : '';\n\n\tconst cleanUrl =\n\t\t0 <= baseUrl.indexOf( '?' )\n\t\t\t? baseUrl.substr( 0, baseUrl.indexOf( '?' ) )\n\t\t\t: baseUrl;\n\n\tconst search =\n\t\t0 <= baseUrl.indexOf( '?' )\n\t\t\t? baseUrl.substr( baseUrl.indexOf( '?' ) + 1 )\n\t\t\t: '';\n\n\treturn {\n\t\tcleanUrl,\n\t\tsearch,\n\t\thash,\n\t};\n} //end fragments()\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.2\n   Copyright © 2012-2021 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.2',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 255;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK   = 'Facebook';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY).replace(/\\s\\s*$/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,      // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n            // Trident based\n            /(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,               // Avant/IEMobile/SlimBrowser\n            /(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,                                  // Baidu Browser\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Webkit/KHTML based                                               // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ, aka ShouQ\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /\\bqbcore\\/([\\w\\.]+)/i                                              // WeChat Desktop for Windows Built-in Browser\n            ], [VERSION, [NAME, 'WeChat(Win) Desktop']], [\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /yabrowser\\/([\\w\\.]+)/i                                             // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI '+BROWSER]], [\n            /fxios\\/([-\\w\\.]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihu|(qi?ho?o?|360)browser/i                                     // 360\n            ], [[NAME, '360 '+BROWSER]], [\n            /(oculus|samsung|sailfish)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1 '+BROWSER], VERSION], [                      // Oculus/Samsung/Sailfish Browser\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i            // QQBrowser/Baidu App/2345 Browser\n            ], [NAME, VERSION], [\n            /(metasr)[\\/ ]?([\\w\\.]+)/i,                                         // SouGouBrowser\n            /(lbbrowser)/i                                                      // LieBao Browser\n            ], [NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(chromium|instagram)[\\/ ]([-\\w\\.]+)/i                              // Chromium/Instagram\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.]+) .*mobile\\/\\w+ (safari)/i                        // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w\\.]+) .*(mobile ?safari|safari)/i                     // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror/Klar\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i                                              // Links\n            ], [NAME, VERSION]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            // Ordered by popularity\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[pt]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-\\w+|galaxy nexus)/i,\n            /samsung[- ]([-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /\\((ip(?:hone|od)[\\w ]*);/i                                         // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei|honor)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}-[atu]?[ln][01259x][012359][an]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+)(?: bui|\\))/i,                                       // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[12]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+ ([c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi)( bui|\\))/i,                                         // Kindle Fire without Silk\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w)( bui|\\))/i                                          // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w ]*; *(\\w[^;]*);([^;]*)/i               // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n            /(quest( 2)?)/i                                                     // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i           // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| safari)|pda(?=.+windows ce))/i              // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i                                       // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows) nt 6\\.2; (arm)/i,                                        // Windows RT\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,            // Windows Phone\n            /(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, strMapper, windowsVersionMap]], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86)/i                              // Android-x86\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+ ([\\w\\.]+\\w)/i                                         // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,            // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _ua = ua || ((typeof window !== UNDEF_TYPE && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser.major = majorize(_browser.version);\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * External dependencies\n */\nimport 'es6-symbol';\nimport type { ExperimentId } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { initConversionTracking } from './conversions';\nimport { initHeatmapTracking } from './heatmaps';\nimport { initDefaultListeners } from './listeners';\nimport { sendConversions, sendViews } from './sync';\n\nimport { cleanOldSegments } from '../../utils/segments';\nimport { doesVisitorParticipate } from '../../utils/participation';\nimport { addSingleAction, doSingleAction } from '../../utils/actions';\n\nimport type { ConvertingGoal, GoalIndex, Settings } from './types';\n\ntype PendingEvent =\n\t| { type: 'view'; experimentIds: ReadonlyArray< ExperimentId > }\n\t| { type: 'trigger'; eventName: string }\n\t| { type: 'convert'; experiment: ExperimentId; goal: GoalIndex };\n\nlet pendingEvents: ReadonlyArray< PendingEvent > = [];\nlet settings: Settings;\nexport function init( initialSettings: Settings ): void {\n\tif ( ! initialSettings ) {\n\t\treturn;\n\t} //end if\n\n\tif ( settings ) {\n\t\treturn;\n\t} //end if\n\tsettings = initialSettings;\n\n\tif ( ! doesVisitorParticipate( settings ) ) {\n\t\treturn;\n\t} //end if\n\n\tconst experimentIds = Object.keys( settings.experiments )\n\t\t.map( ( id ) => Number.parseInt( id ) )\n\t\t.filter( ( id ) => ! isNaN( id ) && 0 < id );\n\tcleanOldSegments( experimentIds );\n\n\taddSingleAction( 'main-ready', () => {\n\t\tinitDefaultListeners( convert );\n\t\tinitConversionTracking( settings );\n\t\tinitHeatmapTracking( settings );\n\t} );\n\n\tdoSingleAction( 'main-ready' );\n} //end init()\n\nexport function view(\n\texpIds: ExperimentId | ReadonlyArray< ExperimentId >\n): void {\n\tconst experimentIds = Array.isArray( expIds ) ? expIds : [ expIds ];\n\tif ( ! experimentIds.length ) {\n\t\treturn;\n\t} //end if\n\n\tif ( ! settings ) {\n\t\tpendingEvents = [ ...pendingEvents, { type: 'view', experimentIds } ];\n\t\treturn;\n\t} //end if\n\n\tif ( ! doesVisitorParticipate( settings ) ) {\n\t\treturn;\n\t} //end if\n\n\tsendViews( experimentIds, settings );\n} //end view()\n\nexport function trigger( eventName: string ): void {\n\tif ( ! settings ) {\n\t\tpendingEvents = [ ...pendingEvents, { type: 'trigger', eventName } ];\n\t\treturn;\n\t} //end if\n\n\tif ( ! doesVisitorParticipate( settings ) ) {\n\t\treturn;\n\t} //end if\n\n\tconst experimentIds = Object.keys( settings.experiments )\n\t\t.map( ( id ) => Number.parseInt( id ) )\n\t\t.filter( ( id ) => ! Number.isNaN( id ) && 0 < id );\n\tconst { experiments } = settings;\n\tconst events = experimentIds.reduce( ( memo, id ) => {\n\t\tconst experiment = experiments[ id ];\n\t\texperiment.goals.forEach( ( goal, index ) => {\n\t\t\tconst hasCustomEventAction = goal.conversionActions.reduce(\n\t\t\t\t( found, { type, attributes = {} } ) =>\n\t\t\t\t\tfound ||\n\t\t\t\t\t( 'nab/custom-event' === type &&\n\t\t\t\t\t\teventName === attributes.eventName ),\n\t\t\t\tfalse\n\t\t\t);\n\t\t\tif ( hasCustomEventAction ) {\n\t\t\t\tmemo = [ ...memo, { experiment: id, goal: index } ];\n\t\t\t} //end if\n\t\t} );\n\t\treturn memo;\n\t}, [] as ReadonlyArray< ConvertingGoal > );\n\n\tsendConversions( events, settings );\n} //end trigger()\n\nexport function convert(\n\texperiment: ExperimentId | ReadonlyArray< ConvertingGoal >,\n\tgoal?: GoalIndex\n): void {\n\tconst isExperimentId = (\n\t\te: ExperimentId | ReadonlyArray< ConvertingGoal >\n\t): e is ExperimentId => 'number' === typeof e;\n\n\tlet events: ReadonlyArray< ConvertingGoal > = [];\n\tif ( isExperimentId( experiment ) ) {\n\t\tif ( undefined !== goal ) {\n\t\t\tevents = [ { experiment, goal } ];\n\t\t} //end if\n\t} else {\n\t\tevents = experiment;\n\t} //end if\n\n\tif ( ! settings ) {\n\t\tpendingEvents = [\n\t\t\t...pendingEvents,\n\t\t\t...events.map( ( ev ) => ( {\n\t\t\t\ttype: 'convert' as const,\n\t\t\t\t...ev,\n\t\t\t} ) ),\n\t\t];\n\t\treturn;\n\t} //end if\n\n\tif ( ! doesVisitorParticipate( settings ) ) {\n\t\treturn;\n\t} //end if\n\n\tsendConversions(\n\t\tevents.map( ( ev ) => ( {\n\t\t\texperiment: ev.experiment,\n\t\t\tgoal: ev.goal,\n\t\t} ) ),\n\t\tsettings\n\t);\n} //end convert()\n\nexport function debug(): Settings {\n\treturn settings;\n} //end debug()\n\naddSingleAction( 'main-ready', () => {\n\tpendingEvents.forEach( ( event ) => {\n\t\tswitch ( event.type ) {\n\t\t\tcase 'view':\n\t\t\t\treturn view( event.experimentIds );\n\t\t\tcase 'trigger':\n\t\t\t\treturn trigger( event.eventName );\n\t\t\tcase 'convert':\n\t\t\t\treturn convert( event.experiment, event.goal );\n\t\t} //end switch\n\t} );\n\tpendingEvents = [];\n} );\n\naddSingleAction( 'valid-content', () => {\n\tdoSingleAction( 'main-init-available' );\n} );\n"],"names":[],"sourceRoot":""}