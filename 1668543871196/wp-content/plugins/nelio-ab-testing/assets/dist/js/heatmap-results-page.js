!function(){var e={4184:function(e,t){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var l=r.apply(null,n);l&&e.push(l)}}else if("object"===i)if(n.toString===Object.prototype.toString)for(var o in n)a.call(n,o)&&n[o]&&e.push(o);else e.push(n.toString())}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},891:function(e,t,n){var a=n(9196);function r(e){return a.createElement("svg",e,[a.createElement("path",{d:"m 30.394599,11.329607 c -1.338883,0 -2.64191,0.151343 -3.89386,0.438252 0.08461,0.283987 0.174933,0.617103 0.293657,1.038323 0.163124,0.516717 0.285081,0.884774 0.365967,1.102181 l 2.595883,8.591984 c 0.802654,-0.0356 1.620972,-0.07477 2.285238,-0.09319 0.516585,-0.02808 1.035856,-0.04669 1.566019,-0.0601 0.530169,-0.01471 0.932275,-0.0245 1.204331,-0.0381 0.285478,-0.01351 0.600657,-0.02093 0.940501,-0.02093 2.120834,0 3.84244,0.281025 5.174789,0.838307 1.345985,0.5574 2.305734,1.297068 2.876752,2.221413 0.571136,0.910866 0.859649,1.908308 0.859649,2.995902 0,0.842838 -0.186201,1.647319 -0.553241,2.408631 -0.353442,0.747739 -0.800989,1.366073 -1.344755,1.855445 -0.502987,0.475774 -1.060696,0.84725 -1.67244,1.119192 -0.611725,0.258248 -1.290724,0.497479 -2.038392,0.714905 2.161598,0.136121 3.974519,0.754495 5.442863,1.855425 0.382774,0.287028 0.717093,0.598819 1.00006,0.940401 1.432747,-2.524381 2.251216,-5.443207 2.251216,-8.553549 0,-9.584974 -7.769211,-17.354156 -17.354185,-17.354175 z m -7.796193,1.846916 c -0.0356,0.0171 -0.07101,0.03313 -0.106611,0.05151 l -3.732122,10.468659 h 6.936573 l -3.098062,-10.51977 z m -2.272487,1.370268 c -4.411499,3.14665 -7.289755,8.305912 -7.289755,14.136971 0,1.835053 0.289242,3.603866 0.817121,5.26412 0.297332,-1.74341 0.854363,-3.545967 1.442634,-5.396048 0.0064,-0.01948 0.01717,-0.04901 0.02576,-0.07226 0.0019,-0.01173 0.0034,-0.022 0.0042,-0.03434 l 4.557679,-12.600711 c 0.0796,-0.222195 0.238742,-0.683264 0.442573,-1.297944 z m 14.711504,9.247326 c -0.774863,0 -1.53757,0.06743 -2.285258,0.20431 v 9.911197 h 1.914993 c 1.944131,0 3.309572,-0.450892 4.098128,-1.36178 0.802062,-0.910849 1.204344,-2.132853 1.204344,-3.655536 0,-1.386685 -0.386897,-2.585576 -1.161765,-3.591683 -0.774867,-1.005968 -2.030246,-1.506468 -3.770423,-1.506468 z m -16.562675,1.574559 c -2.19727,6.605809 1.994456,8.626249 1.506475,12.426236 -0.207367,1.615618 -1.251989,2.408073 -2.421408,2.570348 2.574433,2.826631 6.071085,4.798134 10.013326,5.442863 0.111447,-0.04901 0.206762,-0.104273 0.285067,-0.170277 0.271989,-0.217434 0.439008,-0.604364 0.506433,-1.161746 0.08083,-0.556671 0.123244,-1.451553 0.123414,-2.672503 v -6.685463 c -0.03561,-1.147038 -0.06136,-2.172383 -0.531898,-3.936384 -0.122516,-0.503123 -0.315449,-1.205011 -0.587301,-2.102245 l -1.119214,-3.71085 H 18.47473 Z m 14.277417,10.047355 v 0.0041 10.25589 c 0.231102,0.01351 0.481333,0.03311 0.753214,0.06012 0.02685,0.0019 0.06976,0.003 0.09838,0.0041 3.109689,-0.581202 5.925942,-1.990279 8.213241,-3.991739 0.04473,-0.311912 0.07334,-0.638769 0.07334,-0.987348 0,-0.829363 -0.186201,-1.644913 -0.553241,-2.446928 -0.353461,-0.815789 -1.040133,-1.506586 -2.059616,-2.063987 -1.005965,-0.55752 -2.397999,-0.834151 -4.178974,-0.834151 h -2.344797 z",style:{fill:"#d24633"},key:0}),a.createElement("path",{d:"M 50.460938 14.054688 L 50.460938 16.476562 L 50.460938 28.568359 L 52.865234 28.568359 L 52.865234 16.476562 L 61.296875 16.476562 C 61.988925 16.476562 62.554688 17.040372 62.554688 17.732422 L 62.554688 28.568359 L 64.976562 28.568359 L 64.976562 16.585938 C 64.976562 15.183628 63.847612 14.054688 62.445312 14.054688 L 50.460938 14.054688 z M 67.398438 14.054688 L 67.398438 16.476562 L 81.914062 16.476562 L 81.914062 14.054688 L 67.398438 14.054688 z M 84.335938 14.054688 L 84.335938 26.037109 C 84.335938 27.439419 85.464887 28.568359 86.867188 28.568359 L 98.849609 28.568359 L 98.849609 26.146484 L 88.013672 26.146484 C 87.321622 26.146484 86.757812 25.582675 86.757812 24.890625 L 86.757812 14.054688 L 84.335938 14.054688 z M 101.25391 14.054688 L 101.25391 28.568359 L 103.67578 28.568359 L 103.67578 14.054688 L 101.25391 14.054688 z M 108.61133 14.054688 C 107.20902 14.054688 106.09961 15.182306 106.09961 16.566406 L 106.09961 26.054688 C 106.09961 27.456997 107.22723 28.568359 108.61133 28.568359 L 118.09961 28.568359 C 119.4837 28.568359 120.61328 27.438788 120.61328 26.054688 L 120.61328 16.566406 C 120.61328 15.164096 119.4837 14.054688 118.09961 14.054688 L 108.61133 14.054688 z M 109.75977 16.458984 L 116.93555 16.458984 C 117.6276 16.458984 118.17383 17.022794 118.17383 17.714844 L 118.17383 24.890625 C 118.17383 25.582675 117.6276 26.128906 116.93555 26.128906 L 109.75977 26.128906 C 109.06772 26.128906 108.52148 25.582675 108.52148 24.890625 L 108.52148 17.714844 C 108.52148 17.022794 109.06772 16.458984 109.75977 16.458984 z M 67.398438 20.099609 L 67.398438 22.523438 L 81.914062 22.523438 L 81.914062 20.099609 L 67.398438 20.099609 z M 67.398438 26.146484 L 67.398438 28.568359 L 81.914062 28.568359 L 81.914062 26.146484 L 67.398438 26.146484 z ",style:{fill:"#d24633"},key:1}),a.createElement("path",{d:"M 53.300781 30.166016 L 52.357422 30.275391 L 52.357422 33.126953 L 50.267578 33.126953 L 50.267578 33.943359 L 52.357422 33.943359 L 52.357422 39.900391 C 52.357422 41.807051 53.028936 43.041016 55.117188 43.041016 C 55.716428 43.041016 56.333772 42.841321 56.951172 42.550781 L 56.605469 41.751953 C 56.115179 41.988013 55.571739 42.152344 55.099609 42.152344 C 53.57428 42.152344 53.300781 41.225981 53.300781 39.900391 L 53.300781 33.943359 L 56.625 33.943359 L 56.625 33.126953 L 53.300781 33.126953 L 53.300781 30.166016 z M 84.085938 30.166016 L 83.142578 30.275391 L 83.142578 33.126953 L 81.054688 33.126953 L 81.054688 33.943359 L 83.142578 33.943359 L 83.142578 39.900391 C 83.142578 41.807051 83.814092 43.041016 85.902344 43.041016 C 86.501584 43.041016 87.118928 42.841321 87.736328 42.550781 L 87.390625 41.751953 C 86.900335 41.988013 86.356896 42.152344 85.884766 42.152344 C 84.359437 42.152344 84.085938 41.225981 84.085938 39.900391 L 84.085938 33.943359 L 87.410156 33.943359 L 87.410156 33.126953 L 84.085938 33.126953 L 84.085938 30.166016 z M 92.064453 30.1875 C 91.873183 30.1875 91.686601 30.266494 91.550781 30.402344 C 91.421931 30.531194 91.355469 30.712204 91.355469 30.896484 C 91.355469 31.073354 91.423476 31.246579 91.541016 31.380859 L 91.546875 31.386719 L 91.550781 31.392578 C 91.686601 31.528398 91.873183 31.607422 92.064453 31.607422 C 92.249013 31.607422 92.428137 31.525018 92.560547 31.392578 C 92.692967 31.260158 92.775391 31.081044 92.775391 30.896484 C 92.775391 30.708214 92.692094 30.523978 92.552734 30.398438 C 92.421004 30.269738 92.246033 30.1875 92.064453 30.1875 z M 75.324219 32.927734 C 74.18352 32.927734 73.282424 33.173149 72.648438 33.699219 C 72.039546 34.202219 71.716797 34.861081 71.716797 35.613281 C 71.716797 36.255421 71.884195 36.79311 72.236328 37.1875 L 72.240234 37.191406 L 72.242188 37.193359 C 72.587192 37.551629 73.007704 37.819334 73.494141 37.990234 L 73.498047 37.990234 L 73.501953 37.992188 C 73.984011 38.144407 74.600683 38.287368 75.357422 38.423828 L 75.355469 38.421875 C 76.050646 38.556035 76.590531 38.690973 76.966797 38.820312 L 76.970703 38.822266 L 76.974609 38.822266 C 77.347283 38.935196 77.646264 39.117664 77.888672 39.371094 L 77.892578 39.375 L 77.896484 39.378906 C 78.13027 39.602516 78.25 39.903381 78.25 40.337891 C 78.25 40.941821 78.032544 41.37551 77.568359 41.71875 C 77.568359 41.71875 77.568359 41.720703 77.568359 41.720703 C 77.113337 42.044433 76.361264 42.228516 75.306641 42.228516 C 74.606142 42.228516 73.959125 42.115758 73.359375 41.892578 L 73.357422 41.892578 C 72.765396 41.655228 72.300209 41.368912 71.958984 41.039062 L 71.771484 40.857422 L 71.275391 41.519531 L 71.412109 41.660156 C 71.812989 42.074396 72.368312 42.403643 73.068359 42.658203 C 73.771254 42.913803 74.518975 43.041016 75.306641 43.041016 C 76.492685 43.041016 77.422399 42.816661 78.082031 42.332031 L 78.083984 42.330078 C 78.735545 41.838078 79.080078 41.150221 79.080078 40.337891 C 79.080078 39.720371 78.910416 39.203754 78.556641 38.833984 C 78.223106 38.473774 77.812933 38.209781 77.335938 38.050781 C 76.877786 37.898061 76.27399 37.750362 75.517578 37.601562 L 75.515625 37.599609 L 75.513672 37.599609 C 74.831095 37.477719 74.285342 37.350933 73.882812 37.220703 C 73.496291 37.095653 73.18106 36.904691 72.925781 36.650391 C 72.688975 36.402611 72.564453 36.073841 72.564453 35.613281 C 72.564453 35.046081 72.771096 34.62515 73.214844 34.28125 C 73.661226 33.93286 74.357961 33.738281 75.324219 33.738281 C 75.855692 33.738281 76.366784 33.81568 76.861328 33.96875 C 77.354616 34.12143 77.771251 34.336138 78.115234 34.611328 L 78.300781 34.759766 L 78.796875 34.097656 L 78.626953 33.958984 C 78.240963 33.639554 77.746734 33.393574 77.148438 33.214844 C 76.548469 33.023374 75.938851 32.927734 75.324219 32.927734 z M 64.251953 32.945312 C 61.491833 32.945312 59.277344 35.070591 59.277344 37.994141 C 59.277344 41.117441 61.491833 43.022816 64.251953 43.041016 C 65.813613 43.041016 67.520594 42.405294 68.464844 41.152344 L 67.775391 40.589844 C 67.049041 41.570414 65.541223 42.078125 64.251953 42.078125 C 62.236333 42.078125 60.475141 40.753426 60.275391 38.447266 L 69.083984 38.447266 C 69.465314 34.633936 67.012083 32.945312 64.251953 32.945312 z M 91.650391 33.037109 L 91.650391 33.267578 L 91.650391 43.041016 L 92.480469 43.041016 L 92.480469 33.037109 L 91.650391 33.037109 z M 102.21875 33.072266 C 100.85685 33.090426 99.476922 33.652354 98.732422 34.996094 L 98.732422 33.253906 L 98.732422 33.236328 L 97.787109 33.236328 L 97.787109 43.023438 L 98.021484 43.023438 L 98.021484 43.041016 L 98.390625 43.041016 L 98.390625 43.023438 L 98.75 43.023438 L 98.75 37.576172 C 98.75 35.560552 100.16602 34.033825 102.18164 34.015625 C 104.30621 33.997465 105.66797 35.196749 105.66797 37.412109 L 105.66797 43.041016 L 106.63086 43.041016 L 106.63086 37.394531 C 106.63086 34.670721 104.83361 33.072266 102.21875 33.072266 z M 115.43945 33.304688 C 114.51937 33.304688 113.67673 33.510588 112.92773 33.923828 C 112.17868 34.337098 111.58591 34.923595 111.16016 35.671875 C 110.73302 36.409675 110.52148 37.246819 110.52148 38.167969 C 110.52148 39.089119 110.73383 39.932331 111.16016 40.681641 C 111.5859 41.416991 112.17886 42.002774 112.92578 42.427734 L 112.92773 42.429688 C 113.67673 42.842928 114.51937 43.048828 115.43945 43.048828 C 116.48779 43.048828 117.4246 42.777645 118.22656 42.234375 C 118.83094 41.821865 119.17791 41.201568 119.52734 40.585938 L 119.52734 42.337891 C 119.52734 43.704141 119.20502 44.661649 118.59961 45.255859 L 118.59766 45.257812 L 118.5957 45.259766 C 118.00049 45.866206 117.05779 46.1875 115.7168 46.1875 C 114.94188 46.1875 114.23241 46.062043 113.58398 45.814453 C 112.9343 45.566393 112.37734 45.215222 111.9082 44.757812 L 111.74609 44.597656 L 111.16992 45.173828 L 111.32031 45.337891 C 111.80281 45.859511 112.43208 46.265274 113.19727 46.558594 L 113.19922 46.558594 C 113.97742 46.852014 114.81829 46.998047 115.7168 46.998047 C 117.24255 46.998047 118.41993 46.617419 119.20117 45.824219 L 119.20312 45.822266 C 119.98497 45.039146 120.35742 43.844303 120.35742 42.283203 L 120.35742 33.359375 L 120.12695 33.359375 L 119.52734 33.359375 L 119.52734 35.740234 C 119.17745 35.133314 118.82945 34.522381 118.22461 34.119141 C 117.42299 33.576581 116.48711 33.304687 115.43945 33.304688 z M 64.251953 33.833984 C 66.612593 33.833984 68.192738 35.17864 68.210938 37.59375 L 60.275391 37.59375 C 60.493301 35.1968 62.236333 33.833984 64.251953 33.833984 z M 115.43945 34.117188 C 116.2294 34.117188 116.92516 34.292025 117.54102 34.640625 L 117.54297 34.640625 L 117.54492 34.642578 C 118.17342 34.980108 118.65514 35.450226 119.00391 36.066406 C 119.35251 36.682256 119.52734 37.378019 119.52734 38.167969 C 119.52734 38.957919 119.35141 39.660042 119.00195 40.289062 C 118.65298 40.904582 118.17004 41.381009 117.54102 41.730469 C 116.92521 42.067049 116.22985 42.236328 115.43945 42.236328 C 114.64904 42.236328 113.94538 42.065926 113.31641 41.728516 L 113.31445 41.728516 C 112.6998 41.379206 112.22344 40.902699 111.875 40.287109 C 111.52615 39.658509 111.35156 38.957229 111.35156 38.167969 C 111.35156 37.378019 111.5264 36.682256 111.875 36.066406 C 112.22431 35.449266 112.70013 34.979788 113.31641 34.642578 L 113.31641 34.640625 L 113.31836 34.640625 C 113.94737 34.291165 114.6495 34.117188 115.43945 34.117188 z ",style:{fill:"#60609f"},key:2})])}r.defaultProps={viewBox:"0 0 133.64975 57.137734"},e.exports=r,r.default=r},9196:function(e){"use strict";e.exports=window.React}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};!function(){"use strict";n.r(a),n.d(a,{initPage:function(){return Te}});var e=window.wp.element,t=window.wp.data,r=window.wp.domReady,i=n.n(r),l=window.lodash,o=window.nab.data,s=window.nab.experimentLibrary,c=window.nab.utils,u=window.wp.i18n,m=n(891),p=n.n(m),d=function(){return e.createElement("div",{className:"nab-heatmap-no-longer-available"},e.createElement(p(),{className:"nab-heatmap-no-longer-available__logo",title:"Nelio A/B Testing",alt:"Nelio A/B Testing"}),e.createElement("h1",{className:"nab-heatmap-no-longer-available__title"},(0,u._x)("Heatmap not found","text","nelio-ab-testing")),e.createElement("p",{className:"nab-heatmap-no-longer-available__explanation"},(0,u._x)("Oops! It looks like your heatmap is no longer available. Please keep in mind that heatmap data is only stored up to two years in Nelio’s cloud.","user","nelio-ab-testing")))},b=function(){var e=f()[1],t=(0,o.usePageAttribute)("heatmap/activeFilter","timeToClick"),n=t[0],a=t[1];return[n,function(t){t!==n&&(e([]),a(t))}]},f=function(){return(0,o.usePageAttribute)("heatmap/disabledFilterOptions",[])},h=function(){var e=g(),t=e[0],n=e[1],a=(0,o.usePageAttribute)("heatmap/activeMode","heatmap"),r=a[0],i=a[1];return[r,function(e){e!==r&&(i(e),"confetti"===e&&"desktop"!==t&&n("desktop"))}]},g=function(){var e=(0,o.usePageAttribute)("heatmap/activeResolution","desktop"),t=e[0],n=e[1],a=v()[1],r=_()[1];return[t,function(e){e!==t&&(n(e),a(0),r("reset-heights"))}]},v=function(){return(0,o.usePageAttribute)("heatmap/iframeContentHeight",0)},_=function(){return(0,o.usePageAttribute)("heatmap/resolutionChangeMode","none")},E=function(){return(0,o.usePageAttribute)("heatmap/opacity",70)},x=function(){var e=g()[0],t=v()[0],n=C();return{height:t||n[e].height,width:n[e].width}},y=function(){return(0,o.usePageAttribute)("isLocked",!1)[0]},C=function(){return{desktop:{width:1600,height:900},tablet:{width:1024,height:576},smartphone:{width:460,height:818}}},L=function(){var t=N(),n=_()[0],a=w();return(0,e.useEffect)((function(){a("ready"!==t||"none"!==n)}),[t,n]),null},N=function(){return(0,t.useSelect)((function(e){var t,n;return null!==(n=null===(t=e(o.STORE_NAME).getPageAttribute("heatmap/dataStatus"))||void 0===t?void 0:t.mode)&&void 0!==n?n:""}))},w=function(){var e=(0,t.useDispatch)(o.STORE_NAME),n=e.lock,a=e.unlock;return function(e){return e?n():a()}},S=function(t){var n=t.experimentId,a=A(n);if(k(t),!a)return null;var r=t.children;return e.createElement("div",null,e.createElement(L,null),r)},A=function(e){return(0,t.useSelect)((function(t){return t(o.STORE_NAME).getExperiment(e)}))},k=function(n){var a=(0,t.useDispatch)(o.STORE_NAME).setPageAttribute;(0,t.useSelect)((function(e){return e(o.STORE_NAME).getExperimentResults(n.experimentId)})),(0,e.useEffect)((function(){var e=n.experimentId,t=n.alternativeId,r=n.firstDayOfWeek;a("editor/activeExperiment",e),a("heatmap/activeAlternative",t),a("heatmap/activeFilter","timeToClick"),a("heatmap/activeMode","heatmap"),a("heatmap/activeResolution","desktop"),a("heatmap/dataStatus",{mode:"waiting-script"}),a("heatmap/disabledFilterOptions",[]),a("heatmap/firstDayOfWeek",r%7),a("heatmap/intensity",60),a("heatmap/opacity",70)}),[])},O=window.wp.components,M=window.nab.components,P=window.nab.experiments,R=window.nab.i18n;var T=function(){var n,a,r=D(),i=z(),l=i.name,s=i.type,c=i.status,m=i.alternative,p=i.isBeingStopped,d=(0,t.useDispatch)(o.STORE_NAME).stopExperiment;return r?e.createElement("div",{className:"nab-heatmap-results-header"},e.createElement("div",{className:"nab-heatmap-results-header__info"},e.createElement(r,{className:"nab-heatmap-results-header__experiment-icon"}),e.createElement("h1",{className:"nab-heatmap-results-header__title"},l),e.createElement(M.SubscribeWithCouponButton,{className:"finished"===c?"nab-heatmap-results-header__right-promo-button":void 0})),"nab/heatmap"===s&&"running"===c&&e.createElement("div",{className:"nab-heatmap-results-header__settings"},p?e.createElement("span",{className:"nab-heatmap-results-header__stop-button nab-heatmap-results-header__stop-button--is-saving"},e.createElement(O.Dashicon,{icon:"cloud"}),(0,u._x)("Stopping…","text","nelio-ab-testing")):e.createElement(O.Button,{isPrimary:!0,className:"nab-heatmap-results-header__stop-button",onClick:d},(0,u._x)("Stop","command","nelio-ab-testing"))),"nab/heatmap"!==s&&e.createElement("div",{className:"nab-heatmap-results-header__variant"},e.createElement("span",{className:"nab-alternative__letter nab-alternative__letter--".concat(m)},(n=m)>=(a="ABCDEFGHIJKLMNOPQRSTUVWXYZ").length?"".concat(n-a.length+1):a.charAt(n)))):null},D=function(){var n=z().type;return(0,t.useSelect)((function(t){var a,r=(0,t(P.STORE_NAME).getExperimentTypes)()[n];return null!==(a=null==r?void 0:r.icon)&&void 0!==a?a:function(){return e.createElement(e.Fragment,null)}}))},z=function(){return(0,t.useSelect)((function(e){var t=e(o.STORE_NAME),n=t.getPageAttribute,a=t.getExperiment,r=n("editor/activeExperiment"),i=a(null!=r?r:0);if(!i)return B;var l=i.type,s=i.name,c=i.status,u=i.alternatives,m=n("heatmap/activeAlternative"),p=u.findIndex((function(e){return e.id===m}));return{name:s,type:l,status:c,alternative:Math.max(0,p),isBeingStopped:!!n("editor/isExperimentBeingStopped")}}))},B={name:"",type:"",status:"running",alternative:0,isBeingStopped:!1},I=window.wp.compose,F=function(){var t=(0,I.useInstanceId)(F);J(t),Z(t),q(t);var n=H(),a=V(),r=U(),i=_()[0],l=x(),o=l.width,s=l.height,c=G(),m="none"!==i;return e.createElement(e.Fragment,null,e.createElement(W,null),e.createElement("iframe",{id:"nab-heatmap__iframe-".concat(t),className:"nab-heatmap__iframe",title:(0,u._x)("Content of the heatmap","text","nelio-ab-testing"),frameBorder:"0",scrolling:"no",style:{display:n?"block":"none",position:m?"fixed":void 0,left:m?"-99999px":void 0,transform:"translate(-50%) scale(".concat(c,")")},width:o,height:s,src:r,onLoad:function(){return a()}}))},W=function(){var t=y(),n=j();return t&&n?"error"===n.mode?e.createElement(M.BigError,{className:"nab-heatmap__results-loader",text:Q(n.rationale)}):e.createElement(M.LoadingAnimation,{className:"nab-heatmap__results-loader",text:["processing","ready"].includes(n.mode)?(0,u._x)("Processing results…","text","nelio-ab-testing"):(0,u._x)("Loading results…","text","nelio-ab-testing")}):null},j=function(){return(0,t.useSelect)((function(e){return e(o.STORE_NAME).getPageAttribute("heatmap/dataStatus")}))},H=function(){var e;return"ready"===(null===(e=j())||void 0===e?void 0:e.mode)},V=function(){var e=(0,t.useDispatch)(o.STORE_NAME).setPageAttribute;return function(){setTimeout((function(){var n=(0,(0,t.select)(o.STORE_NAME).getPageAttribute)("heatmap/dataStatus");"waiting-script"===(null==n?void 0:n.mode)&&e("heatmap/dataStatus",{mode:"error",rationale:"no-script"})}),3e4)}},U=function(){return(0,t.useSelect)((function(e){var t=e(o.STORE_NAME),n=t.getPageAttribute,a=t.getExperiment,r=n("editor/activeExperiment"),i=a(null!=r?r:0);if(i){if(X(i))return i.links.heatmap;var s=n("heatmap/activeAlternative"),c=(0,l.find)(i.alternatives,{id:s});return null==c?void 0:c.links.heatmap}}))},G=function(){return(0,t.useSelect)((function(e){var t;return null!==(t=e(o.STORE_NAME).getPageAttribute("heatmap/iframeContentScale"))&&void 0!==t?t:1}))},J=function(t){var n=K(t),a=g()[0],r=_()[0];(0,e.useEffect)((function(){switch(r){case"reset-heights":n({type:"reset-heights",activeResolution:a});break;case"fetch-lazy-load-images":n({type:"fetch-lazy-load-images"});break;case"calculate-heights-in-double-sized-iframe":n({type:"calculate-heights-in-double-sized-iframe",activeResolution:a});break;case"calculate-actual-heights":n({type:"calculate-actual-heights",activeResolution:a});break;case"fix-heights":n({type:"fix-heights",activeResolution:a});break;case"compute-click-coordinates":n({type:"compute-click-coordinates",activeResolution:a});break;case"recompute-click-coordinates":n({type:"recompute-click-coordinates",activeResolution:a})}}),[r])},Z=function(t){var n=K(t),a=E()[0];(0,e.useEffect)((function(){n({type:"update-opacity",value:a})}),[a])},q=function(t){var n=K(t),a=b()[0],r=h()[0],i=g()[0],l=f()[0],s=(0,o.usePageAttribute)("heatmap/intensity",70)[0],c=E()[0],u=_()[0],m=H(),p=C();(0,e.useEffect)((function(){if("none"===u)switch(r){case"heatmap":n({type:"render-results",mode:"heatmap",areResultsLoaded:m,activeResolution:i,resolutions:p,heatmapIntensity:s,opacity:c});break;case"scrollmap":n({type:"render-results",mode:"scrollmap",areResultsLoaded:m,activeResolution:i,resolutions:p,opacity:c});break;case"confetti":n({type:"render-results",mode:"confetti",areResultsLoaded:m,activeFilter:a,disabledFilterOptions:l,opacity:c})}}),[a,r,i,m,JSON.stringify(l),s,u])},K=function(e){return function(t){var n,a="nab-heatmap__iframe-".concat(e),r=document.getElementById(a);(null===(n=null==r?void 0:r.contentWindow)||void 0===n?void 0:n.postMessage)&&r.contentWindow.postMessage(t)}};function Q(e){switch(e){case"no-script":return(0,u._x)("Unable to render heatmap","text","nelio-ab-testing");case"experiment-not-found":return(0,u._x)("Experiment not found","text","nelio-ab-testing");case"alternative-not-found":return(0,u._x)("Page not found","text","nelio-ab-testing");case"promise-failed":return(0,u._x)("There was an error when retrieving data from the cloud","text","nelio-ab-testing");case"unknown":return(0,u._x)("Something went wrong","text","nelio-ab-testing")}}var X=function(e){return"nab/heatmap"===e.type},Y=function(t){var n=t.views;return e.createElement(O.PanelRow,{className:"nab-experiment-summary__pageviews"},e.createElement("span",null,(0,u._x)("Page Views","text","nelio-ab-testing")),e.createElement("span",null,void 0!==n?(0,R.numberFormat)(n):"-"))},$=function(t){var n=t.status;return e.createElement(O.PanelRow,{className:"nab-experiment-summary__status"},e.createElement("span",null,(0,u._x)("Status","text","nelio-ab-testing")),e.createElement("strong",null,function(e){switch(e){case"paused":return(0,u._x)("Paused","text (experiment status)","nelio-ab-testing");case"finished":return(0,u._x)("Finished","text (experiment status)","nelio-ab-testing");default:return(0,u._x)("Running","text (experiment status)","nelio-ab-testing")}}(n)))},ee=window.nab.date,te=function(t){var n=t.start,a=t.end,r=t.endMode,i=t.endValue;return n&&r?(a=a||"",e.createElement(e.Fragment,null,e.createElement(O.PanelRow,{className:"nab-experiment-summary__start"},e.createElement("span",null,(0,u._x)("Duration","text","nelio-ab-testing")),e.createElement("span",null,function(e,t){for(var n=(0,c.computeDuration)(e,t),a=[n.months,n.days,n.hours,n.minutes],r=n.months,i=n.days,l=n.hours,o=n.minutes,s=[(0,u.sprintf)(
/* translators: number of months */
(0,u._n)("%d month","%d months",r,"nelio-ab-testing"),r),
/* translators: number of days */
(0,u.sprintf)((0,u._n)("%d day","%d days",i,"nelio-ab-testing"),i),(0,u.sprintf)(
/* translators: number of hours */
(0,u._n)("%d hour","%d hours",l,"nelio-ab-testing"),l),(0,u.sprintf)(
/* translators: number of minutes */
(0,u._n)("%d minute","%d minutes",o,"nelio-ab-testing"),o)],m=0;m<a.length-1;++m){if(a[m]&&a[m+1])return p=s[m],d=s[m+1],b=void 0,b=(0,u._x)("and","text","nelio-ab-testing"),"".concat(p," ").concat(b," ").concat(d);if(a[m])return s[m]}var p,d,b;return a[a.length-1]?s[a.length-1]:(0,u._x)("Less than a minute","text","nelio-ab-testing")}(n,a))),e.createElement(O.PanelRow,{className:"nab-experiment-summary__start"},e.createElement("span",null,(0,u._x)("Start","text","nelio-ab-testing")),e.createElement("span",null,(0,ee.formatI18nDate)(n))),a?e.createElement(O.PanelRow,{className:"nab-experiment-summary__end"},e.createElement("span",null,(0,u._x)("End","text","nelio-ab-testing")),e.createElement("span",null,(0,ee.formatI18nDate)(a))):e.createElement(O.PanelRow,{className:"nab-experiment-summary__end-mode"},e.createElement("span",null,(0,u._x)("End","text","nelio-ab-testing")),e.createElement("span",null,function(e,t){switch(t=null!=t?t:0,e){case"duration":return(0,u.sprintf)(
/* translators: number of days */
(0,u._n)("After %s day","After %s days",t,"nelio-ab-testing"),(0,R.numberFormat)(t));case"page-views":return(0,u.sprintf)(
/* translators: a number */
(0,u._n)("After %s page view","After %s page views",t,"nelio-ab-testing"),(0,R.numberFormat)(t));case"confidence":return(0,u.sprintf)(
/* translators: a percentage number, such as “95” */
(0,u._x)("At %1$s%% confidence","text","nelio-ab-testing"),(0,R.numberFormat)(t));default:return(0,u._x)("Manual","text","nelio-ab-testing")}}(r,i))))):null};var ne=function(){return ne=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ne.apply(this,arguments)},ae=function(){var t=(0,o.useExperimentAttribute)("status","running"),n=re(),a={start:(0,o.useExperimentAttribute)("startDate",""),end:(0,o.useExperimentAttribute)("endDate",!1),endMode:(0,o.useExperimentAttribute)("endMode","manual"),endValue:(0,o.useExperimentAttribute)("endValue",0)};return e.createElement(O.PanelBody,{className:"nab-experiment-summary",title:(0,u._x)("Summary","text (experiment)","nelio-ab-testing")},e.createElement($,{status:t}),e.createElement(Y,{views:n}),e.createElement(te,ne({},a)))},re=function(){return(0,t.useSelect)((function(e){var t,n,a=e(o.STORE_NAME),r=a.getPageAttribute;return(0,a.getAlternativePageViews)(null!==(t=r("editor/activeExperiment"))&&void 0!==t?t:0,null!==(n=r("heatmap/activeAlternative"))&&void 0!==n?n:"")}))},ie=function(){var n,a=("description",n=(0,t.useSelect)((function(e){return e(o.STORE_NAME).getPageAttribute("editor/activeExperiment")})),(0,t.useSelect)((function(e){return n?e(o.STORE_NAME).getExperimentAttribute(n,"description"):void 0})));return e.createElement(O.PanelBody,{className:"nab-experiment-description",title:(0,u._x)("Description","text","nelio-ab-testing")},a||(0,u._x)("None","text (description)","nelio-ab-testing"))},le=n(4184),oe=n.n(le),se=function(){var t=y(),n=(0,o.usePageAttribute)("heatmap/opacity",70),a=n[0],r=n[1];return e.createElement(O.RangeControl,{disabled:t,className:"nab-heatmap-opacity",label:(0,u._x)("Opacity","text","nelio-ab-testing"),value:a,onChange:function(e){return r(null!=e?e:25)},min:25,max:75})},ce=function(){var t=y(),n=(0,o.usePageAttribute)("heatmap/intensity",60),a=n[0],r=n[1];return e.createElement(O.RangeControl,{disabled:t,className:"nab-heatmap-intensity",label:(0,u._x)("Heat Intensity","text","nelio-ab-testing"),value:a,onChange:function(e){return r(e||40)},min:40,max:100})},ue=function(){return e.createElement(O.BaseControl,{id:"nab-scrollmap-legend",className:"nab-scrollmap-legend",label:(0,u._x)("Scrollmap Legend","text","nelio-ab-testing")},e.createElement("div",{className:"nab-scrollmap-legend__container"},e.createElement("div",{className:"nab-scrollmap-legend__scale"},e.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--0"}),e.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--25"}),e.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--50"}),e.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--75"}),e.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--100"})),e.createElement("div",{className:"nab-scrollmap-legend__text"},e.createElement("span",null,(0,u._x)("Less popular","text","nelio-ab-testing")),e.createElement("span",null,(0,u._x)("More popular","text","nelio-ab-testing")))))},me=function(t){var n=t.label,a=t.className,r=t.heading,i=t.checked,l=t.onChange,o=t.color,s=t.disabled,c=(0,I.useInstanceId)(me),u="inspector-checkbox-control-".concat(c),m=o?{borderColor:o,backgroundColor:o,opacity:i?1:.5}:{};return e.createElement(O.BaseControl,{label:r,id:u,className:a},e.createElement("span",{className:"components-checkbox-control__input-container"},e.createElement("input",{id:u,style:m,className:"components-checkbox-control__input",type:"checkbox",value:"1",onChange:function(e){return l(!!e.target.checked)},checked:i,disabled:s}),i?e.createElement(O.Dashicon,{icon:"yes",className:"components-checkbox-control__checked",role:"presentation"}):null),e.createElement("label",{className:"components-checkbox-control__label",htmlFor:u},n))},pe=function(){return pe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},pe.apply(this,arguments)},de=function(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},be=function(){var t=y(),n=fe(),a=he(),r=ge();if(!n)return null;var i=(0,l.sum)((0,l.map)(n,"value"));return e.createElement(e.Fragment,null,e.createElement(O.CheckboxControl,{className:"nab-filter-option nab-filter-option--header",label:e.createElement("span",{className:"nab-filter-option-label__container"},e.createElement("span",{className:"nab-filter-option-label__name"},(0,u._x)("Name","text","nelio-ab-testing")),e.createElement("span",{className:"nab-filter-option-label__amount"},(0,u._x)("Amount","text","nelio-ab-testing"))),checked:!a.length,onChange:function(e){return r("all",e)},disabled:t}),n.map((function(n){var l=n.key,o=n.label,s=n.value,c=n.color;return e.createElement(me,{key:l,color:c,disabled:t,className:oe()("nab-filter-option",{"nab-filter-option--deactivated":a.includes(l)}),label:e.createElement("span",{className:"nab-filter-option-label__container"},e.createElement("span",{className:"nab-filter-option-label__name",title:o},o),e.createElement("span",{className:"nab-filter-option-label__amount-container"},e.createElement("span",{className:"nab-filter-option-label__value"},"number"==typeof s?(0,R.compactInteger)(s):s),e.createElement("span",{className:"nab-bar__container"},e.createElement("span",{className:"nab-bar__value",style:{width:"".concat(Math.floor(6*_e(s)/i),"em")}})))),checked:!a.includes(l),onChange:function(e){return r(l,e)}})})))},fe=function(){return(0,t.useSelect)((function(e){var t,n,a=e(o.STORE_NAME).getPageAttribute,r=null!==(t=a("heatmap/activeFilter"))&&void 0!==t?t:"timeToClick",i=a("heatmap/confettiFilterOptions")||{},s=(0,l.values)(i[r]);if("dayOfWeek"===r){var m=(null!==(n=a("heatmap/firstDayOfWeek"))&&void 0!==n?n:0)%7;s=de(de([],de([],s,!0).splice(m),!0),de([],s,!0).splice(0,m),!0)}return"country"===r&&(s=s.map((function(e){return pe(pe({},e),{label:"other"===e.key?(0,u._x)("Other","text","nelio-ab-testing"):(0,c.getCountryName)(e.key)})})),s=ve(s)),s}))},he=function(){return(0,t.useSelect)((function(e){var t;return null!==(t=e(o.STORE_NAME).getPageAttribute("heatmap/disabledFilterOptions"))&&void 0!==t?t:[]}))},ge=function(){var e=(0,t.useDispatch)(o.STORE_NAME).setPageAttribute,n=fe(),a=he();return(0,t.useSelect)((function(e){return e(o.STORE_NAME).getPageAttribute("heatmap/activeFilter")}))&&n.length?function(t,r){if("all"===t)return e("heatmap/disabledFilterOptions",r?[]:(0,l.map)(n,"key"));e("heatmap/disabledFilterOptions",r?(0,l.without)(a,t):(0,l.uniq)(de(de([],a,!0),[t],!1)))}:l.noop},ve=function(e){return(0,l.sortBy)(de([],e,!0),["label"])},_e=function(e){return"string"==typeof e?Number.parseInt(e)||0:e},Ee=function(t){return"confetti"===t.kind?e.createElement(xe,null):e.createElement(ye,null)},xe=function(){var t=y(),n=b(),a=n[0],r=n[1],i=Ce();return e.createElement(e.Fragment,null,e.createElement(O.SelectControl,{disabled:t,label:(0,u._x)("Filter","text","nelio-ab-testing"),value:a,onChange:function(e){return r(e)},options:i}),e.createElement(be,null))},ye=function(){var t=(0,I.useInstanceId)(Ee),n=y(),a=g(),r=a[0],i=a[1];return e.createElement(O.BaseControl,{id:"nab-resolution-selector__".concat(t),label:(0,u._x)("Resolution","text","nelio-ab-testing")},e.createElement(O.ButtonGroup,{id:"nab-resolution-selector__".concat(t),className:"nab-resolution-selector"},e.createElement(O.Button,{isSecondary:"desktop"!==r,isPrimary:"desktop"===r,disabled:n,className:oe()({"nab-resolution-selector__option":!0}),title:(0,u._x)("Desktop","text","nelio-ab-testing"),onClick:function(){return i("desktop")}},e.createElement(O.Dashicon,{icon:"desktop"})),e.createElement(O.Button,{isSecondary:"tablet"!==r,isPrimary:"tablet"===r,disabled:n,className:oe()({"nab-resolution-selector__option":!0}),title:(0,u._x)("Tablet","text","nelio-ab-testing"),onClick:function(){return i("tablet")}},e.createElement(O.Dashicon,{icon:"tablet"})),e.createElement(O.Button,{isSecondary:"smartphone"!==r,isPrimary:"smartphone"===r,disabled:n,className:oe()({"nab-resolution-selector__option":!0}),title:(0,u._x)("Smartphone","text","nelio-ab-testing"),onClick:function(){return i("smartphone")}},e.createElement(O.Dashicon,{icon:"smartphone"}))))},Ce=function(){return Le},Le=(0,l.sortBy)([{value:"country",label:(0,u._x)("Country","text","nelio-ab-testing")},{value:"device",label:(0,u._x)("Device Type","text","nelio-ab-testing")},{value:"os",label:(0,u._x)("Operating System","text","nelio-ab-testing")},{value:"browser",label:(0,u._x)("Browser","text","nelio-ab-testing")},{value:"dayOfWeek",label:(0,u._x)("Day of Week","text","nelio-ab-testing")},{value:"hourOfDay",label:(0,u._x)("Time of Day","text","nelio-ab-testing")},{value:"timeToClick",label:(0,u._x)("Time to Click","text","nelio-ab-testing")},{value:"windowWidth",label:(0,u._x)("Window Width","text","nelio-ab-testing")}],"label"),Ne=function(){var t=h(),n=t[0],a=t[1],r=y();return e.createElement(O.TabPanel,{className:oe()("nab-heatmap-kind-selector",{"nab-heatmap-kind-selector--locked":r}),activeClass:"nab-heatmap-kind-selector__tab--active",orientation:"horizontal",initialTabName:n,onSelect:a,tabs:we},(function(t){return e.createElement(O.PanelBody,{className:"nab-heatmap-settings",title:(0,u._x)("Settings","text","nelio-ab-testing")},e.createElement(se,null),"heatmap"===t.name&&e.createElement(ce,null),e.createElement(Ee,{kind:t.name}),"scrollmap"===t.name&&e.createElement(ue,null))}))},we=[{name:"heatmap",title:(0,u._x)("Heatmap","text","nelio-ab-testing"),className:"nab-heatmap-kind-selector__tab"},{name:"scrollmap",title:(0,u._x)("Scrollmap","text","nelio-ab-testing"),className:"nab-heatmap-kind-selector__tab"},{name:"confetti",title:(0,u._x)("Confetti","text","nelio-ab-testing"),className:"nab-heatmap-kind-selector__tab"}],Se=function(){var t=y(),n=Ae(),a=ke();return n?e.createElement(O.PanelBody,{initialOpen:!1,className:"nab-advanced",title:(0,u._x)("Advanced","text","nelio-ab-testing")},e.createElement("p",null,(0,u._x)("Under some circumstances, when your page loads content dynamically, the results may be shifted from their correct position. Try re-positioning your tracking data to re-render the results properly:","user","nelio-ab-testing")),e.createElement(O.Button,{className:"nab-advanced__reposition-button",disabled:t,isSecondary:!0,onClick:a},(0,u._x)("Re-position data","command","nelio-ab-testing"))):null},Ae=function(){return(0,t.useSelect)((function(e){return"scrollmap"!==e(o.STORE_NAME).getPageAttribute("heatmap/activeMode")}))},ke=function(){var e=(0,t.useDispatch)(o.STORE_NAME),n=e.setPageAttribute,a=e.lock;return function(){a(),n("heatmap/resolutionChangeMode","recompute-click-coordinates")}},Oe=function(){var t=Me();return e.createElement("div",{className:"nab-heatmap-results-sidebar",style:t},e.createElement("div",{className:"nab-heatmap-results-sidebar__element-wrapper"},e.createElement(Ne,null),e.createElement(ae,null),e.createElement(ie,null),e.createElement(Se,null)))},Me=function(){return(0,t.useSelect)((function(e){var t=(0,e(o.STORE_NAME).getPageAttribute)("sidebarDimensions"),n=t.applyFix,a=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["applyFix"]);return n?a:void 0}))},Pe=function(){var t=Re();return e.createElement("div",{className:"nab-heatmap-results-layout"},e.createElement(T,null),e.createElement("div",{className:"nab-heatmap-results-layout__body"},e.createElement(Oe,null),e.createElement("div",{className:"nab-heatmap-results-layout__content",role:"region","aria-label":(0,u._x)("Results content","text","nelio-ab-testing"),tabIndex:-1,style:{height:t}},e.createElement(F,null))))},Re=function(){return(x().height+200)*(0,t.useSelect)((function(e){var t;return null!==(t=e(o.STORE_NAME).getPageAttribute("heatmap/iframeContentScale"))&&void 0!==t?t:1}))};function Te(n,a){var r=document.getElementById(n);if((0,c.isExperimentTooOldToHaveHeatmaps)(a.endDate||""))return(0,e.render)(e.createElement(e.StrictMode,null,e.createElement(d,null)),r);var i=a.experimentId,l=a.alternativeId,u=a.isStaging,m=a.firstDayOfWeek;u&&(0,c.createStagingNotice)(),function(e){(0,t.dispatch)(o.STORE_NAME).setPageAttribute("heatmap/awsAuthToken",e.awsAuthToken),(0,t.dispatch)(o.STORE_NAME).setPageAttribute("heatmap/siteId",e.siteId),(0,t.dispatch)(o.STORE_NAME).setPageAttribute("heatmap/timezone",e.timezone)}(a),(0,s.registerCoreExperiments)(),(0,e.render)(e.createElement(e.StrictMode,null,e.createElement(S,{experimentId:i,alternativeId:l,firstDayOfWeek:m},e.createElement(Pe,null))),r)}function De(){var e=document.body.clientWidth,n=(0,t.dispatch)(o.STORE_NAME).setPageAttribute;n("heatmap/iframeContentScale",e<480?.2:e<600?.3:e<782?.4:e<1080?.3:e<1280?.4:e<1440?.45:e<1600?.6:.7);var a=window.innerHeight,r=document.getElementById("wpadminbar"),i=r?r.getBoundingClientRect().height:0;n("sidebarDimensions",{top:i,height:"".concat(a-i,"px"),applyFix:782<=window.innerWidth})}window.addEventListener("resize",(0,l.debounce)(De,100)),i()(De)}();var r=nab="undefined"==typeof nab?{}:nab;for(var i in a)r[i]=a[i];a.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})}();