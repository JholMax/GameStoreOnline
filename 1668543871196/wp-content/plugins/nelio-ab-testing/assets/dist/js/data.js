!function(){var t={n:function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};!function(){"use strict";t.r(e),t.d(e,{data:function(){return o}});var n={};t.r(n),t.d(n,{getAccount:function(){return A},getActivePlugins:function(){return xt},getAlternativePageViews:function(){return Ut},getAlternativeResultsInExperiment:function(){return Dt},getConversionRatesOfAlternativesInGoal:function(){return Bt},getConversions:function(){return Mt},getCurrency:function(){return X},getDaysRunning:function(){return Lt},getDeactivationDate:function(){return Y},getDefaultGoal:function(){return ot},getEmail:function(){return U},getEntityRecord:function(){return rt},getExperiment:function(){return it},getExperimentAttribute:function(){return ut},getExperimentResults:function(){return _t},getExperimentResultsStatus:function(){return Gt},getFirstname:function(){return D},getFullname:function(){return C},getInvoices:function(){return R},getKindEntities:function(){return nt},getLastname:function(){return N},getLicense:function(){return G},getMenu:function(){return Tt},getMode:function(){return K},getNextChargeDate:function(){return W},getNextChargeTotal:function(){return F},getPageAttribute:function(){return at},getPageViews:function(){return Nt},getPeriod:function(){return Q},getPhoto:function(){return j},getPlan:function(){return L},getPluginSetting:function(){return It},getProductDisplay:function(){return B},getProducts:function(){return Z},getQuota:function(){return z},getQuotaExtra:function(){return J},getQuotaPerMonth:function(){return $},getResultsOfAlternatives:function(){return Qt},getRevenuesOfAlternativesInGoal:function(){return Kt},getSite:function(){return I},getSites:function(){return k},getSitesAllowed:function(){return H},getStartDate:function(){return M},getState:function(){return q},getSubscriptionId:function(){return O},getSubscriptionProduct:function(){return V},getTemplates:function(){return At},getThemes:function(){return kt},getToday:function(){return St},getTotalRevenue:function(){return Vt},getUrlToManagePayments:function(){return tt},getWinnerAlternative:function(){return jt},getWinnersInExperiment:function(){return Ct},getWooCommerceSetting:function(){return Rt},hasMenus:function(){return Pt},isAgency:function(){return et},isLocked:function(){return st},isSubscribedTo:function(){return Ot},isSubscriptionDeprecated:function(){return _},isWooCommerceGoal:function(){return ct}});var r={};t.r(r),t.d(r,{changeLastAppliedAlternative:function(){return $t},lock:function(){return te},receiveAccount:function(){return qt},receiveEntityRecords:function(){return zt},receiveExperiment:function(){return Jt},receiveExperimentResult:function(){return ne},receiveInvoices:function(){return Wt},receiveKindEntitiesQuery:function(){return Xt},receiveMenus:function(){return ue},receivePluginSettings:function(){return ae},receivePlugins:function(){return ie},receiveProducts:function(){return Ft},receiveSites:function(){return Yt},receiveTemplates:function(){return oe},receiveThemes:function(){return ce},receiveWooCommerceSettings:function(){return se},removeSiteAfterUnlink:function(){return Ht},setPageAttribute:function(){return Zt},setToday:function(){return re},unlock:function(){return ee}});var i={};t.r(i),t.d(i,{applyAlternative:function(){return Re},cancelSubscription:function(){return ye},createFreeSite:function(){return pe},createPremiumSite:function(){return he},linkSite:function(){return ge},migrateOldExperiment:function(){return Ne},pauseExperiment:function(){return Ie},purchaseQuota:function(){return we},removeOldAccountData:function(){return Ue},stopExperiment:function(){return ke},uncancelSubscription:function(){return me},unlinkSite:function(){return be},upgradeSubscription:function(){return Ee}});var u={};t.r(u),t.d(u,{getAccount:function(){return Le},getActivePlugins:function(){return un},getAlternativePageViews:function(){return Je},getConversionRatesOfAlternativesInGoal:function(){return en},getDaysRunning:function(){return Ze},getEntityRecord:function(){return We},getExperiment:function(){return Fe},getExperimentResults:function(){return ze},getExperimentResultsStatus:function(){return tn},getInvoices:function(){return Be},getKindEntities:function(){return Ye},getMenu:function(){return cn},getPageViews:function(){return $e},getProducts:function(){return Ke},getQuota:function(){return Ge},getSites:function(){return je},getTemplates:function(){return an},getThemes:function(){return sn},hasMenus:function(){return on}});var o={};t.r(o),t.d(o,{STORE_NAME:function(){return l},useExperimentAttribute:function(){return vn},usePageAttribute:function(){return dn},usePluginSetting:function(){return pn}});var c=window.wp.data,a=window.nab.date,s=window.lodash,l="nab/data",f={info:{currency:"USD",deactivationDate:"",email:"",firstname:"",fullname:"",isAgency:!1,lastname:"",license:"",mode:"free",nextChargeDate:"",nextChargeTotal:"",period:"month",photo:"",plan:"free",productDisplay:"",productId:"",quota:500,quotaExtra:0,quotaPerMonth:0,sitesAllowed:1,startDate:"",state:"active",subscription:"",urlToManagePayments:""},invoices:[],products:[],sites:[]},v={config:[],data:{}},d={},p={isLocked:!1,sidebarDimensions:{top:0,height:"100vh",applyFix:!0}},h={},g={today:"2013-01-01",menus:{},nelio:{areAutoTutorialsEnabled:!0,themeSupport:{menus:!1,widgets:!1},externalTrackingScript:"",homeUrl:"/",minConfidence:95,minSampleSize:100,siteId:"",subscription:!1},plugins:[],templates:{},themes:{},woocommerce:{currencySymbol:"$",orderStatuses:[]}},b=function(){return b=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},b.apply(this,arguments)},y=function(){return y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},y.apply(this,arguments)},m=window.nab.utils,E=function(){return E=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},E.apply(this,arguments)};function w(t){var e=(0,m.createAlternative)("control"),n=(0,m.createAlternative)();return t?"control"!==t[0].id?function(t,e,n){if(n||2===arguments.length)for(var r,i=0,u=e.length;i<u;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([e],t,!0):1===t.length?[t[0],n]:t:[e,n]}var S=function(){return S=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},S.apply(this,arguments)},x=function(){return x=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},x.apply(this,arguments)},P=function(){return P=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},P.apply(this,arguments)},T=(0,c.combineReducers)({account:function(t,e){var n;return void 0===t&&(t=f),null!==(n=function(t,e){switch(e.type){case"RECEIVE_ACCOUNT":return b(b({},t),{info:e.account});case"RECEIVE_INVOICES":return b(b({},t),{invoices:e.invoices});case"RECEIVE_PRODUCTS":return b(b({},t),{products:e.products});case"RECEIVE_SITES":return b(b({},t),{sites:e.sites});case"UNLINK_SITE":return b(b({},t),{sites:(0,s.reject)(t.sites,{id:e.id})})}}(t,e))&&void 0!==n?n:t},entities:function(t,e){var n;return void 0===t&&(t=v),null!==(n=function(t,e){var n;switch(e.type){case"RECEIVE_TYPE_QUERY":return y(y({},t),{config:e.kindEntities});case"RECEIVE_ITEMS":return y(y({},t),{data:y(y({},t.data),(n={},n[e.kind]=y(y({},t.data[e.kind]),(0,s.keyBy)(e.items,"id")),n))})}}(t,e))&&void 0!==n?n:t},experiments:function(t,e){var n;return void 0===t&&(t=d),null!==(n=function(t,e){var n,r,i;switch(e.type){case"RECEIVE_EXPERIMENT":return E(E({},t),((n={})[e.key]=E(E({},e.experiment),{alternatives:w(e.experiment.alternatives),goals:e.experiment.goals||[(0,m.createGoal)()],segments:e.experiment.segments||[]}),n));case"CHANGE_LAST_APPLIED_ALTERNATIVE":var u=t[e.experimentId];return u?E(E({},t),((r={})[e.experimentId]=E(E({},u),{alternatives:u.alternatives.map((i=e.alternativeId,function(t){return E(E({},t),{isLastApplied:t.id===i})}))}),r)):t}}(t,e))&&void 0!==n?n:t},page:function(t,e){var n;return void 0===t&&(t=p),null!==(n=function(t,e){var n;switch(e.type){case"SET_PAGE_ATTRIBUTE":return e.name?S(S({},t),((n={})[e.name]=e.value,n)):t;case"LOCK_UI":return S(S({},t),{isLocked:!0});case"UNLOCK_UI":return S(S({},t),{isLocked:!1})}}(t,e))&&void 0!==n?n:t},results:function(t,e){var n;return void 0===t&&(t=h),null!==(n=function(t,e){var n;if("RECEIVE_RESULT"===e.type)return x(x({},t),((n={})[e.key]=e.result,n))}(t,e))&&void 0!==n?n:t},settings:function(t,e){var n;return void 0===t&&(t=g),null!==(n=function(t,e){switch(e.type){case"SET_TODAY":return P(P({},t),{today:e.today});case"RECEIVE_MENUS":return P(P({},t),{menus:P(P({},t.menus),(0,s.keyBy)(e.menus,"id"))});case"RECEIVE_PLUGINS":return P(P({},t),{plugins:e.plugins||[]});case"RECEIVE_TEMPLATES":return P(P({},t),{templates:e.templates});case"RECEIVE_THEMES":return P(P({},t),{themes:(0,s.keyBy)(e.themes,"id")});case"RECEIVE_PLUGIN_SETTINGS":return P(P({},t),{nelio:e.settings});case"RECEIVE_WOOCOMMERCE_SETTINGS":return P(P({},t),{woocommerce:P(P({},e.settings),{orderStatuses:(0,s.sortBy)(e.settings.orderStatuses,"label")})})}}(t,e))&&void 0!==n?n:t}});function A(t){return t.account.info}function k(t,e){return e?t.account.sites:[]}function I(t,e){return(0,s.find)(t.account.sites,{id:e})}function R(t,e){return e?t.account.invoices:[]}function O(t){return t.account.info.subscription}function _(t){return!!t.account.info.subscription.startsWith("OL")}function C(t){return t.account.info.fullname}function D(t){return t.account.info.firstname}function N(t){return t.account.info.lastname}function U(t){return t.account.info.email}function M(t){return t.account.info.startDate}function V(t){return t.account.info.productId}function L(t){return t.account.info.plan}function G(t){return t.account.info.license}function j(t){return t.account.info.photo}function B(t){return t.account.info.productDisplay}function K(t){return t.account.info.mode}function Q(t){return t.account.info.period}function q(t){return t.account.info.state}function Y(t){return t.account.info.deactivationDate}function W(t){return t.account.info.nextChargeDate}function F(t){return t.account.info.nextChargeTotal}function H(t){return t.account.info.sitesAllowed}function X(t){return t.account.info.currency}function z(t){return t.account.info.quota}function $(t){return t.account.info.quotaPerMonth}function J(t){return t.account.info.quotaExtra}function Z(t){return t.account.products}function tt(t){return t.account.info.urlToManagePayments}function et(t){return!!t.account.info.isAgency}function nt(t){return t.entities.config}function rt(t,e,n){return(0,s.get)(t.entities.data,[e,n])}function it(t,e){return(0,s.get)(t.experiments,e)}function ut(t,e,n){var r=it(t,e);if(r)return r[n]}function ot(t,e){var n=it(t,e);if(n)return n.goals[0]}function ct(t,e,n){var r,i,u=it(t,e);if(!u)return!1;n=null!=n?n:null===(r=ot(t,e))||void 0===r?void 0:r.id;var o=u.goals.find((function(t){return t.id===n}));if(!o)return!1;var c=null!==(i=null==o?void 0:o.conversionActions)&&void 0!==i?i:[];return 0<c.length&&c.every((function(t){return"nab/wc-order"===t.type}))}function at(t,e){return t.page[e]}function st(t){return at(t,"isLocked")}var lt=function(){return lt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},lt.apply(this,arguments)};function ft(t,e){var n=e.segments,r={results:{}};return(0,s.keyBy)(n.map((function(n,i){var u,o,c,a,s;return{winners:vt((null===(o=null===(u=t.segments)||void 0===u?void 0:u["s".concat(i+1)])||void 0===o?void 0:o.results)||{},e.goals),wasEnoughData:dt((null===(a=null===(c=t.segments)||void 0===c?void 0:c["s".concat(i+1)])||void 0===a?void 0:a.results)||{},e.goals),alternatives:pt((null===(s=t.segments)||void 0===s?void 0:s["s".concat(i+1)])||r,e),id:n.id}})),"id")}function vt(t,e){for(var n={},r=e.length,i=0;i<r;++i){var u=e[i].id,o=t["g".concat(i)]||!1;n[u]=!1,o&&"win"===o.status&&(n[u]={alternative:o.winner,confidence:o.confidence})}return n}function dt(t,e){for(var n={},r=e.length,i=0;i<r;++i){var u=e[i].id,o=t["g".concat(i)]||{};n[u]="low-data"!==o.status}return n}function pt(t,e){var n=e.alternatives,r="finished"===e.status?(0,a.getDate)(e.endDate||""):new Date,i=(0,a.date)("Y-m-d",r);return(0,s.keyBy)(n.map((function(n,r){return function(t,e,n,r,i){return{id:e,visits:t.v||0,values:ht(t.cv,i),conversions:gt(t.c,i),conversionRates:bt(t.cr,i),improvementFactors:yt(t.i,i),timeline:mt(t.t,n,r,i)}}(t["a".concat(r)]||{},n.id,e.startDate,i,e.goals)})),"id")}function ht(t,e){for(var n={},r=e.length,i=0;i<r;++i)n[e[i].id]=(null==t?void 0:t["g".concat(i)])||0;return n}function gt(t,e){for(var n={},r=e.length,i=0;i<r;++i)n[e[i].id]=(null==t?void 0:t["g".concat(i)])||0;return n}function bt(t,e){for(var n={},r=e.length,i=0;i<r;++i){var u=e[i].id,o=(null==t?void 0:t["g".concat(i)])||0;n[u]=Math.round(100*o)/100||0}return n}function yt(t,e){for(var n={},r=e.length,i=0;i<r;++i)n[e[i].id]=(null==t?void 0:t["g".concat(i)])||0;return n}function mt(t,e,n,r){var i,u=[],o=(0,a.getDate)(e);do{var c=wt(Et(t,i=(0,a.format)("Y-m-d",o)),r);u.push(c),o.setDate(o.getDate()+1)}while(n>i);return u}function Et(t,e){var n=(0,s.find)(t,{d:e})||{};return lt(lt({v:0},n),{d:e})}function wt(t,e){for(var n={visits:t.v||0,date:t.d,conversions:{},values:{}},r=e.length,i=0;i<r;++i){var u=e[i].id;n.conversions[u]=t["g".concat(i)]||0,n.values[u]=t["val".concat(i)]||0}return n}function St(t){return t.settings.today}function xt(t){return t.settings.plugins}function Pt(t){return!!(0,s.keys)(t.settings.menus).length}function Tt(t,e){return t.settings.menus[e]}function At(t){return t.settings.templates}function kt(t){return(0,s.values)(t.settings.themes)}function It(t,e){return t.settings.nelio[e]}function Rt(t,e){return t.settings.woocommerce[e]}function Ot(t,e,n){void 0===n&&(n="or-above");var r=It(t,"subscription");if(!r)return!1;var i=["basic","professional","enterprise"],u=i.indexOf(e),o=i.indexOf(r);return-1!==u&&-1!==o&&("or-above"!==n?u===o:o>=u)}function _t(t,e){return t.results[e]}function Ct(t,e){var n,r=_t(t,e);if(r){var i=null!==(n=at(t,"editor/activeSegment"))&&void 0!==n?n:"default";return"default"===i?r.winners:r.segments[i].winners}}function Dt(t,e){var n,r=_t(t,e);if(r){var i=null!==(n=at(t,"editor/activeSegment"))&&void 0!==n?n:"default";return"default"===i?(0,s.values)(r.alternatives):(0,s.values)(r.segments[i].alternatives)}}function Nt(t,e){var n,r=_t(t,e);if(!(null==r?void 0:r.alternatives))return 0;var i=null!==(n=at(t,"editor/activeSegment"))&&void 0!==n?n:"default";return("default"===i?(0,s.values)(r.alternatives):(0,s.values)(r.segments[i].alternatives)).reduce((function(t,e){return t+e.visits}),0)}function Ut(t,e,n){var r,i=_t(t,e);if(!(null==i?void 0:i.alternatives))return 0;var u=null!==(r=at(t,"editor/activeSegment"))&&void 0!==r?r:"default",o="default"===u?i.alternatives[n]:i.segments[u].alternatives[n];return o?o.visits:0}function Mt(t,e,n){var r,i,u,o=_t(t,e);if(!o||!o.alternatives)return 0;var c=null!==(i=null!=n?n:null===(r=ot(t,e))||void 0===r?void 0:r.id)&&void 0!==i?i:"";if(!c)return 0;var a=null!==(u=at(t,"editor/activeSegment"))&&void 0!==u?u:"default";return("default"===a?(0,s.values)(o.alternatives):(0,s.values)(o.segments[a].alternatives)).reduce((function(t,e){return t+e.conversions[c]}),0)}function Vt(t,e,n){var r,i,u,o=_t(t,e);if(!o||!o.alternatives)return 0;var c=null!==(i=null!=n?n:null===(r=ot(t,e))||void 0===r?void 0:r.id)&&void 0!==i?i:"";if(!c)return 0;var a=null!==(u=at(t,"editor/activeSegment"))&&void 0!==u?u:"default";return("default"===a?(0,s.values)(o.alternatives):(0,s.values)(o.segments[a].alternatives)).reduce((function(t,e){return t+e.values[c]}),0)}function Lt(t,e){var n=it(t,e);if(!n)return 0;var r,i=n.startDate;return"finished"===n.status&&(r=n.endDate),function(t,e){if(!t)return 0;"string"==typeof t&&(t=new Date(t)),"string"==typeof e&&(e=new Date(e)),e||(e=new Date);var n=Math.abs(e.getTime()-t.getTime());return Math.ceil(n/864e5)}(i,r)}function Gt(t,e,n){var r,i,u,o=_t(t,e);if(o){var c=null!==(i=null!=n?n:null===(r=ot(t,e))||void 0===r?void 0:r.id)&&void 0!==i?i:"";if(c){var a=It(t,"minConfidence");if(a){var s=null!==(u=at(t,"editor/activeSegment"))&&void 0!==u?u:"default",l="default"===s?o.winners[c]:o.segments[s].winners[c];return l?l.confidence>=a?"winner":"possible-winner":"testing"}}}}function jt(t,e,n){var r,i,u,o=_t(t,e);if(o){var c=null!==(i=null!=n?n:null===(r=ot(t,e))||void 0===r?void 0:r.id)&&void 0!==i?i:"";if(c){var a=It(t,"minConfidence");if(a){var s=null!==(u=at(t,"editor/activeSegment"))&&void 0!==u?u:"default",l="default"===s?o.winners[c]:o.segments[s].winners[c];if(l&&!(l.confidence<a))return l.alternative}}}}function Bt(t,e,n){var r,i,u=_t(t,e);if(u){var o=null!=n?n:null===(r=ot(t,e))||void 0===r?void 0:r.id;if(o){var c=null!==(i=at(t,"editor/activeSegment"))&&void 0!==i?i:"default";return("default"===c?(0,s.values)(u.alternatives):(0,s.values)(u.segments[c].alternatives)).map((function(t){return t.conversionRates[o]}))}}}function Kt(t,e,n){var r,i,u,o=_t(t,e);if(o){var c=null!==(i=null!=n?n:null===(r=ot(t,e))||void 0===r?void 0:r.id)&&void 0!==i?i:"";if(c){var a=null!==(u=at(t,"editor/activeSegment"))&&void 0!==u?u:"default";return("default"===a?(0,s.values)(o.alternatives):(0,s.values)(o.segments[a].alternatives)).map((function(t){return t.values[c]}))}}}function Qt(t,e){var n,r=_t(t,e);if(r){var i=null!==(n=at(t,"editor/activeSegment"))&&void 0!==n?n:"default";return"default"===i?r.alternatives:r.segments[i].alternatives}}function qt(t){return{type:"RECEIVE_ACCOUNT",account:t}}function Yt(t){return{type:"RECEIVE_SITES",sites:(0,s.castArray)(t)}}function Wt(t){return{type:"RECEIVE_INVOICES",invoices:(0,s.castArray)(t)}}function Ft(t){return{type:"RECEIVE_PRODUCTS",products:(0,s.castArray)(t)}}function Ht(t){return{type:"UNLINK_SITE",id:t}}function Xt(t){return{type:"RECEIVE_TYPE_QUERY",kindEntities:(0,s.castArray)(t)}}function zt(t,e){return{type:"RECEIVE_ITEMS",items:(0,s.castArray)(e),kind:t}}function $t(t,e){return{type:"CHANGE_LAST_APPLIED_ALTERNATIVE",experimentId:t,alternativeId:e}}function Jt(t,e){return{type:"RECEIVE_EXPERIMENT",key:t,experiment:e}}function Zt(t,e){return{type:"SET_PAGE_ATTRIBUTE",name:t,value:e}}function te(){return{type:"LOCK_UI"}}function ee(){return{type:"UNLOCK_UI"}}function ne(t,e){return{type:"RECEIVE_RESULT",key:t,result:e}}function re(t){return{type:"SET_TODAY",today:t}}function ie(t){return{type:"RECEIVE_PLUGINS",plugins:(0,s.castArray)(t)}}function ue(t){return{type:"RECEIVE_MENUS",menus:(0,s.castArray)(t)}}function oe(t){return{type:"RECEIVE_TEMPLATES",templates:t}}function ce(t){return{type:"RECEIVE_THEMES",themes:(0,s.castArray)(t)}}function ae(t){return{type:"RECEIVE_PLUGIN_SETTINGS",settings:t}}function se(t){return{type:"RECEIVE_WOOCOMMERCE_SETTINGS",settings:t}}var le=window.wp.apiFetch,fe=t.n(le),ve=function(t,e,n,r){return new(n||(n=Promise))((function(i,u){function o(t){try{a(r.next(t))}catch(t){u(t)}}function c(t){try{a(r.throw(t))}catch(t){u(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}a((r=r.apply(t,e||[])).next())}))},de=function(t,e){var n,r,i,u,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function pe(){return ve(this,void 0,void 0,(function(){var t;return de(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,fe()({path:"/nab/v1/site/free",method:"POST"})];case 1:return e.sent(),[3,3];case 2:return t=e.sent(),(0,m.createErrorNotice)(t),[3,3];case 3:return[2]}}))}))}function he(){return ve(this,void 0,void 0,(function(){var t;return de(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,fe()({path:"/nab/v1/site/premium",method:"POST"})];case 1:return e.sent(),[3,3];case 2:return t=e.sent(),(0,m.createErrorNotice)(t),[3,3];case 3:return[2]}}))}))}function ge(t){return ve(this,void 0,void 0,(function(){var e;return de(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),(0,c.dispatch)(l).lock(),[4,fe()({path:"/nab/v1/site/subscription",method:"POST",data:{license:t}})];case 1:return n.sent(),window.location.reload(),[3,3];case 2:return e=n.sent(),(0,c.dispatch)(l).unlock(),(0,m.createErrorNotice)(e),[3,3];case 3:return[2]}}))}))}function be(t){return ve(this,void 0,void 0,(function(){var e,n;return de(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),(0,c.dispatch)(l).lock(),[4,fe()({path:"/nab/v1/site/".concat(t,"/subscription"),method:"DELETE"})];case 1:return r.sent(),(null==(e=(0,c.select)(l).getSite(t))?void 0:e.isCurrentSite)?(window.location.reload(),[2]):((0,c.dispatch)(l).unlock(),(0,c.dispatch)(l).removeSiteAfterUnlink(t),[3,3]);case 2:return n=r.sent(),(0,c.dispatch)(l).unlock(),(0,m.createErrorNotice)(n),[3,3];case 3:return[2]}}))}))}function ye(){return ve(this,void 0,void 0,(function(){var t,e;return de(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),(0,c.dispatch)(l).lock(),t=(0,c.select)(l).getSubscriptionId(),[4,fe()({path:"/nab/v1/subscription/".concat(t),method:"DELETE"})];case 1:return n.sent(),window.location.reload(),[3,3];case 2:return e=n.sent(),(0,c.dispatch)(l).unlock(),(0,m.createErrorNotice)(e),[3,3];case 3:return[2]}}))}))}function me(){return ve(this,void 0,void 0,(function(){var t,e;return de(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),(0,c.dispatch)(l).lock(),t=(0,c.select)(l).getSubscriptionId(),[4,fe()({path:"/nab/v1/subscription/".concat(t,"/uncancel"),method:"POST"})];case 1:return n.sent(),window.location.reload(),[3,3];case 2:return e=n.sent(),(0,c.dispatch)(l).unlock(),(0,m.createErrorNotice)(e),[3,3];case 3:return[2]}}))}))}function Ee(t){return ve(this,void 0,void 0,(function(){var e,n;return de(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),(0,c.dispatch)(l).lock(),e=(0,c.select)(l).getSubscriptionId(),[4,fe()({path:"/nab/v1/subscription/".concat(e),method:"PUT",data:{plan:t}})];case 1:return r.sent(),window.location.reload(),[3,3];case 2:return n=r.sent(),(0,c.dispatch)(l).unlock(),(0,m.createErrorNotice)(n),[3,3];case 3:return[2]}}))}))}function we(t,e){return ve(this,void 0,void 0,(function(){var n,r;return de(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),(0,c.dispatch)(l).lock(),n=(0,c.select)(l).getSubscriptionId(),[4,fe()({path:"/nab/v1/subscription/".concat(n,"/quota"),method:"POST",data:{quantity:t,currency:e}})];case 1:return i.sent(),window.location.reload(),[3,3];case 2:return r=i.sent(),(0,c.dispatch)(l).unlock(),(0,m.createErrorNotice)(r),[3,3];case 3:return[2]}}))}))}var Se=window.wp.url,xe=window.wp.i18n,Pe=function(){return Pe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Pe.apply(this,arguments)},Te=function(t,e,n,r){return new(n||(n=Promise))((function(i,u){function o(t){try{a(r.next(t))}catch(t){u(t)}}function c(t){try{a(r.throw(t))}catch(t){u(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}a((r=r.apply(t,e||[])).next())}))},Ae=function(t,e){var n,r,i,u,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function ke(){return Te(this,void 0,void 0,(function(){var t,e,n,r,i,u,o;return Ae(this,(function(a){switch(a.label){case 0:if(!(t=(0,c.select)(l).getPageAttribute("editor/activeExperiment")))return[2];(0,c.dispatch)(l).setPageAttribute("editor/isExperimentBeingStopped",!0),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,c.resolveSelect)(l).getExperiment(t)];case 2:return(e=a.sent())?[3,4]:[2];case 3:return n=a.sent(),(0,m.createErrorNotice)(n),[2];case 4:return a.trys.push([4,6,,7]),[4,fe()({path:"/nab/v1/experiment/".concat(t,"/stop"),method:"PUT"})];case 5:return r=a.sent(),[3,7];case 6:return i=a.sent(),(0,m.createErrorNotice)(i,(0,xe._x)("Test can’t be stopped","text","nelio-ab-testing")),(0,c.dispatch)(l).setPageAttribute("editor/isExperimentBeingStopped",!1),[2];case 7:return u=(0,s.keyBy)(r.alternatives||[],"id"),o=Pe(Pe({},r),{links:Pe(Pe({},r.links),e.links),alternatives:(e.alternatives||[]).map((function(t){return Pe(Pe({},t),{links:Oe(t,u[t.id])})}))}),(0,c.dispatch)(l).receiveExperiment(e.id,o),(0,c.dispatch)(l).setPageAttribute("editor/isExperimentBeingStopped",!1),[2]}}))}))}function Ie(){return Te(this,void 0,void 0,(function(){var t,e;return Ae(this,(function(n){switch(n.label){case 0:if(!(t=(0,c.select)(l).getPageAttribute("editor/activeExperiment")))return[2];(0,c.dispatch)(l).setPageAttribute("editor/isExperimentBeingPaused",!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,fe()({path:"/nab/v1/experiment/".concat(t,"/pause"),method:"PUT"})];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),(0,m.createErrorNotice)(e,(0,xe._x)("Test can’t be paused","text","nelio-ab-testing")),(0,c.dispatch)(l).setPageAttribute("editor/isExperimentBeingPaused",!1),[2];case 4:return window.location.href=(0,Se.addQueryArgs)("admin.php",{page:"nelio-ab-testing-experiment-edit",experiment:t}),[2]}}))}))}function Re(t){return Te(this,void 0,void 0,(function(){var e,n,r;return Ae(this,(function(i){switch(i.label){case 0:if(!(e=(0,c.select)(l).getPageAttribute("editor/activeExperiment")))return[2];(0,c.dispatch)(l).setPageAttribute("editor/alternativeBeingApplied",t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fe()({path:"/nab/v1/experiment/".concat(e,"/apply/").concat(t),method:"PUT"})];case 2:return n=i.sent(),[3,4];case 3:return r=i.sent(),(0,m.createErrorNotice)(r,(0,xe._x)("Alternative can’t be applied","text","nelio-ab-testing")),(0,c.dispatch)(l).setPageAttribute("editor/alternativeBeingApplied",!1),[2];case 4:return(0,c.dispatch)(l).changeLastAppliedAlternative(n.id,t),(0,c.dispatch)(l).setPageAttribute("editor/alternativeBeingApplied",!1),[2]}}))}))}function Oe(t,e){if(null==t?void 0:t.links)return(null==e?void 0:e.links)?Pe(Pe({},e.links),{heatmap:t.links.heatmap,preview:t.links.preview}):t.links}var _e=function(t,e,n,r){return new(n||(n=Promise))((function(i,u){function o(t){try{a(r.next(t))}catch(t){u(t)}}function c(t){try{a(r.throw(t))}catch(t){u(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}a((r=r.apply(t,e||[])).next())}))},Ce=function(t,e){var n,r,i,u,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},De=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,u=e.length;i<u;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function Ne(t){var e;return _e(this,void 0,void 0,(function(){var n,r;return Ce(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,fe()({path:"/nab/v1/migrate/experiment/".concat(t),method:"PUT"})];case 1:return i.sent(),[3,3];case 2:return n=i.sent(),console.error(n),[3,3];case 3:return r=null!==(e=(0,c.select)(l).getPageAttribute("welcome/migratedExperiments"))&&void 0!==e?e:[],(0,c.dispatch)(l).setPageAttribute("welcome/migratedExperiments",De(De([],r,!0),[t],!1)),[2]}}))}))}function Ue(){return _e(this,void 0,void 0,(function(){var t;return Ce(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,fe()({path:"/nab/v1/migrate/remove-old-account-data",method:"PUT"})];case 1:return e.sent(),[3,3];case 2:return t=e.sent(),console.error(t),[3,3];case 3:return[2]}}))}))}var Me=function(t,e,n,r){return new(n||(n=Promise))((function(i,u){function o(t){try{a(r.next(t))}catch(t){u(t)}}function c(t){try{a(r.throw(t))}catch(t){u(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}a((r=r.apply(t,e||[])).next())}))},Ve=function(t,e){var n,r,i,u,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function Le(){return Me(this,void 0,void 0,(function(){var t,e,n;return Ve(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,fe()({path:"/nab/v1/site"})];case 1:return t=r.sent(),(0,c.dispatch)(l).receiveAccount(t),[3,3];case 2:return e=r.sent(),n=e instanceof Error?e.message:"unknown",console.warn("Error while accessing site info. Error: ".concat(n)),[3,3];case 3:return[2]}}))}))}function Ge(){return Me(this,void 0,void 0,(function(){return Ve(this,(function(t){switch(t.label){case 0:return[4,(0,c.resolveSelect)(l).getAccount()];case 1:return t.sent(),[2]}}))}))}function je(t){return Me(this,void 0,void 0,(function(){var e,n,r;return Ve(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,fe()({path:"/nab/v1/subscription/".concat(t,"/sites")})];case 1:return e=i.sent(),(0,c.dispatch)(l).receiveSites(e),[3,3];case 2:return n=i.sent(),r=n instanceof Error?n.message:"unknown",console.warn("Error while accessing sites in subscription ".concat(t,". Error: ").concat(r)),[3,3];case 3:return[2]}}))}))}function Be(t){return Me(this,void 0,void 0,(function(){var e,n,r;return Ve(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,fe()({path:"/nab/v1/subscription/".concat(t,"/invoices")})];case 1:return e=i.sent(),(0,c.dispatch)(l).receiveInvoices(e),[3,3];case 2:return n=i.sent(),r=n instanceof Error?n.message:"unknown",console.warn("Error while accessing invoices in subscription ".concat(t,". Error: ").concat(r)),[3,3];case 3:return[2]}}))}))}function Ke(){return Me(this,void 0,void 0,(function(){var t,e,n;return Ve(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,fe()({path:"/nab/v1/products"})];case 1:return t=r.sent(),(0,c.dispatch)(l).receiveProducts(t),[3,3];case 2:return e=r.sent(),n=e instanceof Error?e.message:"unknown",console.warn("Error while retrieving NC products. Error: ".concat(n)),[3,3];case 3:return[2]}}))}))}var Qe=function(t,e,n,r){return new(n||(n=Promise))((function(i,u){function o(t){try{a(r.next(t))}catch(t){u(t)}}function c(t){try{a(r.throw(t))}catch(t){u(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}a((r=r.apply(t,e||[])).next())}))},qe=function(t,e){var n,r,i,u,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function Ye(){return Qe(this,void 0,void 0,(function(){var t,e;return qe(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,fe()({path:"/nab/v1/types"})];case 1:return t=n.sent(),(0,c.dispatch)(l).receiveKindEntitiesQuery((0,s.values)(t)),[3,3];case 2:return e=n.sent(),console.warn(e),[3,3];case 3:return[2]}}))}))}function We(t,e){return Qe(this,void 0,void 0,(function(){var n,r,i;return qe(this,(function(u){switch(u.label){case 0:if(!t||!e)return[2];u.label=1;case 1:return u.trys.push([1,4,,5]),[4,(0,c.resolveSelect)(l).getKindEntities()];case 2:return n=u.sent(),(0,s.find)(n,{name:t})?[4,fe()({path:"/nab/v1/post/?id=".concat(e,"&type=").concat(t)})]:(console.warn("Entity ".concat(t," not found in"),n),[2]);case 3:return r=u.sent(),(0,c.dispatch)(l).receiveEntityRecords(t,r),[3,5];case 4:return i=u.sent(),console.warn(i),[3,5];case 5:return[2]}}))}))}function Fe(t){return e=this,n=void 0,i=function(){var e,n,r;return function(t,e){var n,r,i,u,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,fe()({path:"/nab/v1/experiment/".concat(t)})];case 1:return e=i.sent(),(0,c.dispatch)(l).receiveExperiment(t,e),[3,3];case 2:return n=i.sent(),r=n instanceof Error?n.message:"unknown",console.warn("Unable to retrieve experiment ".concat(t,". Error: ").concat(r,".")),[3,3];case 3:return[2]}}))},new((r=void 0)||(r=Promise))((function(t,u){function o(t){try{a(i.next(t))}catch(t){u(t)}}function c(t){try{a(i.throw(t))}catch(t){u(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(o,c)}a((i=i.apply(e,n||[])).next())}));var e,n,r,i}var He=function(t,e,n,r){return new(n||(n=Promise))((function(i,u){function o(t){try{a(r.next(t))}catch(t){u(t)}}function c(t){try{a(r.throw(t))}catch(t){u(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}a((r=r.apply(t,e||[])).next())}))},Xe=function(t,e){var n,r,i,u,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function ze(t){return He(this,void 0,void 0,(function(){var e,n,r,i;return Xe(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,(0,c.resolveSelect)(l).getExperiment(t)];case 1:return(e=u.sent())?[4,fe()({path:"/nab/v1/experiment/".concat(t,"/result")})]:[2];case 2:return n=u.sent(),r=function(t,e){return{winners:vt(t.results||{},e.goals),wasEnoughData:dt(t.results||{},e.goals),alternatives:pt(t,e),segments:ft(t,e)}}(n,e),(0,c.dispatch)(l).receiveExperimentResult(t,r),[3,4];case 3:return i=u.sent(),(0,m.createErrorNotice)(i,(0,xe.sprintf)(
/* translators: test id */
(0,xe._x)("Unable to retrieve results in test %d.","text","nelio-ab-testing"),t)),[3,4];case 4:return[2]}}))}))}function $e(t){return He(this,void 0,void 0,(function(){return Xe(this,(function(e){switch(e.label){case 0:return[4,(0,c.resolveSelect)(l).getExperimentResults(t)];case 1:return e.sent(),[2]}}))}))}function Je(t){return He(this,void 0,void 0,(function(){return Xe(this,(function(e){switch(e.label){case 0:return[4,(0,c.resolveSelect)(l).getExperimentResults(t)];case 1:return e.sent(),[2]}}))}))}function Ze(t){return He(this,void 0,void 0,(function(){return Xe(this,(function(e){switch(e.label){case 0:return[4,(0,c.resolveSelect)(l).getExperimentResults(t)];case 1:return e.sent(),[2]}}))}))}function tn(t){return He(this,void 0,void 0,(function(){return Xe(this,(function(e){switch(e.label){case 0:return[4,(0,c.resolveSelect)(l).getExperimentResults(t)];case 1:return e.sent(),[2]}}))}))}function en(t){return He(this,void 0,void 0,(function(){return Xe(this,(function(e){switch(e.label){case 0:return[4,(0,c.resolveSelect)(l).getExperimentResults(t)];case 1:return e.sent(),[2]}}))}))}var nn=function(t,e,n,r){return new(n||(n=Promise))((function(i,u){function o(t){try{a(r.next(t))}catch(t){u(t)}}function c(t){try{a(r.throw(t))}catch(t){u(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}a((r=r.apply(t,e||[])).next())}))},rn=function(t,e){var n,r,i,u,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function un(){return nn(this,void 0,void 0,(function(){var t,e,n;return rn(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,fe()({path:"/nab/v1/plugins"})];case 1:return t=r.sent(),(0,c.dispatch)(l).receivePlugins(t),[3,3];case 2:return e=r.sent(),n=e instanceof Error?e.message:"unknown",console.warn("Unable to retrieve active plugins. Error: ".concat(n)),[3,3];case 3:return[2]}}))}))}function on(){return nn(this,void 0,void 0,(function(){var t,e,n;return rn(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,fe()({path:"/nab/v1/menu/search?query"})];case 1:return t=r.sent(),(0,c.dispatch)(l).receiveMenus(t.results),[3,3];case 2:return e=r.sent(),n=e instanceof Error?e.message:"unknown",console.warn("Unable to check if site has menus. Error: ".concat(n)),[3,3];case 3:return[2]}}))}))}function cn(t){return nn(this,void 0,void 0,(function(){var e,n,r;return rn(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,fe()({path:"/nab/v1/menu/".concat(t)})];case 1:return e=i.sent(),(0,c.dispatch)(l).receiveMenus(e),[3,3];case 2:return n=i.sent(),r=n instanceof Error?n.message:"unknown",console.warn("Unable to retrieve menu ".concat(t,". Error: ").concat(r)),[3,3];case 3:return[2]}}))}))}function an(){return nn(this,void 0,void 0,(function(){var t,e,n;return rn(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,fe()({path:(0,Se.addQueryArgs)("/nab/v1/templates")})];case 1:return t=r.sent(),(0,c.dispatch)(l).receiveTemplates(t.results),[3,3];case 2:return e=r.sent(),n=e instanceof Error?e.message:"unknown",console.warn("Unable to retrieve templates. Error: ".concat(n)),[3,3];case 3:return[2]}}))}))}function sn(){return nn(this,void 0,void 0,(function(){var t,e,n;return rn(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,fe()({path:"/nab/v1/themes"})];case 1:return t=r.sent(),(0,c.dispatch)(l).receiveThemes(t.results),[3,3];case 2:return e=r.sent(),n=e instanceof Error?e.message:"unknown",console.warn("Unable to retrieve themes. Error: ".concat(n)),[3,3];case 3:return[2]}}))}))}var ln=function(){return ln=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ln.apply(this,arguments)},fn=ln(ln({},r),i);function vn(t,e){return(0,c.useSelect)((function(n){var r,i,u=n(l),o=u.getPageAttribute;return null!==(i=(0,u.getExperimentAttribute)(null!==(r=o("editor/activeExperiment"))&&void 0!==r?r:0,t))&&void 0!==i?i:e}))}function dn(t,e){var n,r=null!==(n=(0,c.useSelect)((function(e){return e(l).getPageAttribute(t)})))&&void 0!==n?n:e,i=(0,c.useDispatch)(l).setPageAttribute;return[r,function(e){return i(t,e)}]}function pn(t){return(0,c.useSelect)((function(e){return e(l).getPluginSetting(t)}))}(0,c.registerStore)(l,{reducer:T,controls:c.controls,actions:fn,selectors:n,resolvers:u}),(0,c.select)(l).getPluginSetting("siteId"),(0,c.dispatch)(l).setToday((0,a.format)("Y-m-d",new Date))}();var n=nab="undefined"==typeof nab?{}:nab;for(var r in e)n[r]=e[r];e.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})}();