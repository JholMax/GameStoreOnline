!function(){var e={4184:function(e,t){var n;!function(){"use strict";var a={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===r)if(n.toString===Object.prototype.toString)for(var c in n)a.call(n,c)&&n[c]&&e.push(c);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};!function(){"use strict";n.r(a),n.d(a,{initPage:function(){return we}});var e,t=window.wp.element,i=(window.wp.domReady,window.wp.notices),r=window.wp.data,o=window.nab.data,c=window.wp.i18n,l=window.nab.components,s=[{label:(0,c._x)("How do I change my payment details?","text","nelio-ab-testing"),link:(0,c._x)("https://neliosoftware.com/testing/help/how-do-i-change-my-payment-details/","text","nelio-ab-testing")},{label:(0,c._x)("What if my monthly quota of page views gets exhausted?","text","nelio-ab-testing"),link:(0,c._x)("https://neliosoftware.com/testing/help/what-if-my-monthly-quota-gets-exhausted/","text","nelio-ab-testing")}],u=window.wp.components,m=null!==(e=null===i.store||void 0===i.store?void 0:i.store.name)&&void 0!==e?e:"core/notices",p=function(e){var n=e.children,a=b(),i=_(),o=(0,r.useDispatch)(m).removeNotice;return a?t.createElement(l.LoadingAnimation,{text:(0,c._x)("Loading…","text","nelio-ab-testing")}):t.createElement(t.Fragment,null,t.createElement(u.NoticeList,{notices:i,className:"components-editor-notices__pinned",onRemove:o}),n)},b=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getAccount(),!e(o.STORE_NAME).hasFinishedResolution("getAccount")}))},_=function(){return(0,r.useSelect)((function(e){return e(m).getNotices()}))},f=window.lodash,E=window.React;function d(e){return e.startsWith("{{/")?{type:"componentClose",value:e.replace(/\W/g,"")}:e.endsWith("/}}")?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.startsWith("{{")?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}function g(e,t){let n,a,i=[];for(let r=0;r<e.length;r++){const o=e[r];if("string"!==o.type){if(void 0===t[o.value])throw new Error(`Invalid interpolation, missing component node: \`${o.value}\``);if("object"!=typeof t[o.value])throw new Error(`Invalid interpolation, component node must be a ReactElement or null: \`${o.value}\``);if("componentClose"===o.type)throw new Error(`Missing opening component token: \`${o.value}\``);if("componentOpen"===o.type){n=t[o.value],a=r;break}i.push(t[o.value])}else i.push(o.value)}if(n){const r=function(e,t){const n=t[e];let a=0;for(let i=e+1;i<t.length;i++){const e=t[i];if(e.value===n.value){if("componentOpen"===e.type){a++;continue}if("componentClose"===e.type){if(0===a)return i;a--}}}throw new Error("Missing closing component token `"+n.value+"`")}(a,e),o=g(e.slice(a+1,r),t),c=(0,E.cloneElement)(n,{},o);if(i.push(c),r<e.length-1){const n=g(e.slice(r+1),t);i=i.concat(n)}}return i=i.filter(Boolean),0===i.length?null:1===i.length?i[0]:(0,E.createElement)(E.Fragment,null,...i)}function S(e){const{mixedString:t,components:n,throwErrors:a}=e;if(!n)return t;if("object"!=typeof n){if(a)throw new Error(`Interpolation Error: unable to process \`${t}\` because components is not an object`);return t}const i=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(d)}(t);try{return g(i,n)}catch(e){if(a)throw new Error(`Interpolation Error: unable to process \`${t}\` because of error \`${e.message}\``);return t}}var N=window.nab.date,v=window.nab.utils,x=function(e){var n=e.siteId,a=(0,r.useSelect)((function(e){return e(o.STORE_NAME).getProductDisplay()}));return t.createElement("div",{className:"nab-account-container__box nab-plan"},t.createElement("div",{className:"nab-plan__content"},t.createElement("h3",{className:"nab-plan__title"},a,t.createElement("span",{className:"nab-plan__period"},(0,c._x)("Agency Plan","text","nelio-ab-testing")),t.createElement(l.HelpIcon,{type:"info",tooltipPlacement:"left",className:"nab-plan__site-id",text:"".concat((0,c._x)("Support Key","text","nelio-ab-testing"),": ").concat(n)})),t.createElement("div",{className:"nab-plan__renewal"},(0,c._x)("You’re currently using an agency subscription plan.","user","nelio-ab-testing")),t.createElement(l.QuotaMeter,null)),t.createElement("div",{className:"nab-plan__actions"},t.createElement(h,{siteId:n}),t.createElement(y,null)))},h=function(e){var n=e.siteId,a=(0,t.useState)(!1),i=a[0],s=a[1],m=(0,r.useDispatch)(o.STORE_NAME).unlinkSite,p=function(){return s(!1)};return t.createElement(t.Fragment,null,t.createElement(u.Button,{isDestructive:!0,className:"nab-plan__action",onClick:function(){return s(!0)}},(0,c._x)("Downgrade to Free Version","command","nelio-ab-testing")),t.createElement(l.ConfirmationDialog,{title:(0,c._x)("Downgrade to Free version?","text","nelio-ab-testing"),text:(0,c._x)("This will remove the subscription license from the site and you’ll be using Nelio A/B Testing’s free version.","text","nelio-ab-testing"),confirmLabel:(0,c._x)("Downgrade","command","nelio-ab-testing"),isOpen:i,onCancel:p,onConfirm:function(){p(),m(n)}}))},y=function(){var e=(0,r.useSelect)((function(e){return(e(o.STORE_NAME).getAccount()||{}).license||""})),n=(0,t.useState)(!1),a=n[0],i=n[1],l=(0,t.useState)(""),s=l[0],m=l[1],p=(0,r.useDispatch)(o.STORE_NAME).setPageAttribute;return t.createElement("div",null,t.createElement(u.Button,{isSecondary:!0,className:"nab-plan__action",onClick:function(){return i(!0)}},(0,c._x)("View Details","command","nelio-ab-testing")),a&&t.createElement(u.Popover,{className:"nab-license-form",noArrow:!1,position:"bottom left"},t.createElement(u.TextControl,{value:s,placeholder:(0,c._x)("Type your license here","user","nelio-ab-testing"),className:"nab-license-form__text-control",onChange:m}),t.createElement(u.Button,{isPrimary:!0,className:"nab-license-form__button",onClick:function(){e&&s===e?(p("account/usesFullViewAgency",!0),i(!1)):m("")},disabled:s.length!==e.length},(0,c._x)("Validate","command","nelio-ab-testing"))))},w=function(e){var n=e.isOpen,a=e.position,i=e.onClick,l=e.onFocusOutside,s=(0,t.useState)(""),m=s[0],p=s[1],b=(0,r.useDispatch)(o.STORE_NAME).linkSite;return n?t.createElement(u.Popover,{className:"nab-license-form",noArrow:!1,position:a,onFocusOutside:l},t.createElement(u.TextControl,{value:m,placeholder:(0,c._x)("Type your license here","user","nelio-ab-testing"),maxLength:Math.max(21,26),className:"nab-license-form__text-control",onChange:p}),t.createElement(u.Button,{isPrimary:!0,className:"nab-license-form__button",disabled:21!==m.length&&26!==m.length,onClick:function(){i(),b(m)}},(0,c._x)("Apply","command","nelio-ab-testing"))):null},O=function(e){var n=e.isOpen,a=e.position,i=e.onClick,l=e.onFocusOutside,s=A(),m=M(),p=T(),b=(0,r.useDispatch)(o.STORE_NAME).upgradeSubscription,_=(0,t.useState)(""),f=_[0],E=_[1];return n?s?t.createElement(u.Popover,{className:"nab-upgrade-form nab-upgrade-form--loading",noArrow:!1,position:a,onFocusOutside:l},t.createElement(u.Spinner,null)):t.createElement(u.Popover,{className:"nab-upgrade-form",noArrow:!1,position:a,onFocusOutside:l},t.createElement(u.RadioControl,{className:"nab-upgrade-form__product-container",label:(0,c._x)("Subscription Plans","text","nelio-ab-testing"),selected:f,options:m.map((function(e){var n=e.id,a=e.displayName,i=e.price,r=e.description;return{label:t.createElement("div",{className:"nab-upgrade-form__product"},t.createElement("strong",{className:"nab-upgrade-form__product-name"},C(a)),t.createElement("span",{className:"nab-upgrade-form__product-price",title:p},R(i[p],p)),t.createElement("span",{className:"nab-upgrade-form__product-description"},C(r))),value:n}})),onChange:E}),t.createElement("div",{className:"nab-upgrade-form__button-container"},t.createElement(u.Button,{isPrimary:!0,className:"nab-upgrade-form__button",disabled:!f,onClick:function(){i(),b(f)}},(0,c._x)("Upgrade Subscription","command","nelio-ab-testing")))):null},A=function(){return(0,r.useSelect)((function(e){return!e(o.STORE_NAME).hasFinishedResolution("getProducts")}))},M=function(){return(0,r.useSelect)((function(e){var t=e(o.STORE_NAME),n=t.getProducts,a=(0,t.getSubscriptionProduct)(),i=n();return(0,f.filter)(i,(function(e){return e.upgradeableFrom.includes(a)}))}))},T=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getCurrency()||"USD"}))},R=function(e,t){return"EUR"===t?"".concat(e,"€"):"$".concat(e)},C=function(e){return(0,N.getLocale)().startsWith("es")?e.es:e.en},k=function(e){var n=e.siteId;return K()?t.createElement(x,{siteId:n}):t.createElement("div",{className:"nab-account-container__box nab-plan"},t.createElement("div",{className:"nab-plan__content"},t.createElement(D,{siteId:n}),t.createElement(P,null),t.createElement(l.QuotaMeter,null)),t.createElement(I,null))},D=function(e){var n=e.siteId,a=H().period,i=z(),r=Q(),o=Y(),s="month"===a?(0,c._x)("Monthly","text","nelio-ab-testing"):(0,c._x)("Yearly","text","nelio-ab-testing");return t.createElement("h3",{className:"nab-plan__title"},i,t.createElement("span",{className:"nab-plan__period"},o?(0,c._x)("Free","text","nelio-ab-testing"):s),"canceled"===r&&t.createElement("span",{className:"nab-plan__state"},(0,c._x)("Canceled","text (account state)","nelio-ab-testing")),t.createElement(l.HelpIcon,{type:"info",tooltipPlacement:"left",className:"nab-plan__site-id",text:"".concat((0,c._x)("Support Key","text","nelio-ab-testing"),": ").concat(n)}))},P=function(){var e=Y(),n=Q(),a=q(),i=G(),r=J(),o=X();return e?t.createElement("div",{className:"nab-plan__renewal"},(0,c._x)("You are using the free version of Nelio A/B Testing.","text","nelio-ab-testing")):"canceled"===n?t.createElement("div",{className:"nab-plan__renewal"},S({mixedString:(0,c.sprintf)(
/* translators: date */
(0,c._x)("Your subscription will end on %s.","text","nelio-ab-testing"),"{{date}}".concat((0,N.formatI18nDate)(i),"{{/date}}")),components:{date:t.createElement("span",{className:"nab-plan__renewal-date"})}})):a?t.createElement("div",{className:"nab-plan__renewal"},S({mixedString:(0,c._x)("{{link}}Contact us{{/link}} to get additional features to manage your account.","text","nelio-ab-testing"),components:{link:t.createElement("a",{href:"mailto:support@neliosoftware.com"})}})):t.createElement("div",{className:"nab-plan__renewal"},S({mixedString:(0,c.sprintf)(
/* translators: 1 -> price and currency; 2 -> date */
(0,c._x)("Next charge will be %1$s on %2$s.","text","nelio-ab-testing"),"{{money}}".concat(o,"{{/money}}"),"{{date}}".concat((0,N.formatI18nDate)(r),"{{/date}}")),components:{date:t.createElement("span",{className:"nab-plan__renewal-date"}),money:t.createElement("span",{className:"nab-plan__renewal-amount"})}}))},I=function(){var e=Y(),n=Q();return q()?t.createElement("div",{className:"nab-plan__actions"},t.createElement(B,null),t.createElement(j,null)):e?t.createElement("div",{className:"nab-plan__actions"},t.createElement(F,null),t.createElement(L,null)):"canceled"===n?t.createElement("div",{className:"nab-plan__actions"},t.createElement(W,null)):t.createElement("div",{className:"nab-plan__actions"},t.createElement(U,null),t.createElement(V,null),t.createElement($,null))},F=function(){var e=(0,t.useState)(!1),n=e[0],a=e[1];return t.createElement("span",{className:"nab-plan__action-container"},t.createElement(u.Button,{isSecondary:!0,className:"nab-plan__action",onClick:function(){return a(!0)}},(0,c._x)("Use License","command","nelio-ab-testing")),t.createElement(w,{position:"bottom center",onFocusOutside:function(){return a(!1)},onClick:function(){return a(!1)},isOpen:n}))},L=function(){var e=ee();return t.createElement(u.ExternalLink,{className:"nab-plan__action components-button is-primary",href:(0,v.getSubscribeLink)(e)},(0,v.getSubscribeLabel)(e))},B=function(){return t.createElement(u.ExternalLink,{className:"nab-plan__action components-button is-secondary",href:"mailto:support@neliosoftware.com?subject=Buy%20Quota"},(0,c._x)("Buy More Quota","command","nelio-ab-testing"))},j=function(){return t.createElement(u.ExternalLink,{className:"nab-plan__action components-button is-primary",href:"mailto:support@neliosoftware.com?subject=Upgrade%20Subscription"},(0,c._x)("Upgrade Subscription","command","nelio-ab-testing"))},U=function(){var e=(0,t.useState)(!1),n=e[0],a=e[1],i=(0,r.useDispatch)(o.STORE_NAME).cancelSubscription,s=J();return t.createElement(t.Fragment,null,t.createElement(u.Button,{isDestructive:!0,className:"nab-plan__action",onClick:function(){return a(!0)}},(0,c._x)("Cancel Subscription","command","nelio-ab-testing")),t.createElement(l.ConfirmationDialog,{title:(0,c._x)("Cancel Subscription?","text","nelio-ab-testing"),text:(0,c.sprintf)(
/* translators: a date */
(0,c._x)("Canceling your subscription will cause it not to renew. If you cancel your subscrition, it will continue until %s. Then, the subscription will expire and will not be invoiced again. Do you want to cancel your subscription?","user","nelio-ab-testing"),(0,N.formatI18nDate)(s)),isDestructive:!0,confirmLabel:(0,c._x)("Cancel Subscription","command","nelio-ab-testing"),cancelLabel:(0,c._x)("Back","command","nelio-ab-testing"),onCancel:function(){return a(!1)},onConfirm:function(){a(!1),i()},isOpen:n}))},V=function(){var e=(0,t.useState)(!1),n=e[0],a=e[1];return t.createElement("div",null,t.createElement(u.Button,{isSecondary:!0,className:"nab-plan__action",onClick:function(){return a(!0)}},(0,c._x)("Buy More Quota","command","nelio-ab-testing")),t.createElement(l.QuotaPurchasePopover,{position:"bottom center",onClick:function(){return a(!1)},onFocusOutside:function(){return a(!1)},isOpen:n}))},$=function(){var e=Z(),n=(0,t.useState)(!1),a=n[0],i=n[1];return e?t.createElement("div",null,t.createElement(u.Button,{isPrimary:!0,className:"nab-plan__action",onClick:function(){return i(!0)}},(0,c._x)("Upgrade Subscription","command","nelio-ab-testing")),t.createElement(O,{position:"bottom center",onClick:function(){return i(!1)},onFocusOutside:function(){return i(!1)},isOpen:a})):null},W=function(){var e=(0,t.useState)(!1),n=e[0],a=e[1],i=(0,r.useDispatch)(o.STORE_NAME).uncancelSubscription,s=J();return t.createElement(t.Fragment,null,t.createElement(u.Button,{isPrimary:!0,className:"nab-plan__action",onClick:function(){return a(!0)}},(0,c._x)("Reactivate Subscription","command","nelio-ab-testing")),t.createElement(l.ConfirmationDialog,{title:(0,c._x)("Reactivate Subscription?","text","nelio-ab-testing"),text:(0,c.sprintf)(
/* translators: a date */
(0,c._x)("Reactivating your subscription will cause it to renew on %s. Do you want to reactivate your subscription?","user","nelio-ab-testing"),(0,N.formatI18nDate)(s)),confirmLabel:(0,c._x)("Reactivate Subscription","command","nelio-ab-testing"),cancelLabel:(0,c._x)("Back","command","nelio-ab-testing"),onCancel:function(){return a(!1)},onConfirm:function(){a(!1),i()},isOpen:n}))},H=function(){return(0,r.useSelect)((function(e){return{period:e(o.STORE_NAME).getPeriod(),plan:e(o.STORE_NAME).getPlan()}}))},Q=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getState()}))},q=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).isSubscriptionDeprecated()}))},Y=function(){return(0,r.useSelect)((function(e){return"free"===e(o.STORE_NAME).getMode()}))},K=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).isAgency()&&!e(o.STORE_NAME).getPageAttribute("account/usesFullViewAgency")}))},z=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getProductDisplay()}))},G=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getDeactivationDate()||e(o.STORE_NAME).getToday()}))},J=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getNextChargeDate()||e(o.STORE_NAME).getToday()}))},X=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getNextChargeTotal()}))},Z=function(){return(0,r.useSelect)((function(e){var t=e(o.STORE_NAME),n=t.getProducts,a=(0,t.getSubscriptionProduct)(),i=n(),r=(0,f.filter)(i,(function(e){return e.upgradeableFrom.includes(a)}));return!!r.length}))},ee=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getToday()}))},te=function(){var e=ne(),n=ae(),a=ie(),i=re(),r=oe(),o=ce(),l=(0,t.useState)(!1),s=l[0],m=l[1];return e?t.createElement("div",{className:"nab-account-container__box nab-info"},t.createElement("h3",{className:"nab-info__title"},(0,c._x)("Account Information","title (account)","nelio-ab-testing")),t.createElement("div",{className:"nab-info__container"},t.createElement("div",{className:"nab-info__profile"},t.createElement("div",{className:"nab-info__picture nab-first-letter-a"},t.createElement("div",{className:"nab-info__actual-picture",style:{backgroundImage:"url(".concat(o,")")}}))),t.createElement("div",{className:"nab-info__details"},t.createElement("p",{className:"nab-info__name"},n),t.createElement("p",{className:"nab-info__email"},t.createElement(u.Dashicon,{icon:"email",className:"nab-info__icon"}),a),t.createElement("p",{className:"nab-info__creation-date"},t.createElement(u.Dashicon,{icon:"calendar",className:"nab-info__icon"}),S({mixedString:(0,c.sprintf)(
/* translators: date */
(0,c._x)("Member since %s.","text","nelio-ab-testing"),"{{date}}".concat((0,N.formatI18nDate)(i),"{{/date}}")),components:{date:t.createElement("strong",null)}})),t.createElement("div",{className:"nab-info__license"},t.createElement(u.Dashicon,{icon:"admin-network",className:"nab-info__icon"}),t.createElement("code",{title:(0,c._x)("License Key","text","nelio-ab-testing")},r),t.createElement("div",{className:"nab-info__change-license"},t.createElement(u.Button,{isTertiary:!0,onClick:function(){return m(!0)}},(0,c._x)("Change","command","nelio-ab-testing")),t.createElement(w,{isOpen:s,position:"bottom center",onClick:function(){return m(!1)},onFocusOutside:function(){return m(!1)}})))))):null},ne=function(){return(0,r.useSelect)((function(e){var t=e(o.STORE_NAME),n=t.getMode,a=t.getPageAttribute,i=t.isAgency,r="regular"===n(),c=i()&&!a("account/usesFullViewAgency");return r&&!c}))},ae=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getFullname()}))},ie=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getEmail()}))},re=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getStartDate()||e(o.STORE_NAME).getToday()}))},oe=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getLicense()}))},ce=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getPhoto()}))},le=n(4184),se=n.n(le),ue=function(e){var n=e.actualUrl,a=e.id,i=e.isCurrentSite,s=e.url,m=(0,t.useState)(!1),p=m[0],b=m[1],_=(0,r.useDispatch)(o.STORE_NAME).unlinkSite;return t.createElement("li",{className:"nab-site"},i&&t.createElement("span",{className:"nab-site__url"},t.createElement("span",{className:"nab-site__current-site"},n,!!n&&s!==n&&t.createElement(l.HelpIcon,{className:"nab-site__current-site-help",type:"info",text:(0,c.sprintf)(
/* translators: site URL */
(0,c._x)("Activation URL is “%s”","text","nelio-ab-testing"),s)})),t.createElement("span",{className:"nab-site__label"},(0,c._x)("This site","text","nelio-ab-testing"))),!i&&t.createElement("span",{className:"nab-site__url"},t.createElement("a",{href:s,className:se()("nab-site__link",{"nab-site__link--current":i}),target:"_blank",rel:"noopener noreferrer"},s)),t.createElement(u.Button,{isDestructive:!0,isTertiary:!0,className:"nab-site__unlink-button",onClick:function(){return b(!0)}},(0,c._x)("Unlink Site","command","nelio-ab-testing")),t.createElement(l.ConfirmationDialog,{title:(0,c._x)("Unlink Site?","text","nelio-ab-testing"),text:(0,c._x)("This will remove the subscription license from the site.","text","nelio-ab-testing"),confirmLabel:(0,c._x)("Unlink","command","nelio-ab-testing"),isOpen:p,onCancel:function(){return b(!1)},onConfirm:function(){b(!1),_(a)}}))},me=function(){return me=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},me.apply(this,arguments)},pe=function(){var e=_e(),n=be(),a=fe(),i=Ee();if(!e)return null;var r=a.length;return t.createElement("div",{className:"nab-account-container__box nab-sites"},t.createElement("h3",{className:"nab-sites__title"},(0,c._x)("Sites","text","nelio-ab-testing"),n&&t.createElement(u.Spinner,null),t.createElement("span",{className:"nab-sites__availability"},"".concat(r," / ").concat(i))),t.createElement("ul",{className:"nab-sites__list"},!n&&a.map((function(e){return t.createElement(ue,me({key:e.id},e))}))))},be=function(){return(0,r.useSelect)((function(e){return!e(o.STORE_NAME).hasFinishedResolution("getSites",[e(o.STORE_NAME).getSubscriptionId()])}))},_e=function(){return(0,r.useSelect)((function(e){var t=e(o.STORE_NAME),n=t.getMode,a=t.getPageAttribute,i=t.isAgency,r="regular"===n(),c=i()&&!a("account/usesFullViewAgency");return r&&!c}))},fe=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getSites(e(o.STORE_NAME).getSubscriptionId())||[]}))},Ee=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getSitesAllowed()}))},de=function(e){var n=e.invoiceUrl,a=e.reference,i=e.chargeDate,r=e.isRefunded,o=e.subtotalDisplay;return t.createElement("tr",{className:"nab-invoice"},t.createElement("td",{className:"nab-invoice__reference"},t.createElement("a",{href:n,className:"nab-invoice__link",target:"_blank",rel:"noopener noreferrer"},a)),t.createElement("td",{className:"nab-invoice__date"},i),t.createElement("td",{className:"nab-invoice__total"},r&&t.createElement("span",{className:"nab-invoice__label"},(0,c._x)("(Refunded)","text (invoice)","nelio-ab-testing")),t.createElement("span",{className:se()("nab-invoice__total-value",{"nab-invoice__total-value--refunded":r})},o)))},ge=function(){return ge=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ge.apply(this,arguments)},Se=function(){var e=Ne(),n=ve(),a=xe(),i=he();return e?t.createElement("div",{className:"nab-account-container__box nab-billing"},t.createElement("h3",{className:"nab-billing__title"},(0,c._x)("Billing History","text","nelio-ab-testing"),n&&t.createElement(u.Spinner,null)),!n&&t.createElement(t.Fragment,null,t.createElement(u.ExternalLink,{className:"nab-billing__action",href:i},(0,c._x)("Manage Payments","user","nelio-ab-testing")),t.createElement("table",{className:"nab-billing__container"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{className:"nab-billing__reference"},(0,c._x)("Invoice Reference","text (account, billing table title)","nelio-ab-testing")),t.createElement("th",{className:"nab-billing__date"},(0,c._x)("Date","text (account, billing table title)","nelio-ab-testing")),t.createElement("th",{className:"nab-billing__total"},(0,c._x)("Total","text (account, billing table title)","nelio-ab-testing")))),t.createElement("tbody",{className:"invoice-list"},a.map((function(e){return t.createElement(de,ge({key:e.reference},e))})))))):null},Ne=function(){return(0,r.useSelect)((function(e){var t=e(o.STORE_NAME),n=t.getMode,a=t.getPageAttribute,i=t.isAgency,r=t.isSubscriptionDeprecated,c="regular"===n(),l=r(),s=i()&&!a("account/usesFullViewAgency");return c&&!l&&!s}))},ve=function(){return(0,r.useSelect)((function(e){return!e(o.STORE_NAME).hasFinishedResolution("getInvoices",[e(o.STORE_NAME).getSubscriptionId()])}))},xe=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getInvoices(e(o.STORE_NAME).getSubscriptionId())}))},he=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).getUrlToManagePayments()}))},ye=function(){return(0,r.useSelect)((function(e){return e(o.STORE_NAME).isLocked()}))?t.createElement(u.Modal,{className:"nab-locked",title:(0,c._x)("Loading…","text","nelio-ab-testing"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,isDismissable:!1,onRequestClose:f.noop},t.createElement(u.Spinner,null)):null};function we(e,n){var a=n.siteId;(0,r.dispatch)(o.STORE_NAME).setPageAttribute("account/usesFullViewAgency",!1);var i=document.getElementById(e);i&&((0,t.render)(t.createElement(p,null,t.createElement(k,{siteId:a}),t.createElement(te,null),t.createElement(pe,null),t.createElement(Se,null),t.createElement(ye,null)),i),(0,l.appendContextualHelp)({screen:"account",questions:s}))}}();var i=nab="undefined"==typeof nab?{}:nab;for(var r in a)i[r]=a[r];a.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})}();